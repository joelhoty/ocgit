<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opencv_imageclassfy_task3_b01</title>
    
    <!-- CSS æ¡†æ¶ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/dark.min.css">
    
    <!-- ä»£ç¢¼é«˜äº® -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/base16/darcula.min.css">
    
    <!-- è‡ªå®šç¾©æ¨£å¼ -->
    <style>
        
                body {
                    max-width: 900px;
                    margin: 0 auto;
                    padding: 20px;
                }
                /* æå‡ä»£ç å—å¯¹æ¯”åº¦ */
                pre {
                    background: #1e1e1e !important;
                    border: 1px solid #3e3e3e;
                }
                pre code {
                    background: #1e1e1e !important;
                }
                code {
                    background: #2d2d2d !important;
                }
                /* å¼•ç”¨å—å¯¹æ¯”åº¦ */
                blockquote {
                    background: #2d2d2d;
                    border-left: 4px solid #4a9eff;
                }
            
        
        /* é€šç”¨ä»£ç¢¼å¡Šæ¨£å¼ */
        pre code {
            display: block;
            padding: 1.5em;
            border-radius: 8px;
            overflow-x: auto;
            line-height: 1.6;
        }

        /* Mermaid åœ–è¡¨æ¨£å¼ */
        
        .mermaid {
            margin: 2em 0;
            padding: 1.5em;
            text-align: center;
            border-radius: 8px;
        }
        
        .mermaid {
            background: #2c3034;
            border: 1px solid #444;
        }
            
        
        /* éŸ¿æ‡‰å¼èª¿æ•´ */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container, .markdown-body, .latex-body, .window-body, .nes-container {
                padding: 15px;
            }
            pre code {
                padding: 1em;
            }
        }
        
        
    </style>
</head>
<body>
    <div class="container"><!-- Path: General_python/openCV/å½±åƒè¾¨è­˜-å‚³çµ±æ–¹æ³• | Timestamp: 2025-10-06 16:00:00 | Version: b01 -->
<h1>é¡Œç›®ä¸‰ï¼šæ™ºæ…§å‹éš±ç§ä¿è­·ç³»çµ±</h1>
<h2>ğŸ“‹ ä»»å‹™èªªæ˜</h2>
<p>è«‹æ’°å¯«ä¸€å€‹ Python ç¨‹å¼ï¼Œèƒ½å¤ åµæ¸¬äººè‡‰ä¸¦ã€Œé¸æ“‡æ€§ã€åœ°å°ç‰¹å®šäº”å®˜é€²è¡Œé¦¬è³½å…‹è™•ç†ï¼Œå¯¦ç¾æ›´ç²¾ç´°çš„éš±ç§ä¿è­·åŠŸèƒ½ã€‚</p>
<hr />
<h2>ğŸ–¼ï¸ å½±åƒé¸æ“‡æŒ‡å¼•</h2>
<h3>é©åˆçš„å½±åƒé¡å‹</h3>
<h4>âœ… æ¨è–¦ä½¿ç”¨çš„å½±åƒ</h4>
<ol>
<li><strong>æ¸…æ™°çš„æ­£é¢äººè‡‰ç…§ç‰‡</strong></li>
<li>ç‰¹å¾µï¼šè‡‰éƒ¨å®Œå…¨æœå‘é¡é ­ã€äº”å®˜æ¸…æ™°</li>
<li>ç¯„ä¾‹ï¼šè­‰ä»¶ç…§ã€è‡ªæ‹ç…§ã€è‚–åƒç…§</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜…â˜…â˜…ï¼ˆ95%+ï¼‰</li>
<li>
<p>æœ€ä½³ç¯„ä¾‹ï¼š</p>
<ul>
<li>è­‰ä»¶ç…§ç­‰ç´šçš„æ¸…æ™°åº¦</li>
<li>çœ¼ç›å®Œå…¨å¼µé–‹ã€ç›´è¦–é¡é ­</li>
<li>å˜´å·´é–‰åˆæˆ–å¾®ç¬‘ï¼ˆé¿å…å¤§ç¬‘å¼µå˜´ï¼‰</li>
<li>ç„¡ç€æµ·é®æ“‹çœ¼ç›</li>
</ul>
</li>
<li>
<p><strong>å…‰ç·šå……è¶³ä¸”å‡å‹»çš„ç…§ç‰‡</strong></p>
</li>
<li>ç‰¹å¾µï¼šè‡‰éƒ¨æ˜äº®ã€ç„¡å¼·çƒˆé™°å½±</li>
<li>æ‹æ”ç’°å¢ƒï¼šç™½å¤©å®¤å…§ã€æŸ”å’Œç‡ˆå…‰ã€é™°å¤©æˆ¶å¤–</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜…â˜…â˜…ï¼ˆ90%+ï¼‰</li>
<li>
<p>å…‰ç·šå»ºè­°ï¼š<br />
<code>âœ… å‰æ–¹æˆ–å´å‰æ–¹å…‰æºï¼ˆ45Â° è§’ï¼‰
     âœ… ç’°å¢ƒå…‰å‡å‹»ï¼ˆå¦‚æ”å½±æ£šæ‰“å…‰ï¼‰
     âœ… é™°å¤©çš„è‡ªç„¶å…‰ï¼ˆç„¡é™°å½±ï¼‰
     âš ï¸ é¿å…æ­£ä¸Šæ–¹å…‰æºï¼ˆçœ¼çª©é™°å½±ï¼‰
     âš ï¸ é¿å…é€†å…‰ï¼ˆè‡‰éƒ¨éæš—ï¼‰
     âš ï¸ é¿å…å¼·çƒˆå´å…‰ï¼ˆé™°é™½è‡‰ï¼‰</code></p>
</li>
<li>
<p><strong>å–®äººç‰¹å¯«ç…§ç‰‡</strong></p>
</li>
<li>ç‰¹å¾µï¼šè‡‰éƒ¨ä½”ç•«é¢ 40% ä»¥ä¸Š</li>
<li>è·é›¢ï¼š50cm - 1.5m</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜…â˜…â˜…ï¼ˆ90%+ï¼‰</li>
<li>
<p>æ§‹åœ–å»ºè­°ï¼š</p>
<ul>
<li>åŠèº«ç…§æˆ–å¤§é ­ç…§</li>
<li>äººè‡‰åœ¨ç•«é¢ä¸­å¤®</li>
<li>èƒŒæ™¯ç°¡å–®ä¸é›œäº‚</li>
</ul>
</li>
<li>
<p><strong>äº”å®˜ç„¡é®æ“‹çš„ç…§ç‰‡</strong></p>
</li>
<li>ç‰¹å¾µï¼šçœ¼ç›ã€é¼»å­ã€å˜´å·´å®Œæ•´å¯è¦‹</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼ˆ85%+ï¼‰</li>
<li>æ³¨æ„äº‹é …ï¼š<br />
<code>âœ… ç„¡æˆ´å¢¨é¡ï¼ˆçœ¼ç›åµæ¸¬éœ€è¦ï¼‰
     âœ… ç„¡å£ç½©ï¼ˆå˜´å·´åµæ¸¬éœ€è¦ï¼‰
     âœ… ç€æµ·ä¸é®çœ¼ï¼ˆçœ¼ç›åµæ¸¬éœ€è¦ï¼‰
     âœ… é ­é«®ä¸é®è‡‰ï¼ˆè‡‰éƒ¨å®Œæ•´ï¼‰</code></li>
</ol>
<h4>âš ï¸ æ•ˆæœè¼ƒå·®çš„å½±åƒ</h4>
<ol>
<li><strong>å´è‡‰æˆ–ä½é ­ç…§ç‰‡</strong></li>
<li>å•é¡Œï¼šäº”å®˜åµæ¸¬å™¨ä¸»è¦è¨“ç·´æ–¼æ­£é¢è§’åº¦</li>
<li>å½±éŸ¿ï¼šçœ¼ç›ã€å˜´å·´å¯èƒ½åµæ¸¬ä¸åˆ°</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜†â˜†â˜†ï¼ˆ30-50%ï¼‰</li>
<li>
<p>è‡‰éƒ¨è§’åº¦å»ºè­°ï¼š<br />
<code>âœ… æ­£é¢ï¼ˆ0Â°ï¼‰      â†’ æœ€ä½³
     âš ï¸ å¾®å´é¢ï¼ˆ&lt; 15Â°ï¼‰ â†’ å°šå¯
     âŒ å´è‡‰ï¼ˆ&gt; 30Â°ï¼‰   â†’ æ•ˆæœå·®
     âŒ ä½é ­/æŠ¬é ­       â†’ æ•ˆæœå·®</code></p>
</li>
<li>
<p><strong>äº”å®˜éƒ¨åˆ†é®æ“‹</strong></p>
</li>
<li>å•é¡Œï¼šé®æ“‹ç‰©å¹²æ“¾ç‰¹å¾µåµæ¸¬</li>
<li>å¸¸è¦‹æƒ…æ³ï¼š<br />
<code>âš ï¸ æˆ´ä¸€èˆ¬çœ¼é¡      â†’ å°šå¯ï¼ˆå¯èƒ½èª¤åˆ¤é¡æ¡†ï¼‰
     âŒ æˆ´å¢¨é¡          â†’ ç„¡æ³•åµæ¸¬çœ¼ç›
     âŒ æˆ´å£ç½©          â†’ ç„¡æ³•åµæ¸¬å˜´å·´
     âš ï¸ ç€æµ·é®çœ¼        â†’ å¯èƒ½æ¼åµæ¸¬
     âš ï¸ æ‰‹é®è‡‰          â†’ è¢«é®æ“‹éƒ¨ä½ç„¡æ³•åµæ¸¬</code></li>
<li>
<p>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜†â˜†â˜†ï¼ˆ20-60%ï¼‰</p>
</li>
<li>
<p><strong>è§£æåº¦ä¸è¶³æˆ–æ¨¡ç³Š</strong></p>
</li>
<li>å•é¡Œï¼šäº”å®˜ç´°ç¯€ä¸æ¸…æ™°</li>
<li>å½±éŸ¿ï¼šçœ¼ç›ç­‰å°ç‰¹å¾µé›£ä»¥åµæ¸¬</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜†â˜†â˜†ï¼ˆ40-60%ï¼‰</li>
<li>
<p>è§£æåº¦éœ€æ±‚ï¼š<br />
     ```<br />
     è‡‰éƒ¨åƒç´ å»ºè­°ï¼š</p>
<ul>
<li>çœ¼ç›åµæ¸¬ï¼šçœ¼ç›å€åŸŸè‡³å°‘ 20Ã—20 px</li>
<li>å˜´å·´åµæ¸¬ï¼šå˜´å·´å€åŸŸè‡³å°‘ 30Ã—20 px</li>
<li>æ•´é«”äººè‡‰ï¼šè‡³å°‘ 100Ã—100 px<br />
 ```</li>
</ul>
</li>
<li>
<p><strong>è¡¨æƒ…èª‡å¼µæˆ–å‹•æ…‹ç…§ç‰‡</strong></p>
</li>
<li>å•é¡Œï¼šäº”å®˜å½¢ç‹€è®ŠåŒ–å¤§</li>
<li>å½±éŸ¿ï¼š<ul>
<li>é–‰çœ¼ â†’ çœ¼ç›åµæ¸¬å¤±æ•—</li>
<li>å¤§ç¬‘å¼µå˜´ â†’ å˜´å·´å½¢ç‹€ç•°å¸¸ï¼Œå¯èƒ½åµæ¸¬å¤±æ•—æˆ–åµæ¸¬å¤šå€‹å€åŸŸ</li>
<li>é¬¼è‡‰ â†’ äº”å®˜è®Šå½¢ï¼Œåµæ¸¬ç‡ä¸‹é™</li>
</ul>
</li>
<li>åµæ¸¬æˆåŠŸç‡ï¼šâ˜…â˜…â˜†â˜†â˜†ï¼ˆ40-70%ï¼‰</li>
</ol>
<h4>âŒ å®Œå…¨ä¸é©åˆçš„å½±åƒ</h4>
<ul>
<li>å¡é€šæˆ–ç¹ªç•«äººåƒï¼ˆéçœŸå¯¦äººè‡‰ï¼‰</li>
<li>ç´”å´é¢ç…§ï¼ˆè‡‰éƒ¨è§’åº¦ &gt; 60Â°ï¼‰</li>
<li>æ¥µåº¦æ¨¡ç³Šæˆ–ä½è§£æåº¦ï¼ˆ&lt; 200Ã—200 pxï¼‰</li>
<li>æ¥µç«¯å…‰ç·šï¼ˆå…¨é»‘ã€å¼·çƒˆéæ›ï¼‰</li>
<li>å¤šé‡æ›å…‰æˆ–ç‰¹æ•ˆç…§ç‰‡</li>
</ul>
<h3>æ¸¬è©¦å½±åƒå»ºè­°</h3>
<h4>åˆå­¸è€…æ¸¬è©¦ï¼ˆé›£åº¦ï¼šâ˜…â˜†â˜†â˜†â˜†ï¼‰</h4>
<p><strong>æ¨è–¦å½±åƒ</strong>ï¼š</p>
<pre class="codehilite"><code>1. girl.jpgï¼ˆæ•™å­¸ç¯„ä¾‹ï¼‰
   - ç‰¹é»ï¼šå–®äººæ­£é¢ã€å…‰ç·šè‰¯å¥½ã€äº”å®˜æ¸…æ™°
   - é æœŸï¼šäººè‡‰ 100%ã€çœ¼ç› 90%ã€å˜´å·´ 80%

2. è‡ªå·±çš„è­‰ä»¶ç…§æˆ–è‡ªæ‹ç…§
   - æ‹æ”å»ºè­°ï¼š
     * æ­£é¢ç›´è¦–é¡é ­
     * ç™½è‰²æˆ–æ·ºè‰²èƒŒæ™¯
     * è‡ªç„¶å…‰æˆ–å®¤å…§ç‡ˆå…‰
     * ç„¡ç€æµ·ã€ç„¡çœ¼é¡
   - é æœŸï¼šå…¨éƒ¨åµæ¸¬æˆåŠŸ

3. mona.jpgï¼ˆè’™å¨œéº—èï¼‰
   - ç‰¹é»ï¼šç¶“å…¸è‚–åƒç•«ï¼ˆä½† Haar Cascade æ•ˆæœæœ‰é™ï¼‰
   - é æœŸï¼šäººè‡‰å¯èƒ½åµæ¸¬åˆ°ï¼Œäº”å®˜è¼ƒé›£
</code></pre>

<h4>ä¸­ç´šæ¸¬è©¦ï¼ˆé›£åº¦ï¼šâ˜…â˜…â˜…â˜†â˜†ï¼‰</h4>
<p><strong>æŒ‘æˆ°å ´æ™¯</strong>ï¼š</p>
<pre class="codehilite"><code>1. æˆ´çœ¼é¡çš„ç…§ç‰‡
   - æ¸¬è©¦ï¼šçœ¼ç›åµæ¸¬æ˜¯å¦æœƒèª¤åˆ¤é¡æ¡†
   - èª¿æ•´ï¼šå¯èƒ½éœ€è¦æé«˜ minNeighbors åƒæ•¸

2. ä¸åŒè¡¨æƒ…çš„ç…§ç‰‡
   - æ­£å¸¸è¡¨æƒ… vs å¾®ç¬‘ vs å¤§ç¬‘
   - è§€å¯Ÿï¼šè¡¨æƒ…å°å˜´å·´åµæ¸¬çš„å½±éŸ¿

3. ä¸åŒå…‰ç·šçš„ç…§ç‰‡
   - æ˜äº®å®¤å…§ vs æ˜æš—å®¤å…§ vs æˆ¶å¤–é™½å…‰
   - è§€å¯Ÿï¼šå…‰ç·šå°äº”å®˜åµæ¸¬çš„å½±éŸ¿

4. è¼•å¾®å´è‡‰ï¼ˆ15Â° å…§ï¼‰
   - æ¸¬è©¦ï¼šæ¼”ç®—æ³•å°è§’åº¦çš„å®¹å¿åº¦
</code></pre>

<h4>é€²éšæ¸¬è©¦ï¼ˆé›£åº¦ï¼šâ˜…â˜…â˜…â˜…â˜†ï¼‰</h4>
<p><strong>é«˜é›£åº¦å ´æ™¯</strong>ï¼š</p>
<pre class="codehilite"><code>1. åœ˜é«”ç…§
   - æŒ‘æˆ°ï¼šå¤šå¼µäººè‡‰ã€ä¸åŒå¤§å°ã€éƒ¨åˆ†å´è‡‰
   - ç›®æ¨™ï¼šå°æ‰€æœ‰åµæ¸¬åˆ°çš„äººè‡‰éƒ½é€²è¡Œè™•ç†

2. å‹•æ…‹æˆ–è¡¨æƒ…èª‡å¼µç…§ç‰‡
   - æŒ‘æˆ°ï¼šäº”å®˜å½¢ç‹€è®ŠåŒ–å¤§
   - è§€å¯Ÿï¼šå“ªäº›æƒ…æ³æœƒå°è‡´åµæ¸¬å¤±æ•—

3. è¤‡é›œèƒŒæ™¯ç…§ç‰‡
   - æŒ‘æˆ°ï¼šèƒŒæ™¯é›œäº‚å¯èƒ½å½±éŸ¿åµæ¸¬
   - æ¸¬è©¦ï¼šæ¼”ç®—æ³•çš„æŠ—å¹²æ“¾èƒ½åŠ›
</code></pre>

<h3>ä¸åŒåµæ¸¬æ¨¡å¼çš„å½±åƒéœ€æ±‚</h3>
<h4>æ¨¡å¼ Aï¼šåªæ¨¡ç³Šçœ¼ç›</h4>
<pre class="codehilite"><code>å½±åƒéœ€æ±‚ï¼š
âœ… çœ¼ç›å®Œå…¨å¼µé–‹
âœ… ç„¡ç€æµ·é®æ“‹
âœ… æ­£é¢æˆ–å¾®å´é¢ï¼ˆ&lt; 15Â°ï¼‰
âœ… çœ¼ç›å€åŸŸå…‰ç·šå……è¶³

ä¸é©åˆï¼š
âŒ é–‰çœ¼ç…§ç‰‡
âŒ æˆ´å¢¨é¡
âŒ åšé‡ç€æµ·é®çœ¼
</code></pre>

<h4>æ¨¡å¼ Bï¼šåªæ¨¡ç³Šå˜´å·´</h4>
<pre class="codehilite"><code>å½±åƒéœ€æ±‚ï¼š
âœ… å˜´å·´æ¸…æ™°å¯è¦‹
âœ… æ­£å¸¸é–‰åˆæˆ–å¾®ç¬‘
âœ… ç„¡å£ç½©æˆ–æ‰‹é®æ“‹
âœ… ä¸‹åŠè‡‰å…‰ç·šå……è¶³

ä¸é©åˆï¼š
âŒ å¤§ç¬‘å¼µå˜´ï¼ˆå˜´å·´å½¢ç‹€å·®ç•°å¤§ï¼‰
âŒ æˆ´å£ç½©
âŒ ä½é ­ï¼ˆä¸‹å·´é®æ“‹å˜´å·´ï¼‰
</code></pre>

<h4>æ¨¡å¼ Cï¼šæ¨¡ç³Šçœ¼ç›å’Œå˜´å·´</h4>
<pre class="codehilite"><code>å½±åƒéœ€æ±‚ï¼š
ç¶œåˆä¸Šè¿°å…©ç¨®æ¨¡å¼çš„è¦æ±‚

æœ€ä½³ç…§ç‰‡ç‰¹å¾µï¼š
âœ… è­‰ä»¶ç…§é¢¨æ ¼
âœ… æ­£é¢ã€çœ¼ç›å¼µé–‹ã€å˜´å·´è‡ªç„¶é–‰åˆ
âœ… ç„¡é®æ“‹ã€å…‰ç·šå‡å‹»
âœ… èƒŒæ™¯ç°¡å–®
</code></pre>

<h3>å½±åƒå“è³ªæª¢æŸ¥æ¸…å–®</h3>
<p>æ¸¬è©¦å‰è«‹ç¢ºèªï¼š<br />
- [ ] å½±åƒæ ¼å¼ï¼šJPGã€PNG<br />
- [ ] è§£æåº¦ï¼šè‡³å°‘ 640Ã—480ï¼ˆå»ºè­° 1024Ã—768ï¼‰<br />
- [ ] äººè‡‰å¤§å°ï¼šè‡³å°‘ 100Ã—100 åƒç´ <br />
- [ ] è‡‰éƒ¨è§’åº¦ï¼šæ­£é¢æˆ–å¾®å´é¢ï¼ˆ&lt; 15Â°ï¼‰<br />
- [ ] äº”å®˜æ¸…æ™°ï¼šçœ¼ç›ã€é¼»å­ã€å˜´å·´å¯è¦‹<br />
- [ ] å…‰ç·šæ¢ä»¶ï¼šæ˜äº®å‡å‹»ã€ç„¡å¼·çƒˆé™°å½±<br />
- [ ] ç„¡é®æ“‹ï¼šä¸æˆ´å¢¨é¡ã€å£ç½©<br />
- [ ] è¡¨æƒ…è‡ªç„¶ï¼šçœ¼ç›å¼µé–‹ã€å˜´å·´é–‰åˆæˆ–å¾®ç¬‘</p>
<hr />
<h2>âœ… è©³ç´°éœ€æ±‚åˆ—è¡¨</h2>
<h3>éœ€æ±‚ 1ï¼šç’°å¢ƒæº–å‚™</h3>
<p><strong>èªªæ˜</strong>ï¼šä¸‹è¼‰æ‰€éœ€çš„æ¨¡å‹æª”æ¡ˆå’Œæ¸¬è©¦åœ–ç‰‡ã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python">import urllib.request
import os

# ä¸‹è¼‰æ‰€éœ€æª”æ¡ˆ
files = {
    'haarcascade_frontalface_default.xml': 'https://raw.githubusercontent.com/opencv/opencv/4.x/data/haarcascades/haarcascade_frontalface_default.xml',
    'haarcascade_eye.xml': 'https://raw.githubusercontent.com/opencv/opencv/4.x/data/haarcascades/haarcascade_eye.xml',
    'haarcascade_mcs_mouth.xml': 'https://raw.githubusercontent.com/atduskgreg/opencv-processing/master/lib/cascade-files/haarcascade_mcs_mouth.xml',
    'girl.jpg': 'https://steam.oxxostudio.tw/down/python/ai/girl.jpg'
}

print(&quot;é–‹å§‹ä¸‹è¼‰å¿…è¦æª”æ¡ˆ...&quot;)
for filename, url in files.items():
    if not os.path.exists(filename):
        print(f&quot;  ä¸‹è¼‰ {filename}...&quot;)
        try:
            urllib.request.urlretrieve(url, filename)
            print(f&quot;  âœ“ {filename} ä¸‹è¼‰å®Œæˆ&quot;)
        except Exception as e:
            print(f&quot;  âœ— {filename} ä¸‹è¼‰å¤±æ•—: {e}&quot;)
    else:
        print(f&quot;  âœ“ {filename} å·²å­˜åœ¨&quot;)

print(&quot;\næ‰€æœ‰æª”æ¡ˆæº–å‚™å®Œæˆï¼&quot;)
</code></pre>

<hr />
<h3>éœ€æ±‚ 2ï¼šåŒ¯å…¥å¥—ä»¶èˆ‡è¨­å®šæ¨¡å¼</h3>
<p><strong>èªªæ˜</strong>ï¼šåŒ¯å…¥å¿…è¦å¥—ä»¶ï¼Œä¸¦å®šç¾©éš±ç§ä¿è­·æ¨¡å¼ã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python">import cv2
import numpy as np
from google.colab.patches import cv2_imshow

# è¨­å®šéš±ç§ä¿è­·æ¨¡å¼
# é¸é …ï¼š&quot;eyes&quot;ï¼ˆåªæ¨¡ç³Šçœ¼ç›ï¼‰
#       &quot;mouth&quot;ï¼ˆåªæ¨¡ç³Šå˜´å·´ï¼‰
#       &quot;eyes_mouth&quot;ï¼ˆæ¨¡ç³Šçœ¼ç›å’Œå˜´å·´ï¼‰
PRIVACY_MODE = &quot;eyes&quot;  # å¯ä¿®æ”¹æ­¤è®Šæ•¸ä¾†æ”¹è®Šæ¨¡å¼

print(&quot;=&quot;*50)
print(f&quot;éš±ç§ä¿è­·ç³»çµ±&quot;)
print(&quot;=&quot;*50)
print(f&quot;ç•¶å‰æ¨¡å¼: {PRIVACY_MODE}&quot;)
print(&quot;=&quot;*50 + &quot;\n&quot;)
</code></pre>

<hr />
<h3>éœ€æ±‚ 3ï¼šè®€å–åœ–ç‰‡èˆ‡è¼‰å…¥æ¨¡å‹</h3>
<p><strong>èªªæ˜</strong>ï¼šè®€å–æ¸¬è©¦åœ–ç‰‡ä¸¦è¼‰å…¥æ‰€éœ€çš„ Haar Cascade æ¨¡å‹ã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># è®€å–åœ–ç‰‡
img = cv2.imread('girl.jpg')

if img is None:
    print(&quot;éŒ¯èª¤: ç„¡æ³•è®€å–åœ–ç‰‡&quot;)
else:
    print(&quot;âœ“ åœ–ç‰‡è®€å–æˆåŠŸ&quot;)
    height, width, channels = img.shape
    print(f&quot;åœ–ç‰‡å°ºå¯¸: {width} x {height} åƒç´ \n&quot;)

    # ä¿å­˜åŸåœ–å‰¯æœ¬ï¼ˆç”¨æ–¼å°æ¯”ï¼‰
    img_original = img.copy()

    # è½‰æ›ç‚ºç°éš
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    print(&quot;âœ“ åœ–ç‰‡å·²è½‰æ›ç‚ºç°éš\n&quot;)

    # è¼‰å…¥æ¨¡å‹
    print(&quot;è¼‰å…¥ Haar Cascade æ¨¡å‹...&quot;)
    face_cascade = cv2.CascadeClassifier('haarcascade_frontalface_default.xml')
    eye_cascade = cv2.CascadeClassifier('haarcascade_eye.xml')
    mouth_cascade = cv2.CascadeClassifier('haarcascade_mcs_mouth.xml')

    # æª¢æŸ¥æ¨¡å‹æ˜¯å¦è¼‰å…¥æˆåŠŸ
    models_ok = True
    if face_cascade.empty():
        print(&quot;  âœ— äººè‡‰æ¨¡å‹è¼‰å…¥å¤±æ•—&quot;)
        models_ok = False
    else:
        print(&quot;  âœ“ äººè‡‰æ¨¡å‹è¼‰å…¥æˆåŠŸ&quot;)

    if eye_cascade.empty():
        print(&quot;  âœ— çœ¼ç›æ¨¡å‹è¼‰å…¥å¤±æ•—&quot;)
        models_ok = False
    else:
        print(&quot;  âœ“ çœ¼ç›æ¨¡å‹è¼‰å…¥æˆåŠŸ&quot;)

    if mouth_cascade.empty():
        print(&quot;  âœ— å˜´å·´æ¨¡å‹è¼‰å…¥å¤±æ•—&quot;)
        models_ok = False
    else:
        print(&quot;  âœ“ å˜´å·´æ¨¡å‹è¼‰å…¥æˆåŠŸ&quot;)

    if models_ok:
        print(&quot;\nâœ“ æ‰€æœ‰æ¨¡å‹è¼‰å…¥å®Œæˆ\n&quot;)
</code></pre>

<hr />
<h3>éœ€æ±‚ 4ï¼šå®šç¾©é¦¬è³½å…‹è™•ç†å‡½æ•¸</h3>
<p><strong>èªªæ˜</strong>ï¼šå»ºç«‹ä¸€å€‹å¯é‡è¤‡ä½¿ç”¨çš„é¦¬è³½å…‹è™•ç†å‡½æ•¸ã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python">def apply_mosaic(image, x, y, w, h, level=15):
    &quot;&quot;&quot;
    å°åœ–ç‰‡çš„æŒ‡å®šå€åŸŸé€²è¡Œé¦¬è³½å…‹è™•ç†

    åƒæ•¸:
        image: è¼¸å…¥åœ–ç‰‡ï¼ˆæœƒç›´æ¥ä¿®æ”¹ï¼‰
        x, y: å€åŸŸå·¦ä¸Šè§’åº§æ¨™
        w, h: å€åŸŸå¯¬åº¦å’Œé«˜åº¦
        level: é¦¬è³½å…‹ç¨‹åº¦ï¼ˆæ•¸å€¼è¶Šå°è¶Šæ¨¡ç³Šï¼Œå»ºè­° 5-30ï¼‰

    è¿”å›:
        image: è™•ç†å¾Œçš„åœ–ç‰‡
    &quot;&quot;&quot;
    # ç¢ºä¿åº§æ¨™åœ¨åœ–ç‰‡ç¯„åœå…§
    img_h, img_w = image.shape[:2]
    x = max(0, min(x, img_w - 1))
    y = max(0, min(y, img_h - 1))
    w = max(1, min(w, img_w - x))
    h = max(1, min(h, img_h - y))

    # ç¢ºä¿å€åŸŸæœ‰æ•ˆ
    if w &lt;= 0 or h &lt;= 0:
        return image

    # æ“·å–å€åŸŸ
    region = image[y:y+h, x:x+w].copy()

    # ç¢ºä¿å€åŸŸä¸ç‚ºç©º
    if region.size == 0:
        return image

    # è¨ˆç®—ç¸®å°å¾Œçš„å°ºå¯¸ï¼ˆè‡³å°‘ç‚º 1ï¼‰
    small_h = max(1, h // level)
    small_w = max(1, w // level)

    try:
        # ç¸®å°åœ–ç‰‡ï¼ˆç”¢ç”Ÿæ¨¡ç³Šæ•ˆæœï¼‰
        region_small = cv2.resize(region, (small_w, small_h),
                                  interpolation=cv2.INTER_LINEAR)

        # æ”¾å¤§å›åŸå°ºå¯¸ï¼ˆç”¢ç”Ÿé¦¬è³½å…‹æ•ˆæœï¼‰
        region_mosaic = cv2.resize(region_small, (w, h),
                                   interpolation=cv2.INTER_NEAREST)

        # å°‡é¦¬è³½å…‹å€åŸŸæ”¾å›åŸåœ–
        image[y:y+h, x:x+w] = region_mosaic
    except Exception as e:
        print(f&quot;  âš ï¸ é¦¬è³½å…‹è™•ç†å¤±æ•— ({x},{y},{w},{h}): {e}&quot;)

    return image

# æ¸¬è©¦å‡½æ•¸å®šç¾©
print(&quot;âœ“ é¦¬è³½å…‹è™•ç†å‡½æ•¸å®šç¾©å®Œæˆ\n&quot;)
</code></pre>

<hr />
<h3>éœ€æ±‚ 5ï¼šåµæ¸¬äººè‡‰</h3>
<p><strong>èªªæ˜</strong>ï¼šåµæ¸¬åœ–ç‰‡ä¸­çš„æ‰€æœ‰äººè‡‰ã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># åµæ¸¬äººè‡‰
print(&quot;=&quot;*50)
print(&quot;é–‹å§‹åµæ¸¬äººè‡‰&quot;)
print(&quot;=&quot;*50)

faces = face_cascade.detectMultiScale(
    gray,
    scaleFactor=1.1,
    minNeighbors=5,
    minSize=(50, 50)
)

print(f&quot;åµæ¸¬çµæœ: æ‰¾åˆ° {len(faces)} å¼µäººè‡‰&quot;)

# è‹¥æ²’æœ‰åµæ¸¬åˆ°äººè‡‰ï¼Œé¡¯ç¤ºè­¦å‘Š
if len(faces) == 0:
    print(&quot;\nâš ï¸ è­¦å‘Š: æœªåµæ¸¬åˆ°äººè‡‰&quot;)
    print(&quot;å¯èƒ½åŸå› :&quot;)
    print(&quot;  1. åœ–ç‰‡ä¸­æ²’æœ‰æ­£é¢äººè‡‰&quot;)
    print(&quot;  2. äººè‡‰éå°æˆ–éå¤§&quot;)
    print(&quot;  3. å…‰ç·šæ¢ä»¶ä¸ä½³&quot;)
    print(&quot;  4. è«‹å˜—è©¦èª¿æ•´åƒæ•¸æˆ–æ›´æ›åœ–ç‰‡&quot;)
else:
    # é¡¯ç¤ºæ¯å¼µäººè‡‰çš„ä½ç½®
    for i, (x, y, w, h) in enumerate(faces, start=1):
        print(f&quot;  äººè‡‰ {i}: ä½ç½®({x}, {y}), å¤§å°({w}x{h})&quot;)

print(&quot;&quot;)
</code></pre>

<hr />
<h3>éœ€æ±‚ 6ï¼šåœ¨äººè‡‰å€åŸŸå…§åµæ¸¬äº”å®˜ä¸¦é€²è¡Œé¦¬è³½å…‹è™•ç†</h3>
<p><strong>èªªæ˜</strong>ï¼šé‡å°æ¯å¼µäººè‡‰ï¼Œåµæ¸¬äº”å®˜ä¸¦æ ¹æ“šæ¨¡å¼é€²è¡Œè™•ç†ã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># çµ±è¨ˆè®Šæ•¸
total_eyes_detected = 0
total_mouths_detected = 0
total_eyes_mosaicked = 0
total_mouths_mosaicked = 0

# éæ­·æ¯å¼µåµæ¸¬åˆ°çš„äººè‡‰
for face_idx, (fx, fy, fw, fh) in enumerate(faces, start=1):
    print(&quot;=&quot;*50)
    print(f&quot;è™•ç†äººè‡‰ {face_idx}/{len(faces)}&quot;)
    print(&quot;=&quot;*50)

    # æ“·å–äººè‡‰å€åŸŸï¼ˆROI: Region of Interestï¼‰
    face_roi_gray = gray[fy:fy+fh, fx:fx+fw]
    face_roi_color = img[fy:fy+fh, fx:fx+fw]

    # === é¸é … 1: è™•ç†çœ¼ç› ===
    if PRIVACY_MODE in [&quot;eyes&quot;, &quot;eyes_mouth&quot;]:
        print(&quot;åµæ¸¬çœ¼ç›...&quot;)

        # åœ¨äººè‡‰å€åŸŸå…§åµæ¸¬çœ¼ç›
        eyes = eye_cascade.detectMultiScale(
            face_roi_gray,
            scaleFactor=1.1,
            minNeighbors=10,  # è¼ƒé«˜çš„å€¼ä»¥æ¸›å°‘èª¤åˆ¤
            minSize=(20, 20)
        )

        print(f&quot;  æ‰¾åˆ° {len(eyes)} å€‹çœ¼ç›å€åŸŸ&quot;)
        total_eyes_detected += len(eyes)

        # å°æ¯å€‹çœ¼ç›å€åŸŸé€²è¡Œé¦¬è³½å…‹è™•ç†
        for eye_idx, (ex, ey, ew, eh) in enumerate(eyes, start=1):
            # é‡è¦ï¼šè½‰æ›ç‚ºåŸåœ–çš„çµ•å°åº§æ¨™
            # å…¬å¼ï¼šçµ•å°åº§æ¨™ = äººè‡‰åº§æ¨™ + ROI å…§ç›¸å°åº§æ¨™
            abs_x = fx + ex
            abs_y = fy + ey

            # é€²è¡Œé¦¬è³½å…‹è™•ç†
            apply_mosaic(img, abs_x, abs_y, ew, eh, level=10)
            total_eyes_mosaicked += 1

            print(f&quot;    çœ¼ç› {eye_idx}: ä½ç½®({abs_x}, {abs_y}), å·²é¦¬è³½å…‹&quot;)

    # === é¸é … 2: è™•ç†å˜´å·´ ===
    if PRIVACY_MODE in [&quot;mouth&quot;, &quot;eyes_mouth&quot;]:
        print(&quot;åµæ¸¬å˜´å·´...&quot;)

        # åœ¨äººè‡‰å€åŸŸçš„ä¸‹åŠéƒ¨åµæ¸¬å˜´å·´ï¼ˆæé«˜æº–ç¢ºåº¦ï¼‰
        # å˜´å·´é€šå¸¸ä½æ–¼äººè‡‰ä¸‹åŠéƒ¨
        mouth_roi_start = fh // 2  # å¾äººè‡‰ä¸­é–“é–‹å§‹
        mouth_roi_gray = face_roi_gray[mouth_roi_start:, :]

        mouths = mouth_cascade.detectMultiScale(
            mouth_roi_gray,
            scaleFactor=1.1,
            minNeighbors=20,  # å˜´å·´åµæ¸¬éœ€è¦æ›´é«˜çš„é–¾å€¼
            minSize=(30, 20)
        )

        print(f&quot;  æ‰¾åˆ° {len(mouths)} å€‹å˜´å·´å€åŸŸ&quot;)
        total_mouths_detected += len(mouths)

        # å°æ¯å€‹å˜´å·´å€åŸŸé€²è¡Œé¦¬è³½å…‹è™•ç†
        for mouth_idx, (mx, my, mw, mh) in enumerate(mouths, start=1):
            # é‡è¦ï¼šè½‰æ›ç‚ºåŸåœ–çš„çµ•å°åº§æ¨™
            # æ³¨æ„ï¼šmy éœ€è¦åŠ ä¸Š mouth_roi_startï¼ˆå› ç‚ºæ˜¯åœ¨ä¸‹åŠéƒ¨åµæ¸¬ï¼‰
            abs_x = fx + mx
            abs_y = fy + mouth_roi_start + my

            # é€²è¡Œé¦¬è³½å…‹è™•ç†
            apply_mosaic(img, abs_x, abs_y, mw, mh, level=12)
            total_mouths_mosaicked += 1

            print(f&quot;    å˜´å·´ {mouth_idx}: ä½ç½®({abs_x}, {abs_y}), å·²é¦¬è³½å…‹&quot;)

    print(f&quot;âœ“ äººè‡‰ {face_idx} è™•ç†å®Œæˆ\n&quot;)
</code></pre>

<p><strong>åº§æ¨™è½‰æ›èªªæ˜</strong>ï¼š</p>
<pre class="codehilite"><code>é‡è¦æ¦‚å¿µï¼šROI ç›¸å°åº§æ¨™ â†’ çµ•å°åº§æ¨™

å‡è¨­ï¼š
- äººè‡‰ä½ç½®ï¼šfx=100, fy=80, fw=200, fh=200
- åœ¨äººè‡‰ ROI å…§åµæ¸¬åˆ°çœ¼ç›ï¼šex=50, ey=40

å‰‡çœ¼ç›åœ¨åŸåœ–ä¸­çš„çµ•å°åº§æ¨™ç‚ºï¼š
- abs_x = fx + ex = 100 + 50 = 150
- abs_y = fy + ey = 80 + 40 = 120

è‹¥æ˜¯åœ¨äººè‡‰ä¸‹åŠéƒ¨åµæ¸¬å˜´å·´ï¼š
- mouth_roi_start = fh // 2 = 100
- åµæ¸¬åˆ°å˜´å·´ï¼šmx=60, my=50
- abs_x = fx + mx = 100 + 60 = 160
- abs_y = fy + mouth_roi_start + my = 80 + 100 + 50 = 230
</code></pre>

<hr />
<h3>éœ€æ±‚ 7ï¼šé¡¯ç¤ºè™•ç†çµæœèˆ‡çµ±è¨ˆ</h3>
<p><strong>èªªæ˜</strong>ï¼šé¡¯ç¤ºè™•ç†å‰å¾Œå°æ¯”ï¼Œä¸¦è¼¸å‡ºçµ±è¨ˆè³‡è¨Šã€‚</p>
<p><strong>ç¨‹å¼ç¢¼æç¤º</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># é¡¯ç¤ºçµ±è¨ˆçµæœ
print(&quot;=&quot;*50)
print(&quot;è™•ç†çµ±è¨ˆ&quot;)
print(&quot;=&quot;*50)
print(f&quot;åµæ¸¬åˆ°çš„äººè‡‰æ•¸é‡: {len(faces)}&quot;)
if PRIVACY_MODE in [&quot;eyes&quot;, &quot;eyes_mouth&quot;]:
    print(f&quot;åµæ¸¬åˆ°çš„çœ¼ç›æ•¸é‡: {total_eyes_detected}&quot;)
    print(f&quot;å·²é¦¬è³½å…‹çš„çœ¼ç›: {total_eyes_mosaicked}&quot;)
if PRIVACY_MODE in [&quot;mouth&quot;, &quot;eyes_mouth&quot;]:
    print(f&quot;åµæ¸¬åˆ°çš„å˜´å·´æ•¸é‡: {total_mouths_detected}&quot;)
    print(f&quot;å·²é¦¬è³½å…‹çš„å˜´å·´: {total_mouths_mosaicked}&quot;)
print(&quot;=&quot;*50 + &quot;\n&quot;)

# é¡¯ç¤ºè™•ç†å‰å¾Œå°æ¯”
print(&quot;åŸå§‹åœ–ç‰‡ï¼š&quot;)
cv2_imshow(img_original)

print(f&quot;\nè™•ç†å¾Œåœ–ç‰‡ (æ¨¡å¼: {PRIVACY_MODE})ï¼š&quot;)
cv2_imshow(img)

# å„²å­˜çµæœ
output_filename = f'result_privacy_{PRIVACY_MODE}.jpg'
cv2.imwrite(output_filename, img)
print(f&quot;\nâœ“ çµæœå·²å„²å­˜ç‚º {output_filename}&quot;)
</code></pre>

<hr />
<h2>ğŸ“ å®Œæ•´å¯åŸ·è¡Œç¨‹å¼ç¢¼</h2>
<pre class="codehilite"><code class="language-python"># ========================================
# é¡Œç›®ä¸‰ï¼šæ™ºæ…§å‹éš±ç§ä¿è­·ç³»çµ±
# ========================================

import cv2
import numpy as np
from google.colab.patches import cv2_imshow

# === 1. è¨­å®šæ¨¡å¼ ===
PRIVACY_MODE = &quot;eyes&quot;  # &quot;eyes&quot;, &quot;mouth&quot;, &quot;eyes_mouth&quot;

print(&quot;=&quot;*50)
print(&quot;æ™ºæ…§å‹éš±ç§ä¿è­·ç³»çµ±&quot;)
print(&quot;=&quot;*50)
print(f&quot;ç•¶å‰æ¨¡å¼: {PRIVACY_MODE}&quot;)
print(&quot;=&quot;*50 + &quot;\n&quot;)

# === 2. è®€å–åœ–ç‰‡ ===
img = cv2.imread('girl.jpg')

if img is None:
    print(&quot;éŒ¯èª¤: ç„¡æ³•è®€å–åœ–ç‰‡&quot;)
else:
    print(&quot;âœ“ åœ–ç‰‡è®€å–æˆåŠŸ&quot;)
    height, width = img.shape[:2]
    print(f&quot;åœ–ç‰‡å°ºå¯¸: {width} x {height} åƒç´ \n&quot;)

    # ä¿å­˜åŸåœ–å‰¯æœ¬
    img_original = img.copy()

    # è½‰æ›ç‚ºç°éš
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
    print(&quot;âœ“ åœ–ç‰‡å·²è½‰æ›ç‚ºç°éš\n&quot;)

    # === 3. è¼‰å…¥æ¨¡å‹ ===
    print(&quot;è¼‰å…¥ Haar Cascade æ¨¡å‹...&quot;)
    face_cascade = cv2.CascadeClassifier('haarcascade_frontalface_default.xml')
    eye_cascade = cv2.CascadeClassifier('haarcascade_eye.xml')
    mouth_cascade = cv2.CascadeClassifier('haarcascade_mcs_mouth.xml')

    if not face_cascade.empty() and not eye_cascade.empty() and not mouth_cascade.empty():
        print(&quot;âœ“ æ‰€æœ‰æ¨¡å‹è¼‰å…¥å®Œæˆ\n&quot;)
    else:
        print(&quot;âœ— éƒ¨åˆ†æ¨¡å‹è¼‰å…¥å¤±æ•—&quot;)

    # === 4. å®šç¾©é¦¬è³½å…‹å‡½æ•¸ ===
    def apply_mosaic(image, x, y, w, h, level=15):
        &quot;&quot;&quot;å°æŒ‡å®šå€åŸŸé€²è¡Œé¦¬è³½å…‹è™•ç†&quot;&quot;&quot;
        img_h, img_w = image.shape[:2]
        x = max(0, min(x, img_w - 1))
        y = max(0, min(y, img_h - 1))
        w = max(1, min(w, img_w - x))
        h = max(1, min(h, img_h - y))

        if w &lt;= 0 or h &lt;= 0:
            return image

        region = image[y:y+h, x:x+w].copy()

        if region.size == 0:
            return image

        small_h = max(1, h // level)
        small_w = max(1, w // level)

        try:
            region_small = cv2.resize(region, (small_w, small_h),
                                      interpolation=cv2.INTER_LINEAR)
            region_mosaic = cv2.resize(region_small, (w, h),
                                       interpolation=cv2.INTER_NEAREST)
            image[y:y+h, x:x+w] = region_mosaic
        except Exception as e:
            print(f&quot;  âš ï¸ é¦¬è³½å…‹è™•ç†å¤±æ•—: {e}&quot;)

        return image

    print(&quot;âœ“ é¦¬è³½å…‹è™•ç†å‡½æ•¸å®šç¾©å®Œæˆ\n&quot;)

    # === 5. åµæ¸¬äººè‡‰ ===
    print(&quot;=&quot;*50)
    print(&quot;é–‹å§‹åµæ¸¬äººè‡‰&quot;)
    print(&quot;=&quot;*50)

    faces = face_cascade.detectMultiScale(
        gray,
        scaleFactor=1.1,
        minNeighbors=5,
        minSize=(50, 50)
    )

    print(f&quot;åµæ¸¬çµæœ: æ‰¾åˆ° {len(faces)} å¼µäººè‡‰\n&quot;)

    if len(faces) == 0:
        print(&quot;âš ï¸ æœªåµæ¸¬åˆ°äººè‡‰ï¼Œè«‹æª¢æŸ¥åœ–ç‰‡æˆ–èª¿æ•´åƒæ•¸\n&quot;)

    # === 6. è™•ç†äº”å®˜ ===
    total_eyes_mosaicked = 0
    total_mouths_mosaicked = 0

    for face_idx, (fx, fy, fw, fh) in enumerate(faces, start=1):
        print(f&quot;è™•ç†äººè‡‰ {face_idx}/{len(faces)}&quot;)

        face_roi_gray = gray[fy:fy+fh, fx:fx+fw]

        # è™•ç†çœ¼ç›
        if PRIVACY_MODE in [&quot;eyes&quot;, &quot;eyes_mouth&quot;]:
            print(&quot;  åµæ¸¬çœ¼ç›...&quot;)
            eyes = eye_cascade.detectMultiScale(
                face_roi_gray,
                scaleFactor=1.1,
                minNeighbors=10,
                minSize=(20, 20)
            )

            print(f&quot;    æ‰¾åˆ° {len(eyes)} å€‹çœ¼ç›å€åŸŸ&quot;)

            for (ex, ey, ew, eh) in eyes:
                abs_x = fx + ex
                abs_y = fy + ey
                apply_mosaic(img, abs_x, abs_y, ew, eh, level=10)
                total_eyes_mosaicked += 1

        # è™•ç†å˜´å·´
        if PRIVACY_MODE in [&quot;mouth&quot;, &quot;eyes_mouth&quot;]:
            print(&quot;  åµæ¸¬å˜´å·´...&quot;)
            mouth_roi_start = fh // 2
            mouth_roi_gray = face_roi_gray[mouth_roi_start:, :]

            mouths = mouth_cascade.detectMultiScale(
                mouth_roi_gray,
                scaleFactor=1.1,
                minNeighbors=20,
                minSize=(30, 20)
            )

            print(f&quot;    æ‰¾åˆ° {len(mouths)} å€‹å˜´å·´å€åŸŸ&quot;)

            for (mx, my, mw, mh) in mouths:
                abs_x = fx + mx
                abs_y = fy + mouth_roi_start + my
                apply_mosaic(img, abs_x, abs_y, mw, mh, level=12)
                total_mouths_mosaicked += 1

        print(f&quot;  âœ“ äººè‡‰ {face_idx} è™•ç†å®Œæˆ\n&quot;)

    # === 7. é¡¯ç¤ºçµæœ ===
    print(&quot;=&quot;*50)
    print(&quot;è™•ç†çµ±è¨ˆ&quot;)
    print(&quot;=&quot;*50)
    print(f&quot;åµæ¸¬åˆ°çš„äººè‡‰æ•¸é‡: {len(faces)}&quot;)
    if PRIVACY_MODE in [&quot;eyes&quot;, &quot;eyes_mouth&quot;]:
        print(f&quot;å·²é¦¬è³½å…‹çš„çœ¼ç›: {total_eyes_mosaicked}&quot;)
    if PRIVACY_MODE in [&quot;mouth&quot;, &quot;eyes_mouth&quot;]:
        print(f&quot;å·²é¦¬è³½å…‹çš„å˜´å·´: {total_mouths_mosaicked}&quot;)
    print(&quot;=&quot;*50 + &quot;\n&quot;)

    print(&quot;åŸå§‹åœ–ç‰‡ï¼š&quot;)
    cv2_imshow(img_original)

    print(f&quot;\nè™•ç†å¾Œåœ–ç‰‡ (æ¨¡å¼: {PRIVACY_MODE})ï¼š&quot;)
    cv2_imshow(img)

    # å„²å­˜çµæœ
    output_filename = f'result_privacy_{PRIVACY_MODE}.jpg'
    cv2.imwrite(output_filename, img)
    print(f&quot;\nâœ“ çµæœå·²å„²å­˜ç‚º {output_filename}&quot;)
</code></pre>

<hr />
<h2>ğŸ¯ æ¸¬è©¦å»ºè­°</h2>
<h3>æ¸¬è©¦ 1ï¼šä¸åŒæ¨¡å¼æ¸¬è©¦</h3>
<pre class="codehilite"><code class="language-python"># åˆ†åˆ¥æ¸¬è©¦ä¸‰ç¨®æ¨¡å¼
modes = [&quot;eyes&quot;, &quot;mouth&quot;, &quot;eyes_mouth&quot;]

for mode in modes:
    print(f&quot;\n{'='*50}&quot;)
    print(f&quot;æ¸¬è©¦æ¨¡å¼: {mode}&quot;)
    print(f&quot;{'='*50}&quot;)

    PRIVACY_MODE = mode
    img = cv2.imread('girl.jpg').copy()

    # ... åŸ·è¡Œå®Œæ•´è™•ç†æµç¨‹ ...

    cv2.imwrite(f'result_{mode}.jpg', img)
    print(f&quot;âœ“ æ¨¡å¼ {mode} æ¸¬è©¦å®Œæˆ&quot;)
</code></pre>

<h3>æ¸¬è©¦ 2ï¼šèª¿æ•´é¦¬è³½å…‹ç¨‹åº¦</h3>
<pre class="codehilite"><code class="language-python"># æ¸¬è©¦ä¸åŒçš„ level å€¼
levels = [5, 10, 15, 20, 30]

for level in levels:
    img = cv2.imread('girl.jpg').copy()

    # ... åµæ¸¬æµç¨‹ ...

    # ä½¿ç”¨ä¸åŒçš„ level
    apply_mosaic(img, abs_x, abs_y, ew, eh, level=level)

    cv2.imwrite(f'result_level{level}.jpg', img)
    print(f&quot;Level {level}: é¦¬è³½å…‹ç¨‹åº¦ {'ç²—' if level &lt; 10 else 'ç´°'}&quot;)
</code></pre>

<h3>æ¸¬è©¦ 3ï¼šèª¿æ•´äº”å®˜åµæ¸¬åƒæ•¸</h3>
<pre class="codehilite"><code class="language-python"># æ¸¬è©¦çœ¼ç›åµæ¸¬çš„ä¸åŒ minNeighbors å€¼
min_neighbors_values = [5, 10, 15, 20]

for mn in min_neighbors_values:
    eyes = eye_cascade.detectMultiScale(
        face_roi_gray,
        scaleFactor=1.1,
        minNeighbors=mn,
        minSize=(20, 20)
    )

    print(f&quot;minNeighbors={mn}: åµæ¸¬åˆ° {len(eyes)} å€‹çœ¼ç›&quot;)
</code></pre>

<hr />
<h2>ğŸš€ å»¶ä¼¸æŒ‘æˆ°ï¼ˆé¸åšï¼‰</h2>
<h3>æŒ‘æˆ° 1ï¼šåŠ å…¥ä½¿ç”¨è€…äº’å‹•</h3>
<pre class="codehilite"><code class="language-python"># è®“ä½¿ç”¨è€…é¸æ“‡æ¨¡å¼
print(&quot;è«‹é¸æ“‡éš±ç§ä¿è­·æ¨¡å¼ï¼š&quot;)
print(&quot;1. åªæ¨¡ç³Šçœ¼ç›&quot;)
print(&quot;2. åªæ¨¡ç³Šå˜´å·´&quot;)
print(&quot;3. æ¨¡ç³Šçœ¼ç›å’Œå˜´å·´&quot;)

choice = input(&quot;è«‹è¼¸å…¥é¸é … (1/2/3): &quot;)

mode_map = {
    &quot;1&quot;: &quot;eyes&quot;,
    &quot;2&quot;: &quot;mouth&quot;,
    &quot;3&quot;: &quot;eyes_mouth&quot;
}

PRIVACY_MODE = mode_map.get(choice, &quot;eyes&quot;)
print(f&quot;\nå·²é¸æ“‡æ¨¡å¼: {PRIVACY_MODE}\n&quot;)
</code></pre>

<h3>æŒ‘æˆ° 2ï¼šæ”¯æ´é«˜æ–¯æ¨¡ç³Šæ•ˆæœ</h3>
<pre class="codehilite"><code class="language-python">def apply_blur(image, x, y, w, h, blur_level=21):
    &quot;&quot;&quot;ä½¿ç”¨é«˜æ–¯æ¨¡ç³Šä»£æ›¿é¦¬è³½å…‹&quot;&quot;&quot;
    img_h, img_w = image.shape[:2]
    x = max(0, min(x, img_w - 1))
    y = max(0, min(y, img_h - 1))
    w = max(1, min(w, img_w - x))
    h = max(1, min(h, img_h - y))

    if w &lt;= 0 or h &lt;= 0:
        return image

    region = image[y:y+h, x:x+w].copy()

    # ç¢ºä¿ blur_level ç‚ºå¥‡æ•¸
    if blur_level % 2 == 0:
        blur_level += 1

    # å¥—ç”¨é«˜æ–¯æ¨¡ç³Š
    blurred = cv2.GaussianBlur(region, (blur_level, blur_level), 0)
    image[y:y+h, x:x+w] = blurred

    return image

# ä½¿ç”¨æ–¹å¼
apply_blur(img, abs_x, abs_y, ew, eh, blur_level=25)
</code></pre>

<h3>æŒ‘æˆ° 3ï¼šåŠ å…¥é»‘è‰²é®ç½©é¸é …</h3>
<pre class="codehilite"><code class="language-python">def apply_black_bar(image, x, y, w, h):
    &quot;&quot;&quot;ä½¿ç”¨ç´”é»‘çŸ©å½¢é®è“‹ï¼ˆé¡ä¼¼é›»è¦–æ–°èæ•ˆæœï¼‰&quot;&quot;&quot;
    img_h, img_w = image.shape[:2]
    x = max(0, min(x, img_w - 1))
    y = max(0, min(y, img_h - 1))
    w = max(1, min(w, img_w - x))
    h = max(1, min(h, img_h - y))

    # ç¹ªè£½é»‘è‰²çŸ©å½¢
    cv2.rectangle(image, (x, y), (x+w, y+h), (0, 0, 0), -1)

    return image

# ä½¿ç”¨æ–¹å¼
apply_black_bar(img, abs_x, abs_y, ew, eh)
</code></pre>

<h3>æŒ‘æˆ° 4ï¼šè™•ç†å¤šäººç…§ç‰‡ä¸¦é¡¯ç¤ºçµ±è¨ˆ</h3>
<pre class="codehilite"><code class="language-python"># åœ¨åœ–ç‰‡ä¸Šé¡¯ç¤ºè™•ç†è³‡è¨Š
info_text = [
    f&quot;Mode: {PRIVACY_MODE}&quot;,
    f&quot;Faces: {len(faces)}&quot;,
    f&quot;Eyes blurred: {total_eyes_mosaicked}&quot;,
    f&quot;Mouths blurred: {total_mouths_mosaicked}&quot;
]

y_offset = 30
for i, text in enumerate(info_text):
    cv2.putText(
        img,
        text,
        (10, y_offset + i*30),
        cv2.FONT_HERSHEY_SIMPLEX,
        0.7,
        (0, 255, 0),
        2
    )
</code></pre>

<hr />
<h2>ğŸ”§ é™¤éŒ¯æŠ€å·§</h2>
<h3>å•é¡Œ 1ï¼šçœ¼ç›æˆ–å˜´å·´åµæ¸¬ä¸åˆ°</h3>
<p><strong>è¨ºæ–·å·¥å…·</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># è¦–è¦ºåŒ–äººè‡‰ ROIï¼Œæª¢æŸ¥æ˜¯å¦æ­£ç¢º
face_roi_display = img[fy:fy+fh, fx:fx+fw].copy()
print(&quot;äººè‡‰å€åŸŸï¼š&quot;)
cv2_imshow(face_roi_display)

# é¡¯ç¤ºåµæ¸¬åƒæ•¸
print(f&quot;äººè‡‰å¤§å°: {fw}x{fh}&quot;)
print(f&quot;çœ¼ç›æœ€å°å°ºå¯¸: 20x20&quot;)
print(f&quot;å˜´å·´æœ€å°å°ºå¯¸: 30x20&quot;)

# å¦‚æœäººè‡‰å¤ªå°ï¼Œäº”å®˜å¯èƒ½ä¹Ÿæœƒå¤ªå°
if fw &lt; 100 or fh &lt; 100:
    print(&quot;âš ï¸ è­¦å‘Š: äººè‡‰éå°ï¼Œäº”å®˜åµæ¸¬å¯èƒ½å¤±æ•—&quot;)
</code></pre>

<p><strong>è§£æ±ºæ–¹æ³•</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># æ–¹æ³• 1ï¼šé™ä½ minNeighbors
eyes = eye_cascade.detectMultiScale(
    face_roi_gray,
    scaleFactor=1.1,
    minNeighbors=5,  # å¾ 10 é™ä½åˆ° 5
    minSize=(20, 20)
)

# æ–¹æ³• 2ï¼šé™ä½æœ€å°å°ºå¯¸
eyes = eye_cascade.detectMultiScale(
    face_roi_gray,
    scaleFactor=1.1,
    minNeighbors=10,
    minSize=(15, 15)  # å¾ 20x20 é™ä½åˆ° 15x15
)

# æ–¹æ³• 3ï¼šèª¿æ•´ scaleFactor
eyes = eye_cascade.detectMultiScale(
    face_roi_gray,
    scaleFactor=1.05,  # å¾ 1.1 é™ä½åˆ° 1.05ï¼ˆæ›´ç²¾ç´°ï¼‰
    minNeighbors=10,
    minSize=(20, 20)
)
</code></pre>

<h3>å•é¡Œ 2ï¼šçœ¼ç›åµæ¸¬åˆ°éå¤šå€åŸŸï¼ˆèª¤åˆ¤ï¼‰</h3>
<p><strong>åŸå› </strong>ï¼šé¼»å­ã€çœ¼é¡æ¡†ç­‰è¢«èª¤åˆ¤ç‚ºçœ¼ç›</p>
<p><strong>è§£æ±ºæ–¹æ³•</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># æ–¹æ³• 1ï¼šæé«˜ minNeighbors
eyes = eye_cascade.detectMultiScale(
    face_roi_gray,
    scaleFactor=1.1,
    minNeighbors=15,  # æé«˜åˆ° 15 æˆ– 20
    minSize=(20, 20)
)

# æ–¹æ³• 2ï¼šéæ¿¾ä¸åˆç†çš„çœ¼ç›ä½ç½®
# çœ¼ç›é€šå¸¸åœ¨äººè‡‰ä¸ŠåŠéƒ¨
valid_eyes = []
for (ex, ey, ew, eh) in eyes:
    # åªä¿ç•™åœ¨äººè‡‰ä¸ŠåŠéƒ¨çš„åµæ¸¬çµæœ
    if ey &lt; fh * 0.6:  # çœ¼ç›æ‡‰è©²åœ¨äººè‡‰ä¸Šæ–¹ 60% ç¯„åœå…§
        valid_eyes.append((ex, ey, ew, eh))

eyes = valid_eyes

# æ–¹æ³• 3ï¼šéæ¿¾ä¸åˆç†çš„å¤§å°
valid_eyes = []
for (ex, ey, ew, eh) in eyes:
    # çœ¼ç›å¤§å°æ‡‰è©²åˆç†ï¼ˆä¸æœƒå¤ªå¤§æˆ–å¤ªå°ï¼‰
    area = ew * eh
    face_area = fw * fh
    ratio = area / face_area

    if 0.01 &lt; ratio &lt; 0.15:  # çœ¼ç›ä½”äººè‡‰ 1%-15%
        valid_eyes.append((ex, ey, ew, eh))

eyes = valid_eyes
</code></pre>

<h3>å•é¡Œ 3ï¼šå˜´å·´åµæ¸¬å¤±æ•—</h3>
<p><strong>è¨ºæ–·</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># æª¢æŸ¥å˜´å·´æœå°‹å€åŸŸ
mouth_roi_start = fh // 2
mouth_roi_display = face_roi_gray[mouth_roi_start:, :]

print(&quot;å˜´å·´æœå°‹å€åŸŸï¼ˆç°éšï¼‰ï¼š&quot;)
cv2_imshow(mouth_roi_display)

print(f&quot;æœå°‹å€åŸŸå¤§å°: {mouth_roi_display.shape[1]}x{mouth_roi_display.shape[0]}&quot;)
</code></pre>

<p><strong>è§£æ±ºæ–¹æ³•</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># æ–¹æ³• 1ï¼šæ“´å¤§æœå°‹ç¯„åœ
mouth_roi_start = fh // 3  # å¾äººè‡‰ 1/3 è™•é–‹å§‹ï¼ˆè€Œé 1/2ï¼‰

# æ–¹æ³• 2ï¼šé™ä½ minNeighbors
mouths = mouth_cascade.detectMultiScale(
    mouth_roi_gray,
    scaleFactor=1.1,
    minNeighbors=10,  # å¾ 20 é™ä½åˆ° 10
    minSize=(30, 20)
)

# æ–¹æ³• 3ï¼šèª¿æ•´æœ€å°å°ºå¯¸
mouths = mouth_cascade.detectMultiScale(
    mouth_roi_gray,
    scaleFactor=1.1,
    minNeighbors=20,
    minSize=(25, 15)  # é™ä½æœ€å°å°ºå¯¸
)
</code></pre>

<h3>å•é¡Œ 4ï¼šé¦¬è³½å…‹ä½ç½®ä¸æ­£ç¢º</h3>
<p><strong>åŸå› </strong>ï¼šåº§æ¨™è½‰æ›éŒ¯èª¤</p>
<p><strong>æª¢æŸ¥</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># åœ¨å¥—ç”¨é¦¬è³½å…‹å‰ï¼Œå…ˆç¹ªè£½æ¡†ç·šæª¢æŸ¥ä½ç½®
for (ex, ey, ew, eh) in eyes:
    abs_x = fx + ex
    abs_y = fy + ey

    # å…ˆç¹ªè£½ç´…è‰²æ¡†ç·šæª¢æŸ¥ä½ç½®
    cv2.rectangle(img, (abs_x, abs_y), (abs_x+ew, abs_y+eh), (0, 0, 255), 2)

print(&quot;æª¢æŸ¥æ¨™è¨˜ä½ç½®ï¼š&quot;)
cv2_imshow(img)

# ç¢ºèªç„¡èª¤å¾Œå†å¥—ç”¨é¦¬è³½å…‹
</code></pre>

<p><strong>æ­£ç¢ºçš„åº§æ¨™è½‰æ›</strong>ï¼š</p>
<pre class="codehilite"><code class="language-python"># âœ… æ­£ç¢ºï¼šçœ¼ç›
abs_x = fx + ex
abs_y = fy + ey

# âœ… æ­£ç¢ºï¼šå˜´å·´ï¼ˆåœ¨ä¸‹åŠéƒ¨åµæ¸¬ï¼‰
abs_x = fx + mx
abs_y = fy + (fh // 2) + my

# âŒ éŒ¯èª¤ï¼šå¿˜è¨˜åŠ ä¸Šäººè‡‰åº§æ¨™
abs_x = ex  # é€™åªæ˜¯ ROI å…§çš„ç›¸å°åº§æ¨™
abs_y = ey

# âŒ éŒ¯èª¤ï¼šå˜´å·´å¿˜è¨˜åŠ ä¸Š offset
abs_x = fx + mx
abs_y = fy + my  # å¿˜è¨˜åŠ ä¸Š (fh // 2)
</code></pre>

<hr />
<h2>ğŸ’¡ å¸¸è¦‹å•é¡Œ FAQ</h2>
<h3>Q1: ç‚ºä»€éº¼è¦åœ¨äººè‡‰å€åŸŸå…§åµæ¸¬äº”å®˜ï¼Œè€Œä¸æ˜¯åœ¨æ•´å¼µåœ–ï¼Ÿ</h3>
<p><strong>A:</strong> å„ªé»ï¼š<br />
1. <strong>æé«˜æº–ç¢ºåº¦</strong>ï¼šç¸®å°æœå°‹ç¯„åœï¼Œæ¸›å°‘èª¤åˆ¤<br />
2. <strong>æé«˜æ•ˆç‡</strong>ï¼šåªæœå°‹ç›¸é—œå€åŸŸï¼Œé€Ÿåº¦æ›´å¿«<br />
3. <strong>ç¬¦åˆé‚è¼¯</strong>ï¼šäº”å®˜ä¸€å®šåœ¨äººè‡‰å…§ï¼Œä¸æœƒåœ¨å…¶ä»–åœ°æ–¹</p>
<pre class="codehilite"><code class="language-python"># æ¯”è¼ƒï¼š
# æ–¹æ³• Aï¼šåœ¨æ•´å¼µåœ–åµæ¸¬ï¼ˆä¸æ¨è–¦ï¼‰
eyes_all = eye_cascade.detectMultiScale(gray, 1.1, 10)
# å•é¡Œï¼šå¯èƒ½åµæ¸¬åˆ°éäººè‡‰å€åŸŸçš„é¡çœ¼ç›ç‰©é«”ï¼ˆå¦‚è»Šç‡ˆã€çª—æˆ¶ï¼‰

# æ–¹æ³• Bï¼šåœ¨äººè‡‰ ROI å…§åµæ¸¬ï¼ˆæ¨è–¦ï¼‰
face_roi_gray = gray[fy:fy+fh, fx:fx+fw]
eyes = eye_cascade.detectMultiScale(face_roi_gray, 1.1, 10)
# å„ªé»ï¼šåªåœ¨äººè‡‰å…§æœå°‹ï¼Œæº–ç¢ºåº¦é«˜
</code></pre>

<h3>Q2: ç‚ºä»€éº¼å˜´å·´è¦åœ¨äººè‡‰ä¸‹åŠéƒ¨åµæ¸¬ï¼Ÿ</h3>
<p><strong>A:</strong> å› ç‚ºå˜´å·´ä¸€å®šåœ¨äººè‡‰ä¸‹åŠéƒ¨ï¼Œé€™æ¨£å¯ä»¥ï¼š<br />
1. é¿å…å°‡é¼»å­èª¤åˆ¤ç‚ºå˜´å·´<br />
2. æé«˜åµæ¸¬æ•ˆç‡<br />
3. é™ä½èª¤åˆ¤ç‡</p>
<pre class="codehilite"><code class="language-python"># ä¸é™åˆ¶å€åŸŸï¼šå¯èƒ½èª¤åˆ¤é¼»å­ç‚ºå˜´å·´
mouths = mouth_cascade.detectMultiScale(face_roi_gray, 1.1, 20)

# é™åˆ¶åœ¨ä¸‹åŠéƒ¨ï¼šæº–ç¢ºåº¦æé«˜
mouth_roi_gray = face_roi_gray[fh//2:, :]  # åªæœå°‹ä¸‹åŠéƒ¨
mouths = mouth_cascade.detectMultiScale(mouth_roi_gray, 1.1, 20)
</code></pre>

<h3>Q3: å¯ä»¥åµæ¸¬é¼»å­å—ï¼Ÿ</h3>
<p><strong>A:</strong> å¯ä»¥ï¼Œä½¿ç”¨ <code>haarcascade_mcs_nose.xml</code>ï¼š</p>
<pre class="codehilite"><code class="language-python"># ä¸‹è¼‰é¼»å­æ¨¡å‹
url = 'https://raw.githubusercontent.com/atduskgreg/opencv-processing/master/lib/cascade-files/haarcascade_mcs_nose.xml'
urllib.request.urlretrieve(url, 'haarcascade_mcs_nose.xml')

# è¼‰å…¥æ¨¡å‹
nose_cascade = cv2.CascadeClassifier('haarcascade_mcs_nose.xml')

# åœ¨äººè‡‰ä¸­é–“å€åŸŸåµæ¸¬é¼»å­
nose_roi_start = fh // 3
nose_roi_end = 2 * fh // 3
nose_roi_gray = face_roi_gray[nose_roi_start:nose_roi_end, :]

noses = nose_cascade.detectMultiScale(nose_roi_gray, 1.1, 15)

for (nx, ny, nw, nh) in noses:
    abs_x = fx + nx
    abs_y = fy + nose_roi_start + ny
    apply_mosaic(img, abs_x, abs_y, nw, nh, level=10)
</code></pre>

<h3>Q4: é¦¬è³½å…‹å’Œé«˜æ–¯æ¨¡ç³Šå“ªå€‹å¥½ï¼Ÿ</h3>
<p><strong>A:</strong> å„æœ‰å„ªç¼ºé»ï¼š</p>
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>é¦¬è³½å…‹</th>
<th>é«˜æ–¯æ¨¡ç³Š</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>éš±ç§ä¿è­·</strong></td>
<td>å¼·</td>
<td>ä¸­ç­‰</td>
</tr>
<tr>
<td><strong>è¦–è¦ºæ•ˆæœ</strong></td>
<td>æ˜é¡¯ã€çªå…€</td>
<td>æŸ”å’Œã€è‡ªç„¶</td>
</tr>
<tr>
<td><strong>è™•ç†é€Ÿåº¦</strong></td>
<td>å¿«</td>
<td>è¼ƒæ…¢</td>
</tr>
<tr>
<td><strong>å¯é€†æ€§</strong></td>
<td>ä¸å¯é€†</td>
<td>ä¸å¯é€†</td>
</tr>
<tr>
<td><strong>é©ç”¨å ´æ™¯</strong></td>
<td>æ–°èã€å…¬é–‹å ´åˆ</td>
<td>ç¤¾äº¤åª’é«”ã€è—è¡“ç…§</td>
</tr>
</tbody>
</table>
<p><strong>é¸æ“‡å»ºè­°</strong>ï¼š<br />
- éœ€è¦å¼·éš±ç§ä¿è­·ï¼šä½¿ç”¨é¦¬è³½å…‹ï¼ˆlevel=5-10ï¼‰<br />
- è¿½æ±‚è‡ªç„¶æ•ˆæœï¼šä½¿ç”¨é«˜æ–¯æ¨¡ç³Šï¼ˆblur_level=21-31ï¼‰<br />
- æ¥µè‡´ä¿è­·ï¼šä½¿ç”¨é»‘è‰²é®ç½©</p>
<h3>Q5: å¦‚ä½•è™•ç†å´è‡‰ç…§ç‰‡ï¼Ÿ</h3>
<p><strong>A:</strong> Haar Cascade å°å´è‡‰æ•ˆæœè¼ƒå·®ï¼Œä½†å¯ä»¥å˜—è©¦ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨å´è‡‰æ¨¡å‹</strong>ï¼š</li>
</ol>
<pre class="codehilite"><code class="language-python"># ä¸‹è¼‰å´è‡‰æ¨¡å‹
url = 'https://raw.githubusercontent.com/opencv/opencv/4.x/data/haarcascades/haarcascade_profileface.xml'
urllib.request.urlretrieve(url, 'haarcascade_profileface.xml')

# è¼‰å…¥ä¸¦ä½¿ç”¨
profile_cascade = cv2.CascadeClassifier('haarcascade_profileface.xml')
profile_faces = profile_cascade.detectMultiScale(gray, 1.1, 5)
</code></pre>

<ol>
<li><strong>åŒæ™‚åµæ¸¬æ­£é¢å’Œå´é¢</strong>ï¼š</li>
</ol>
<pre class="codehilite"><code class="language-python"># æ­£é¢äººè‡‰
frontal_faces = face_cascade.detectMultiScale(gray, 1.1, 5)

# å´é¢äººè‡‰
profile_faces = profile_cascade.detectMultiScale(gray, 1.1, 5)

# åˆä½µçµæœ
all_faces = list(frontal_faces) + list(profile_faces)
</code></pre>

<ol>
<li><strong>ä½¿ç”¨æ·±åº¦å­¸ç¿’æ¨¡å‹</strong>ï¼ˆé€²éšï¼‰ï¼š</li>
<li>MTCNNã€RetinaFace å°å„ç¨®è§’åº¦éƒ½æœ‰è¼ƒå¥½æ•ˆæœ</li>
</ol>
<hr />
<h2>ğŸ“Š è©•åˆ†æ¨™æº–</h2>
<table>
<thead>
<tr>
<th>é …ç›®</th>
<th>é…åˆ†</th>
<th>è©•åˆ†é‡é»</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>åŠŸèƒ½å®Œæ•´æ€§</strong></td>
<td>40%</td>
<td>æ‰€æœ‰ 7 å€‹éœ€æ±‚éƒ½å·²å¯¦ä½œä¸¦æ­£å¸¸é‹ä½œ</td>
</tr>
<tr>
<td><strong>ç¨‹å¼ç¢¼å“è³ª</strong></td>
<td>25%</td>
<td>çµæ§‹æ¸…æ™°ã€è¨»è§£å®Œæ•´ã€è®Šæ•¸å‘½åè¦ç¯„ã€éŒ¯èª¤è™•ç†</td>
</tr>
<tr>
<td><strong>åŸ·è¡Œçµæœ</strong></td>
<td>20%</td>
<td>èƒ½æ­£ç¢ºåµæ¸¬ä¸¦é¦¬è³½å…‹è™•ç†äº”å®˜</td>
</tr>
<tr>
<td><strong>æ¸¬è©¦å ±å‘Š</strong></td>
<td>10%</td>
<td>å®Œæ•´è¨˜éŒ„æ¸¬è©¦éç¨‹èˆ‡å¿ƒå¾—åæ€</td>
</tr>
<tr>
<td><strong>å»¶ä¼¸æŒ‘æˆ°</strong></td>
<td>5%</td>
<td>å®Œæˆè‡³å°‘ä¸€é …å»¶ä¼¸æŒ‘æˆ°ï¼ˆåŠ åˆ†é …ï¼‰</td>
</tr>
</tbody>
</table>
<hr />
<h2>ğŸ“š å­¸ç¿’è³‡æº</h2>
<h3>åƒè€ƒæ–‡ä»¶</h3>
<ul>
<li>ä¸»è¦æ•™å­¸ï¼š<code>opencv_imageclassfy_b05.md</code></li>
<li>OpenCV å®˜æ–¹ï¼š<a href="https://docs.opencv.org/4.x/db/d28/tutorial_cascade_classifier.html">Face Detection</a></li>
<li>Haar Cascade åŸç†ï¼šViola-Jones æ¼”ç®—æ³•</li>
</ul>
<h3>ç›¸é—œå‡½æ•¸</h3>
<ul>
<li><code>cv2.CascadeClassifier()</code>ï¼šè¼‰å…¥åˆ†é¡å™¨</li>
<li><code>detectMultiScale()</code>ï¼šå¤šå°ºåº¦åµæ¸¬</li>
<li><code>cv2.resize()</code>ï¼šåœ–ç‰‡ç¸®æ”¾ï¼ˆç”¨æ–¼é¦¬è³½å…‹ï¼‰</li>
<li><code>cv2.GaussianBlur()</code>ï¼šé«˜æ–¯æ¨¡ç³Š</li>
<li>ROI æ“ä½œï¼š<code>img[y:y+h, x:x+w]</code></li>
</ul>
<h3>é€²éšå­¸ç¿’</h3>
<ul>
<li>æ·±åº¦å­¸ç¿’äººè‡‰åµæ¸¬ï¼šMTCNNã€RetinaFace</li>
<li>äººè‡‰é—œéµé»åµæ¸¬ï¼šDlibã€Face Alignment</li>
<li>äººè‡‰è¾¨è­˜ï¼šFaceNetã€ArcFace</li>
</ul>
<hr />
<p><strong>ç¥å­¸ç¿’é †åˆ©ï¼è¨˜å¾—ç†è§£åº§æ¨™è½‰æ›çš„æ¦‚å¿µï¼Œé€™æ˜¯æœ¬é¡Œçš„é—œéµï¼</strong> ğŸ”’</p></div>
    
    <!-- Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            "startOnLoad": true,
            "theme": "dark",
            "securityLevel": "loose"
});
    </script>
</body>
</html>