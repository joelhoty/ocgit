<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>plan</title>
    
    <!-- CSS 框架 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/dark.min.css">
    
    <!-- 代碼高亮 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/base16/darcula.min.css">
    
    <!-- 自定義樣式 -->
    <style>
        
                body {
                    max-width: 900px;
                    margin: 0 auto;
                    padding: 20px;
                }
                /* 提升代码块对比度 */
                pre {
                    background: #1e1e1e !important;
                    border: 1px solid #3e3e3e;
                }
                pre code {
                    background: #1e1e1e !important;
                }
                code {
                    background: #2d2d2d !important;
                }
                /* 引用块对比度 */
                blockquote {
                    background: #2d2d2d;
                    border-left: 4px solid #4a9eff;
                }
            
        
        /* 通用代碼塊樣式 */
        pre code {
            display: block;
            padding: 1.5em;
            border-radius: 8px;
            overflow-x: auto;
            line-height: 1.6;
        }

        /* Mermaid 圖表樣式 */
        
        .mermaid {
            margin: 2em 0;
            padding: 1.5em;
            text-align: center;
            border-radius: 8px;
        }
        
        .mermaid {
            background: #2c3034;
            border: 1px solid #444;
        }
            
        
        /* 響應式調整 */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .container, .markdown-body, .latex-body, .window-body, .nes-container {
                padding: 15px;
            }
            pre code {
                padding: 1em;
            }
        }
        
        
    </style>
</head>
<body>
    <div class="container"><h1>台語朗讀自動評分系統 - 詳細計劃案</h1>
<hr />
<h2>📋 專案目的</h2>
<h3>核心目標</h3>
<p>本專案旨在開發一套<strong>智能化台語朗讀自動評分系統</strong>，透過結合先進的語音辨識技術與台語語言學專業知識，為台語學習者提供即時、客觀、精準的發音評估工具，降低台語學習門檻，促進本土語言傳承。</p>
<h3>解決的問題</h3>
<ol>
<li><strong>缺乏即時回饋</strong>：傳統台語學習依賴教師或家人指導，無法隨時練習</li>
<li><strong>評分主觀性</strong>：人工評分容易受個人標準影響，缺乏一致性</li>
<li><strong>學習資源不足</strong>：台語教學資源相對匱乏，尤其是互動式學習工具</li>
<li><strong>發音標準化困難</strong>：台語方言眾多，需要統一的評量標準</li>
<li><strong>學習動機維持</strong>：缺乏量化成效追蹤，難以持續學習</li>
</ol>
<h3>目標使用者</h3>
<ul>
<li><strong>學生族群</strong>：國小至高中台語課程學習者</li>
<li><strong>成人自學者</strong>：希望重新學習或改善台語能力者</li>
<li><strong>教育工作者</strong>：台語教師作為輔助教學工具</li>
<li><strong>語言研究者</strong>：進行台語語音相關研究</li>
<li><strong>新住民/外籍人士</strong>：學習台灣本土語言</li>
</ul>
<hr />
<h2>⭐ 特色與優點</h2>
<h3>技術特色</h3>
<h4>1. <strong>專業台語語音模型</strong></h4>
<ul>
<li>採用 NUTN-KWS 開發的 Whisper 台語專用模型</li>
<li>針對台語語音特徵微調，辨識準確率顯著優於通用模型</li>
<li>支援台語特有的變調、鼻音、入聲等語音現象</li>
</ul>
<h4>2. <strong>台羅拼音標準化</strong></h4>
<ul>
<li>使用教育部公告的台灣閩南語羅馬字拼音系統（台羅）</li>
<li>提供精確的聲母、韻母、聲調評分</li>
<li>避免漢字一字多音造成的評分誤差</li>
</ul>
<h4>3. <strong>雙語對照系統</strong></h4>
<div class="codehilite"><pre><span></span><code>顯示層：台語漢字（使用者友善）
評分層：台羅拼音（精確比對）
</code></pre></div>

<h4>4. <strong>多維度評分機制</strong></h4>
<table>
<thead>
<tr>
<th>評分維度</th>
<th>權重</th>
<th>說明</th>
</tr>
</thead>
<tbody>
<tr>
<td>整體準確度</td>
<td>70%</td>
<td>完整語句的相似度</td>
</tr>
<tr>
<td>字元準確度</td>
<td>20%</td>
<td>逐字元比對正確率</td>
</tr>
<tr>
<td>聲調準確度</td>
<td>10%</td>
<td>聲調符號匹配度</td>
</tr>
</tbody>
</table>
<h4>5. <strong>智能錯誤分析</strong></h4>
<ul>
<li>自動標示錯誤位置</li>
<li>分類錯誤類型（聲母/韻母/聲調）</li>
<li>提供個人化改進建議</li>
</ul>
<h3>功能優點</h3>
<h4>✅ <strong>即時評分回饋</strong></h4>
<ul>
<li>錄音後 3-5 秒內完成評分</li>
<li>無需等待人工批改</li>
<li>支援無限次重複練習</li>
</ul>
<h4>✅ <strong>客觀公正評量</strong></h4>
<ul>
<li>基於演算法的一致性評分標準</li>
<li>消除人為主觀因素</li>
<li>可追溯的評分邏輯</li>
</ul>
<h4>✅ <strong>低門檻使用</strong></h4>
<ul>
<li>網頁介面，無需安裝軟體</li>
<li>操作簡單，適合各年齡層</li>
<li>支援電腦與手機瀏覽器</li>
</ul>
<h4>✅ <strong>豐富學習資源</strong></h4>
<ul>
<li>內建 100+ 篇分級文稿</li>
<li>涵蓋日常對話、俗諺、文學等多元主題</li>
<li>持續擴充的題庫系統</li>
</ul>
<h4>✅ <strong>個人化學習</strong></h4>
<ul>
<li>根據程度選擇難度（初/中/高級）</li>
<li>追蹤學習歷程與進步曲線</li>
<li>針對弱點提供專項訓練</li>
</ul>
<h4>✅ <strong>開源與可擴展</strong></h4>
<ul>
<li>開放原始碼，接受社群貢獻</li>
<li>模組化設計，易於功能擴充</li>
<li>可整合至其他教育平台</li>
</ul>
<h3>創新亮點</h3>
<h4>🔬 <strong>AI + 語言學結合</strong></h4>
<p>整合深度學習語音辨識技術與台語音韻學專業知識，確保評分的技術性與專業性。</p>
<h4>🎯 <strong>教育科技應用</strong></h4>
<p>將前沿 AI 技術落地於本土語言教育，縮小城鄉教育資源差距。</p>
<h4>🌐 <strong>數位保存文化</strong></h4>
<p>透過數位化方式記錄與推廣台語，為語言保存貢獻科技力量。</p>
<h4>📊 <strong>大數據應用潛力</strong></h4>
<p>收集（匿名化）學習數據，分析台語學習痛點，優化教學策略。</p>
<h3>社會價值</h3>
<h4>🏫 <strong>教育普及化</strong></h4>
<ul>
<li>降低台語學習成本</li>
<li>提供 24/7 隨時可用的學習工具</li>
<li>補充校內教學資源不足</li>
</ul>
<h4>👨‍👩‍👧‍👦 <strong>世代傳承</strong></h4>
<ul>
<li>協助年輕世代學習台語</li>
<li>橋接世代間的語言隔閡</li>
<li>強化文化認同</li>
</ul>
<h4>🌍 <strong>語言保存</strong></h4>
<ul>
<li>建立台語語音資料庫</li>
<li>記錄標準發音</li>
<li>對抗語言流失危機</li>
</ul>
<hr />
<h2>一、專案概述</h2>
<h3>1.1 專案背景</h3>
<p>台語（閩南語）作為台灣重要的本土語言，亟需有效的學習與評量工具。隨著108課綱將本土語言列為必修，台語教學需求大增，但師資與教材仍顯不足。本專案結合 AI 語音辨識技術，開發自動化評分系統，解決台語學習的痛點。</p>
<h3>1.2 專案目標</h3>
<ul>
<li><strong>主要目標</strong>：建立台語朗讀自動評分系統，結合語音辨識技術，提供即時、客觀的發音評分</li>
<li><strong>次要目標</strong>：</li>
<li>降低台語學習門檻</li>
<li>提供可量化的學習成效追蹤</li>
<li>建立可擴充的台語教學平台基礎</li>
<li>累積台語語音與文本資料庫</li>
</ul>
<h3>1.3 專案範圍</h3>
<h4>MVP 階段（核心功能）</h4>
<p>✅ 文稿生成（台羅+漢字雙語顯示）<br />
✅ 錄音功能（支援瀏覽器與桌面）<br />
✅ 語音辨識（Whisper 台語模型）<br />
✅ 基礎評分機制（編輯距離演算法）<br />
✅ Web 介面（Gradio/Streamlit）  </p>
<h4>不包含（未來版本）</h4>
<p>❌ 詳細發音口型指導<br />
❌ 多人競賽/排行榜模式<br />
❌ 原生行動裝置 APP<br />
❌ 即時語音對話練習<br />
❌ 商業化付費功能  </p>
<h3>1.4 成功標準</h3>
<table>
<thead>
<tr>
<th>指標</th>
<th>目標值</th>
</tr>
</thead>
<tbody>
<tr>
<td>語音辨識準確率</td>
<td>≥ 85%</td>
</tr>
<tr>
<td>評分與專家相關係數</td>
<td>≥ 0.80</td>
</tr>
<tr>
<td>系統回應時間</td>
<td>≤ 5 秒</td>
</tr>
<tr>
<td>使用者滿意度 (SUS)</td>
<td>≥ 70 分</td>
</tr>
<tr>
<td>文稿庫規模</td>
<td>≥ 100 篇</td>
</tr>
</tbody>
</table>
<hr />
<h2>二、系統架構設計</h2>
<h3>2.1 整體架構圖</h3>
<div class="codehilite"><pre><span></span><code>┌──────────────────────────────────────────────────────┐
│              前端介面層 (Presentation Layer)           │
├──────────────────────────────────────────────────────┤
│  文稿顯示區  │  錄音控制面板  │  評分結果展示         │
│  ┌────────┐  │  ┌──────────┐  │  ┌──────────────┐  │
│  │漢字文本│  │  │🎤 錄音鈕  │  │  │分數: 87 分   │  │
│  │台羅註解│  │  │⏸ 停止    │  │  │等級: 良好     │  │
│  └────────┘  │  │🔊 播放    │  │  │建議事項...   │  │
│              │  └──────────┘  │  └──────────────┘  │
└──────────────┬───────────────────────────────────────┘
               │ HTTP/WebSocket
┌──────────────▼───────────────────────────────────────┐
│              應用服務層 (Application Layer)            │
├──────────────────────────────────────────────────────┤
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │文稿管理服務 │  │錄音處理服務 │  │評分計算服務 │ │
│  │- 文稿選取   │  │- 音訊驗證   │  │- 語音辨識   │ │
│  │- 難度篩選   │  │- 格式轉換   │  │- 文字比對   │ │
│  │- 隨機生成   │  │- 降噪處理   │  │- 分數計算   │ │
│  └─────────────┘  └─────────────┘  └─────────────┘ │
└──────────────┬───────────────────────────────────────┘
               │
┌──────────────▼───────────────────────────────────────┐
│              核心引擎層 (Core Engine Layer)            │
├──────────────────────────────────────────────────────┤
│  ┌──────────────────┐  ┌──────────────────────────┐ │
│  │ Whisper 台語模型  │  │   文字處理引擎            │ │
│  │ (NUTN-KWS v0.5)  │  │   - 正規化               │ │
│  │ - 語音轉文字      │  │   - Levenshtein 距離     │ │
│  │ - 音訊特徵提取    │  │   - 台羅/漢字轉換(備用)  │ │
│  └──────────────────┘  └──────────────────────────┘ │
└──────────────┬───────────────────────────────────────┘
               │
┌──────────────▼───────────────────────────────────────┐
│              資料持久層 (Data Persistence Layer)       │
├──────────────────────────────────────────────────────┤
│  ┌────────────┐  ┌────────────┐  ┌────────────────┐│
│  │文稿資料庫  │  │音檔儲存    │  │學習記錄 DB     ││
│  │(JSON/SQLite│  │(/tmp/*.wav)│  │(使用者歷程)    ││
│  └────────────┘  └────────────┘  └────────────────┘│
└──────────────────────────────────────────────────────┘
</code></pre></div>

<h3>2.2 資料流程圖</h3>
<div class="codehilite"><pre><span></span><code>[開始] 使用者進入系統
   ↓
(1) 選擇難度 (easy/medium/hard)
   ↓
(2) 系統隨機選取文稿
   ↓
(3) 顯示漢字文本給使用者
   │
   │ (內部保存台羅標準答案)
   ↓
(4) 使用者閱讀文本
   ↓
(5) 點擊「開始錄音」按鈕
   ↓
(6) 麥克風擷取音訊 (16kHz, Mono)
   ↓
(7) 使用者點擊「停止」或達到時間上限
   ↓
(8) 音訊儲存為 WAV 檔案
   ↓
(9) [驗證] 檢查音訊品質
   │   ├─ 音量太小 → 提示重錄
   │   └─ 品質良好 → 繼續
   ↓
(10) 送入 Whisper 台語模型
   ↓
(11) 模型輸出辨識文字
   │   ├─ 情境A: 台羅拼音 → 直接進入評分
   │   └─ 情境B: 漢字 → 轉換為台羅 → 進入評分
   ↓
(12) 文字正規化處理
    (移除多餘空白、統一大小寫)
   ↓
(13) 計算編輯距離 (Levenshtein Distance)
   ↓
(14) 計算各項評分指標
    ├─ 整體準確度 (70%)
    ├─ 字元準確度 (20%)
    └─ 聲調準確度 (10%)
   ↓
(15) 加權計算最終分數
   ↓
(16) 生成評分報告
    ├─ 分數與等級
    ├─ 標準答案 vs 辨識結果
    ├─ 錯誤位置標示
    └─ 改進建議
   ↓
(17) 顯示結果給使用者
   ↓
(18) [選項] 重新練習 / 換下一題 / 查看歷史
   ↓
[結束]
</code></pre></div>

<h3>2.3 模組依賴關係</h3>
<div class="codehilite"><pre><span></span><code>main.py
  ├─ imports ─→ text_manager.py
  │               └─ 依賴 ─→ data/texts.json
  │
  ├─ imports ─→ recorder.py
  │               ├─ 依賴 ─→ sounddevice
  │               └─ 依賴 ─→ scipy
  │
  ├─ imports ─→ whisper_model.py
  │               ├─ 依賴 ─→ transformers
  │               ├─ 依賴 ─→ torch
  │               └─ 載入 ─→ NUTN-KWS/Whisper-Taiwanese-model-v0.5
  │
  └─ imports ─→ scorer.py
                  ├─ 依賴 ─→ Levenshtein
                  └─ 呼叫 ─→ whisper_model.py
</code></pre></div>

<hr />
<h2>三、技術選型</h2>
<h3>3.1 核心技術棧</h3>
<h4>語言與框架</h4>
<table>
<thead>
<tr>
<th>技術</th>
<th>版本</th>
<th>用途</th>
<th>選擇理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Python</strong></td>
<td>3.9+</td>
<td>主要開發語言</td>
<td>ML/AI 生態系完整，函式庫豐富</td>
</tr>
<tr>
<td><strong>Gradio</strong></td>
<td>4.x</td>
<td>Web 介面框架</td>
<td>快速建立 ML 應用介面，內建錄音元件</td>
</tr>
<tr>
<td><strong>Streamlit</strong></td>
<td>1.x</td>
<td>替代方案</td>
<td>更靈活的客製化，適合複雜介面</td>
</tr>
</tbody>
</table>
<h4>AI/ML 模型與工具</h4>
<table>
<thead>
<tr>
<th>技術</th>
<th>版本</th>
<th>用途</th>
<th>選擇理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Whisper (台語版)</strong></td>
<td>v0.5</td>
<td>語音辨識</td>
<td>NUTN-KWS 專為台語微調</td>
</tr>
<tr>
<td><strong>Transformers</strong></td>
<td>4.30+</td>
<td>模型載入</td>
<td>Hugging Face 標準介面</td>
</tr>
<tr>
<td><strong>PyTorch</strong></td>
<td>2.0+</td>
<td>深度學習框架</td>
<td>Whisper 依賴的後端</td>
</tr>
</tbody>
</table>
<h4>音訊處理</h4>
<table>
<thead>
<tr>
<th>技術</th>
<th>版本</th>
<th>用途</th>
<th>選擇理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>sounddevice</strong></td>
<td>0.4+</td>
<td>錄音功能</td>
<td>跨平台音訊 I/O</td>
</tr>
<tr>
<td><strong>scipy</strong></td>
<td>1.10+</td>
<td>音訊檔案處理</td>
<td>WAV 格式讀寫</td>
</tr>
<tr>
<td><strong>librosa</strong></td>
<td>0.10+</td>
<td>(可選) 音訊分析</td>
<td>特徵提取、降噪</td>
</tr>
</tbody>
</table>
<h4>文字處理</h4>
<table>
<thead>
<tr>
<th>技術</th>
<th>版本</th>
<th>用途</th>
<th>選擇理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>python-Levenshtein</strong></td>
<td>0.21+</td>
<td>編輯距離計算</td>
<td>高效能 C 實作</td>
</tr>
<tr>
<td><strong>台灣言語工具</strong></td>
<td>latest</td>
<td>(備用) 漢字轉台羅</td>
<td>本土開發的台語工具</td>
</tr>
</tbody>
</table>
<h4>資料儲存</h4>
<table>
<thead>
<tr>
<th>技術</th>
<th>版本</th>
<th>用途</th>
<th>選擇理由</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>JSON</strong></td>
<td>-</td>
<td>文稿資料庫</td>
<td>輕量、易編輯、版本控制友善</td>
</tr>
<tr>
<td><strong>SQLite</strong></td>
<td>3.x</td>
<td>學習記錄</td>
<td>本地資料庫，無需額外服務</td>
</tr>
</tbody>
</table>
<h3>3.2 開發工具</h3>
<div class="codehilite"><pre><span></span><code><span class="c1"># 套件管理</span>
pip<span class="w"> </span>/<span class="w"> </span>conda

<span class="c1"># 版本控制</span>
Git<span class="w"> </span>+<span class="w"> </span>GitHub

<span class="c1"># 開發環境</span>
VS<span class="w"> </span>Code<span class="w"> </span>/<span class="w"> </span>PyCharm

<span class="c1"># 虛擬環境</span>
venv<span class="w"> </span>/<span class="w"> </span>conda<span class="w"> </span>env

<span class="c1"># 程式碼品質</span>
pylint<span class="w"> </span>/<span class="w"> </span>black<span class="w"> </span>/<span class="w"> </span>mypy

<span class="c1"># 測試框架</span>
pytest

<span class="c1"># 文件生成</span>
Sphinx<span class="w"> </span>/<span class="w"> </span>MkDocs
</code></pre></div>

<h3>3.3 Whisper 台語模型詳細規格</h3>
<div class="codehilite"><pre><span></span><code><span class="nt">模型名稱</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NUTN-KWS/Whisper-Taiwanese-model-v0.5</span>
<span class="nt">基底架構</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OpenAI Whisper (Transformer Encoder-Decoder)</span>
<span class="nt">微調來源</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">台語語音資料集</span>
<span class="nt">參數量</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~244M (medium 版本)</span>

<span class="nt">輸入規格</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">格式</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WAV, MP3, FLAC</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">採樣率</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16000 Hz (建議)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">聲道</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">單聲道 (Mono)</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">長度</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">最長 30 秒 / 段</span>

<span class="nt">輸出格式</span><span class="p">:</span><span class="w"> </span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">待確認</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">台羅拼音 或 漢字</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">編碼</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UTF-8</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">結構</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">純文字字串</span>

<span class="nt">推理效能</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">CPU</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~5-10 秒 / 30秒音檔</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">GPU (CUDA)</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~2-3 秒 / 30秒音檔</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">記憶體</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~2GB (模型載入)</span>

<span class="nt">準確率 (WER)</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">乾淨語音</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~10-15%</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">一般環境</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~20-30%</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">嘈雜環境</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">~40-50%</span>
</code></pre></div>

<h3>3.4 系統需求</h3>
<h4>開發環境</h4>
<div class="codehilite"><pre><span></span><code>作業系統:
  - Windows 10/11
  - macOS 11+ (Big Sur)
  - Ubuntu 20.04+ / Debian 11+

硬體需求:
  - CPU: Intel i5 / AMD Ryzen 5 以上
  - RAM: 16GB 建議 (最低 8GB)
  - 硬碟: 20GB 可用空間
  - GPU: NVIDIA GTX 1060 以上 (可選，用於加速)
  - 麥克風: 內建或外接皆可

網路:
  - 初次下載模型需要網路 (~1GB)
  - 執行時可離線運作
</code></pre></div>

<h4>部署環境</h4>
<div class="codehilite"><pre><span></span><code>伺服器規格 (若部署至雲端):
  - vCPU: 4 核心
  - RAM: 16GB
  - 儲存: 50GB SSD
  - 頻寬: 10Mbps+

推薦平台:
  - Heroku
  - Google Cloud Run
  - AWS EC2
  - Render
</code></pre></div>

<hr />
<h2>四、功能模組設計</h2>
<h3>4.1 文稿管理模組 (Text Manager)</h3>
<h4>4.1.1 資料結構定義</h4>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">TaiwaneseText</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;台語文稿資料結構&quot;&quot;&quot;</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>                      <span class="c1"># UUID 唯一識別碼</span>
    <span class="n">hanzi</span><span class="p">:</span> <span class="nb">str</span>                   <span class="c1"># 漢字文本（顯示用）</span>
    <span class="n">tailo</span><span class="p">:</span> <span class="nb">str</span>                   <span class="c1"># 台羅拼音（標準答案）</span>
    <span class="n">difficulty</span><span class="p">:</span> <span class="nb">str</span>              <span class="c1"># 難度: &quot;easy&quot; / &quot;medium&quot; / &quot;hard&quot;</span>
    <span class="n">category</span><span class="p">:</span> <span class="nb">str</span>                <span class="c1"># 分類: &quot;daily&quot; / &quot;greeting&quot; / &quot;literature&quot; 等</span>
    <span class="n">word_count</span><span class="p">:</span> <span class="nb">int</span>              <span class="c1"># 字數統計</span>
    <span class="n">audio_reference</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># 參考音檔路徑（可選）</span>
    <span class="n">tags</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>       <span class="c1"># 標籤 [&quot;購物&quot;, &quot;日常&quot;]</span>
    <span class="n">created_at</span><span class="p">:</span> <span class="n">datetime</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># 建立時間</span>
    <span class="n">author</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;system&quot;</span>       <span class="c1"># 來源作者</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">created_at</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># 範例資料</span>
<span class="n">example_text</span> <span class="o">=</span> <span class="n">TaiwaneseText</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;550e8400-e29b-41d4-a716-446655440000&quot;</span><span class="p">,</span>
    <span class="n">hanzi</span><span class="o">=</span><span class="s2">&quot;你好，食飽未？&quot;</span><span class="p">,</span>
    <span class="n">tailo</span><span class="o">=</span><span class="s2">&quot;Lí hó, tsia̍h-pá buē?&quot;</span><span class="p">,</span>
    <span class="n">difficulty</span><span class="o">=</span><span class="s2">&quot;easy&quot;</span><span class="p">,</span>
    <span class="n">category</span><span class="o">=</span><span class="s2">&quot;greeting&quot;</span><span class="p">,</span>
    <span class="n">word_count</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
    <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;問候&quot;</span><span class="p">,</span> <span class="s2">&quot;日常&quot;</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

<h4>4.1.2 文稿庫資料範例 (texts.json)</h4>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;texts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text_001&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hanzi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;你好，食飽未？&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tailo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Lí hó, tsia̍h-pá buē?&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;difficulty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;easy&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;greeting&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;word_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;問候&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;日常&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-01T00:00:00&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text_002&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hanzi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;我的名叫阿明，今年二十歲，佇台北讀冊。&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tailo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Guá ê miâ kiò A-bîng, kin-nî jī-tsa̍p huè, tī Tâi-pak tha̍k-chheh.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;difficulty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;medium&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;self_introduction&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;word_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;自我介紹&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;學習&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-01T00:00:00&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text_003&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;hanzi&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;一枝草，一點露，天無絕人之路。&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tailo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Tsi̍t ki tsháu, tsi̍t tiám lōo, thinn bô tsa̍t jîn tsi lo̍o.&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;difficulty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hard&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;category&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;proverb&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;word_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tags&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;俗諺&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;哲理&quot;</span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;created_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-01T00:00:00&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;total_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;last_updated&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-15T12:00:00&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1.0&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<h4>4.1.3 文稿管理程式實作</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># text_manager.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TextManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;台語文稿管理系統&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;data/texts&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">data_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_dir</span> <span class="o">/</span> <span class="s2">&quot;texts.json&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_texts</span><span class="p">()</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ 載入 </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span><span class="si">}</span><span class="s2"> 篇文稿&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_load_texts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;載入文稿資料&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;⚠️ 文稿檔案不存在，建立空資料庫&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_create_default_texts</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts_file</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;texts&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 載入失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_create_default_texts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;建立預設文稿&quot;&quot;&quot;</span>
        <span class="n">default_data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;texts&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;text_001&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;hanzi&quot;</span><span class="p">:</span> <span class="s2">&quot;你好，食飽未？&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tailo&quot;</span><span class="p">:</span> <span class="s2">&quot;Lí hó, tsia̍h-pá buē?&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;difficulty&quot;</span><span class="p">:</span> <span class="s2">&quot;easy&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;greeting&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;word_count&quot;</span><span class="p">:</span> <span class="mi">7</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;text_002&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;hanzi&quot;</span><span class="p">:</span> <span class="s2">&quot;我欲去學校讀冊。&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tailo&quot;</span><span class="p">:</span> <span class="s2">&quot;Guá beh khì ha̍k-hāu tha̍k-chheh.&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;difficulty&quot;</span><span class="p">:</span> <span class="s2">&quot;easy&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;daily&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;word_count&quot;</span><span class="p">:</span> <span class="mi">9</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;text_003&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;hanzi&quot;</span><span class="p">:</span> <span class="s2">&quot;今仔日天氣真好。&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tailo&quot;</span><span class="p">:</span> <span class="s2">&quot;Kin-á-ji̍t thinn-khì tsin hó.&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;difficulty&quot;</span><span class="p">:</span> <span class="s2">&quot;easy&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="s2">&quot;daily&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;word_count&quot;</span><span class="p">:</span> <span class="mi">8</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;total_count&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
                <span class="s2">&quot;last_updated&quot;</span><span class="p">:</span> <span class="s2">&quot;2025-01-01T00:00:00&quot;</span><span class="p">,</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">default_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_random_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                       <span class="n">difficulty</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                       <span class="n">category</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;隨機取得文稿&quot;&quot;&quot;</span>
        <span class="n">filtered</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span>

        <span class="c1"># 依難度篩選</span>
        <span class="k">if</span> <span class="n">difficulty</span><span class="p">:</span>
            <span class="n">filtered</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">filtered</span> <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;difficulty&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">difficulty</span><span class="p">]</span>

        <span class="c1"># 依分類篩選</span>
        <span class="k">if</span> <span class="n">category</span><span class="p">:</span>
            <span class="n">filtered</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">filtered</span> <span class="k">if</span> <span class="n">t</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">category</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">filtered</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;⚠️ 沒有符合條件的文稿&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">filtered</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_text_by_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;依 ID 取得文稿&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">text</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">text_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">text</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                <span class="n">hanzi</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                <span class="n">tailo</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">difficulty</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">category</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                <span class="n">tags</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;新增文稿&quot;&quot;&quot;</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>

        <span class="n">new_text</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;text_</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">())[:</span><span class="mi">8</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="s2">&quot;hanzi&quot;</span><span class="p">:</span> <span class="n">hanzi</span><span class="p">,</span>
            <span class="s2">&quot;tailo&quot;</span><span class="p">:</span> <span class="n">tailo</span><span class="p">,</span>
            <span class="s2">&quot;difficulty&quot;</span><span class="p">:</span> <span class="n">difficulty</span><span class="p">,</span>
            <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">category</span><span class="p">,</span>
            <span class="s2">&quot;word_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">hanzi</span><span class="p">),</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">tags</span> <span class="ow">or</span> <span class="p">[],</span>
            <span class="s2">&quot;created_at&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_texts</span><span class="p">()</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ 新增文稿: </span><span class="si">{</span><span class="n">new_text</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new_text</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_save_texts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;儲存文稿資料&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;texts&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">,</span>
            <span class="s2">&quot;metadata&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;total_count&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">),</span>
                <span class="s2">&quot;last_updated&quot;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
                <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;取得統計資訊&quot;&quot;&quot;</span>
        <span class="n">stats</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">),</span>
            <span class="s2">&quot;by_difficulty&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;by_category&quot;</span><span class="p">:</span> <span class="p">{}</span>
        <span class="p">}</span>

        <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">texts</span><span class="p">:</span>
            <span class="c1"># 難度統計</span>
            <span class="n">diff</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="s1">&#39;difficulty&#39;</span><span class="p">]</span>
            <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;by_difficulty&#39;</span><span class="p">][</span><span class="n">diff</span><span class="p">]</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;by_difficulty&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">diff</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

            <span class="c1"># 分類統計</span>
            <span class="n">cat</span> <span class="o">=</span> <span class="n">text</span><span class="p">[</span><span class="s1">&#39;category&#39;</span><span class="p">]</span>
            <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;by_category&#39;</span><span class="p">][</span><span class="n">cat</span><span class="p">]</span> <span class="o">=</span> <span class="n">stats</span><span class="p">[</span><span class="s1">&#39;by_category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">stats</span>
</code></pre></div>

<h4>4.1.4 文稿分類與難度規劃</h4>
<table>
<thead>
<tr>
<th>難度</th>
<th>字數範圍</th>
<th>特徵</th>
<th>目標數量</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Easy</strong></td>
<td>5-15 字</td>
<td>日常詞彙、簡單句型、無罕見音</td>
<td>40 篇</td>
</tr>
<tr>
<td><strong>Medium</strong></td>
<td>15-30 字</td>
<td>含變調、複合句、常用成語</td>
<td>40 篇</td>
</tr>
<tr>
<td><strong>Hard</strong></td>
<td>30+ 字</td>
<td>文學用語、複雜句型、方言詞</td>
<td>20 篇</td>
</tr>
</tbody>
</table>
<p><strong>分類架構:</strong></p>
<div class="codehilite"><pre><span></span><code>├── greeting (問候語) - 15 篇
├── self_introduction (自我介紹) - 15 篇
├── daily (日常對話) - 30 篇
├── shopping (購物) - 10 篇
├── family (家庭) - 10 篇
├── proverb (俗諺語) - 15 篇
└── literature (文學) - 5 篇
</code></pre></div>

<h3>4.2 錄音處理模組 (Audio Recorder)</h3>
<h4>4.2.1 技術規格</h4>
<div class="codehilite"><pre><span></span><code><span class="n">AUDIO_SETTINGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;sample_rate&#39;</span><span class="p">:</span> <span class="mi">16000</span><span class="p">,</span>      <span class="c1"># Hz (Whisper 建議值)</span>
    <span class="s1">&#39;channels&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>              <span class="c1"># 單聲道</span>
    <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="s1">&#39;int16&#39;</span><span class="p">,</span>           <span class="c1"># 16-bit PCM</span>
    <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;wav&#39;</span><span class="p">,</span>            <span class="c1"># 檔案格式</span>
    <span class="s1">&#39;max_duration&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>         <span class="c1"># 秒</span>
    <span class="s1">&#39;min_duration&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>          <span class="c1"># 秒</span>
    <span class="s1">&#39;buffer_size&#39;</span><span class="p">:</span> <span class="mi">1024</span>         <span class="c1"># 樣本</span>
<span class="p">}</span>

<span class="c1"># 音訊品質檢查閾值</span>
<span class="n">QUALITY_THRESHOLDS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;min_rms&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>            <span class="c1"># 最小 RMS 音量</span>
    <span class="s1">&#39;max_rms&#39;</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>          <span class="c1"># 最大 RMS 音量</span>
    <span class="s1">&#39;min_snr_db&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>          <span class="c1"># 最小信噪比 (dB)</span>
    <span class="s1">&#39;max_clipping_ratio&#39;</span><span class="p">:</span> <span class="mf">0.01</span> <span class="c1"># 最大削波比例</span>
<span class="p">}</span>
</code></pre></div>

<h4>4.2.2 錄音模組實作</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># recorder.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sounddevice</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">scipy.io.wavfile</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">wav</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span>

<span class="k">class</span><span class="w"> </span><span class="nc">AudioRecorder</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;音訊錄製與處理&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                 <span class="n">sample_rate</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16000</span><span class="p">,</span>
                 <span class="n">channels</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                 <span class="n">output_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;recordings&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span> <span class="o">=</span> <span class="n">sample_rate</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">channels</span> <span class="o">=</span> <span class="n">channels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">recording</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_recording</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="c1"># 檢查音訊裝置</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_audio_device</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_check_audio_device</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;檢查可用的音訊裝置&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">devices</span> <span class="o">=</span> <span class="n">sd</span><span class="o">.</span><span class="n">query_devices</span><span class="p">()</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ 偵測到 </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">devices</span><span class="p">)</span><span class="si">}</span><span class="s2"> 個音訊裝置&quot;</span><span class="p">)</span>

            <span class="c1"># 找到預設輸入裝置</span>
            <span class="n">default_input</span> <span class="o">=</span> <span class="n">sd</span><span class="o">.</span><span class="n">query_devices</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;input&#39;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;📍 預設麥克風: </span><span class="si">{</span><span class="n">default_input</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 音訊裝置檢查失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        開始錄音</span>

<span class="sd">        Args:</span>
<span class="sd">            duration: 錄音時長（秒）</span>

<span class="sd">        Returns:</span>
<span class="sd">            音訊資料 (numpy array)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🎙️ 開始錄音 (</span><span class="si">{</span><span class="n">duration</span><span class="si">}</span><span class="s2"> 秒)...&quot;</span><span class="p">)</span>

            <span class="c1"># 錄製音訊</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">recording</span> <span class="o">=</span> <span class="n">sd</span><span class="o">.</span><span class="n">rec</span><span class="p">(</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">duration</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">),</span>
                <span class="n">samplerate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">,</span>
                <span class="n">channels</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">channels</span><span class="p">,</span>
                <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;int16&#39;</span>
            <span class="p">)</span>

            <span class="c1"># 等待錄音完成</span>
            <span class="n">sd</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ 錄音完成&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">recording</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 錄音失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">record_realtime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        即時錄音（可中斷）</span>

<span class="sd">        Args:</span>
<span class="sd">            callback: 回調函數，接收音訊片段</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 進階功能：實作可中斷的即時錄音</span>
        <span class="c1"># 用於未來版本的即時回饋功能</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
             <span class="n">audio_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
             <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;recording.wav&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        儲存音檔</span>

<span class="sd">        Args:</span>
<span class="sd">            audio_data: 音訊資料</span>
<span class="sd">            filename: 檔案名稱</span>

<span class="sd">        Returns:</span>
<span class="sd">            完整檔案路徑</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">audio_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;❌ 無音訊資料可儲存&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">filepath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_dir</span> <span class="o">/</span> <span class="n">filename</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">wav</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filepath</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">,</span> <span class="n">audio_data</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;💾 音檔已儲存: </span><span class="si">{</span><span class="n">filepath</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 儲存失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">validate_quality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        驗證音訊品質</span>

<span class="sd">        Returns:</span>
<span class="sd">            (是否通過, 訊息)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">audio_data</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;音訊資料為空&quot;</span>

        <span class="c1"># 1. 檢查音量</span>
        <span class="n">rms</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">audio_data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">rms</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;音量太小，請靠近麥克風&quot;</span>

        <span class="k">if</span> <span class="n">rms</span> <span class="o">&gt;</span> <span class="mi">30000</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;音量過大，請降低音量或遠離麥克風&quot;</span>

        <span class="c1"># 2. 檢查削波（Clipping）</span>
        <span class="n">max_amplitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">audio_data</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">max_amplitude</span> <span class="o">&gt;=</span> <span class="mi">32767</span><span class="p">:</span>  <span class="c1"># int16 最大值</span>
            <span class="n">clipping_ratio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">32760</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">clipping_ratio</span> <span class="o">&gt;</span> <span class="mf">0.01</span><span class="p">:</span>  <span class="c1"># 超過 1% 削波</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;訊號削波嚴重，請降低音量&quot;</span>

        <span class="c1"># 3. 檢查靜音</span>
        <span class="n">silent_ratio</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">50</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">silent_ratio</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="p">:</span>  <span class="c1"># 超過 90% 靜音</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;未偵測到語音，請確認麥克風&quot;</span>

        <span class="c1"># 4. 檢查時長</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span>
        <span class="k">if</span> <span class="n">duration</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;錄音時間太短&quot;</span>

        <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;音訊品質良好 (RMS: </span><span class="si">{</span><span class="n">rms</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">, 時長: </span><span class="si">{</span><span class="n">duration</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">秒)&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_audio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        分析音訊特徵（用於除錯）</span>

<span class="sd">        Returns:</span>
<span class="sd">            音訊特徵字典</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">audio_data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span>

        <span class="n">duration</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio_data</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span>
        <span class="n">rms</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">audio_data</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
        <span class="n">peak</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">audio_data</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;duration&#39;</span><span class="p">:</span> <span class="n">duration</span><span class="p">,</span>
            <span class="s1">&#39;sample_rate&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">,</span>
            <span class="s1">&#39;rms&#39;</span><span class="p">:</span> <span class="nb">float</span><span class="p">(</span><span class="n">rms</span><span class="p">),</span>
            <span class="s1">&#39;peak&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">peak</span><span class="p">),</span>
            <span class="s1">&#39;samples&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">audio_data</span><span class="p">),</span>
            <span class="s1">&#39;dtype&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">audio_data</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">apply_noise_reduction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        簡易降噪處理（可選）</span>

<span class="sd">        Note: 基礎版本，進階可使用 noisereduce 套件</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 簡單的高通濾波器，移除低頻噪音</span>
        <span class="c1"># 進階功能待實作</span>
        <span class="k">return</span> <span class="n">audio_data</span>

<span class="c1"># 使用範例</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">recorder</span> <span class="o">=</span> <span class="n">AudioRecorder</span><span class="p">()</span>

    <span class="c1"># 錄音 10 秒</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">duration</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1"># 驗證品質</span>
    <span class="n">is_valid</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">validate_quality</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;品質驗證: </span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">is_valid</span><span class="p">:</span>
        <span class="c1"># 儲存檔案</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">audio</span><span class="p">,</span> <span class="s2">&quot;test_recording.wav&quot;</span><span class="p">)</span>

        <span class="c1"># 分析資訊</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">analyze_audio</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;音訊資訊: </span><span class="si">{</span><span class="n">info</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h4>4.2.3 Gradio 錄音整合</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># Gradio 提供內建的 gr.Audio 元件，簡化錄音實作</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gradio</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gr</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_audio_interface</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;建立錄音介面&quot;&quot;&quot;</span>

    <span class="k">with</span> <span class="n">gr</span><span class="o">.</span><span class="n">Blocks</span><span class="p">()</span> <span class="k">as</span> <span class="n">demo</span><span class="p">:</span>
        <span class="n">gr</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">&quot;## 🎤 台語錄音&quot;</span><span class="p">)</span>

        <span class="c1"># Gradio 會自動處理錄音</span>
        <span class="n">audio_input</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Audio</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="s2">&quot;microphone&quot;</span><span class="p">,</span>      <span class="c1"># 使用麥克風</span>
            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;filepath&quot;</span><span class="p">,</span>           <span class="c1"># 回傳檔案路徑</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;開始錄音&quot;</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;wav&quot;</span>               <span class="c1"># WAV 格式</span>
        <span class="p">)</span>

        <span class="n">status</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Textbox</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;狀態&quot;</span><span class="p">)</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">process_audio</span><span class="p">(</span><span class="n">audio_path</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">audio_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;請先錄音&quot;</span>

            <span class="c1"># 驗證音訊品質</span>
            <span class="n">recorder</span> <span class="o">=</span> <span class="n">AudioRecorder</span><span class="p">()</span>
            <span class="n">rate</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">wav</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
            <span class="n">is_valid</span><span class="p">,</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">validate_quality</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">msg</span>

        <span class="n">audio_input</span><span class="o">.</span><span class="n">change</span><span class="p">(</span>
            <span class="n">fn</span><span class="o">=</span><span class="n">process_audio</span><span class="p">,</span>
            <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">audio_input</span><span class="p">],</span>
            <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">status</span><span class="p">]</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">demo</span>
</code></pre></div>

<h3>4.3 語音辨識模組 (Whisper Integration)</h3>
<h4>4.3.1 模型載入器</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># whisper_model.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">transformers</span><span class="w"> </span><span class="kn">import</span> <span class="n">pipeline</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">functools</span><span class="w"> </span><span class="kn">import</span> <span class="n">lru_cache</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span>

<span class="k">class</span><span class="w"> </span><span class="nc">WhisperTaiwanese</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Whisper 台語模型封裝&quot;&quot;&quot;</span>

    <span class="n">MODEL_NAME</span> <span class="o">=</span> <span class="s2">&quot;NUTN-KWS/Whisper-Taiwanese-model-v0.5&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_gpu</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_device</span><span class="p">(</span><span class="n">use_gpu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_loaded</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🖥️ 使用裝置: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">use_gpu</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;偵測可用裝置&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">use_gpu</span> <span class="ow">and</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">():</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ 偵測到 GPU (CUDA)&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;📌 使用 CPU&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        載入模型（使用快取避免重複載入）</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_loaded</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;⏳ 載入模型: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">MODEL_NAME</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span> <span class="o">=</span> <span class="n">pipeline</span><span class="p">(</span>
                <span class="s2">&quot;automatic-speech-recognition&quot;</span><span class="p">,</span>
                <span class="n">model</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">MODEL_NAME</span><span class="p">,</span>
                <span class="n">device</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">device</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_is_loaded</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;✅ 模型載入完成&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 模型載入失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
                  <span class="n">audio_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                  <span class="n">return_timestamps</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        語音轉文字</span>

<span class="sd">        Args:</span>
<span class="sd">            audio_path: 音檔路徑</span>
<span class="sd">            return_timestamps: 是否回傳時間戳</span>

<span class="sd">        Returns:</span>
<span class="sd">            辨識結果字典</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_loaded</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_model</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🎯 開始辨識: </span><span class="si">{</span><span class="n">audio_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span>
                <span class="n">audio_path</span><span class="p">,</span>
                <span class="n">return_timestamps</span><span class="o">=</span><span class="n">return_timestamps</span>
            <span class="p">)</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;✅ 辨識完成: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">][:</span><span class="mi">50</span><span class="p">]</span><span class="si">}</span><span class="s2">...&quot;</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">result</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 辨識失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">batch_transcribe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;批次辨識（用於測試）&quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">audio_paths</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_model_info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;取得模型資訊&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;model_name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODEL_NAME</span><span class="p">,</span>
            <span class="s2">&quot;device&quot;</span><span class="p">:</span> <span class="s2">&quot;GPU&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;CPU&quot;</span><span class="p">,</span>
            <span class="s2">&quot;is_loaded&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_loaded</span><span class="p">,</span>
            <span class="s2">&quot;cuda_available&quot;</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span>
        <span class="p">}</span>

<span class="c1"># 全域單例模式</span>
<span class="n">_whisper_instance</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_whisper_model</span><span class="p">(</span><span class="n">use_gpu</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">WhisperTaiwanese</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;取得 Whisper 模型實例（單例）&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_whisper_instance</span>

    <span class="k">if</span> <span class="n">_whisper_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_whisper_instance</span> <span class="o">=</span> <span class="n">WhisperTaiwanese</span><span class="p">(</span><span class="n">use_gpu</span><span class="o">=</span><span class="n">use_gpu</span><span class="p">)</span>
        <span class="n">_whisper_instance</span><span class="o">.</span><span class="n">load_model</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">_whisper_instance</span>
</code></pre></div>

<h4>4.3.2 輸出格式處理策略</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># text_processor.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TextProcessor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;文字處理工具&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_tailo</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        判斷文字是否為台羅拼音</span>

<span class="sd">        檢查項目:</span>
<span class="sd">        - 包含台羅特殊符號 (ⁿ, -, ́, ̀ 等)</span>
<span class="sd">        - 拉丁字母為主</span>
<span class="sd">        - 符合台羅音節結構</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 台羅特徵</span>
        <span class="n">tailo_markers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;ⁿ&#39;</span><span class="p">,</span>           <span class="c1"># 鼻音符號</span>
            <span class="s1">&#39;</span><span class="se">\u0301</span><span class="s1">&#39;</span><span class="p">,</span>      <span class="c1"># 聲調符號 ́</span>
            <span class="s1">&#39;</span><span class="se">\u0300</span><span class="s1">&#39;</span><span class="p">,</span>      <span class="c1"># 聲調符號 ̀</span>
            <span class="s1">&#39;</span><span class="se">\u0302</span><span class="s1">&#39;</span><span class="p">,</span>      <span class="c1"># 聲調符號 ̂</span>
            <span class="s1">&#39;</span><span class="se">\u030d</span><span class="s1">&#39;</span><span class="p">,</span>      <span class="c1"># 聲調符號 ̍</span>
            <span class="s1">&#39;ō&#39;</span><span class="p">,</span> <span class="s1">&#39;ū&#39;</span><span class="p">,</span> <span class="s1">&#39;ī&#39;</span><span class="p">,</span> <span class="s1">&#39;ā&#39;</span><span class="p">,</span> <span class="s1">&#39;ē&#39;</span><span class="p">,</span>  <span class="c1"># 長音</span>
        <span class="p">]</span>

        <span class="c1"># 檢查是否包含台羅符號</span>
        <span class="n">has_tailo_marks</span> <span class="o">=</span> <span class="nb">any</span><span class="p">(</span><span class="n">marker</span> <span class="ow">in</span> <span class="n">text</span> <span class="k">for</span> <span class="n">marker</span> <span class="ow">in</span> <span class="n">tailo_markers</span><span class="p">)</span>

        <span class="c1"># 檢查拉丁字母比例</span>
        <span class="n">latin_ratio</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">text</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="k">if</span> <span class="n">text</span> <span class="k">else</span> <span class="mi">0</span>

        <span class="n">is_likely_tailo</span> <span class="o">=</span> <span class="n">has_tailo_marks</span> <span class="ow">or</span> <span class="n">latin_ratio</span> <span class="o">&gt;</span> <span class="mf">0.5</span>

        <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;判斷文字格式: &#39;</span><span class="si">{</span><span class="n">text</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="si">}</span><span class="s2">...&#39; → </span><span class="si">{</span><span class="s1">&#39;台羅&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">is_likely_tailo</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;漢字&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">is_likely_tailo</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">normalize_tailo</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        正規化台羅文字</span>

<span class="sd">        - 統一小寫</span>
<span class="sd">        - 移除多餘空白</span>
<span class="sd">        - 保留聲調符號</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 轉小寫（但保留聲調符號）</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="c1"># 移除多餘空白</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s+&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="c1"># 移除標點符號（可選）</span>
        <span class="c1"># text = re.sub(r&#39;[,!?.;:，！？。；：]&#39;, &#39;&#39;, text)</span>

        <span class="k">return</span> <span class="n">text</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">normalize_hanzi</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;正規化漢字文字&quot;&quot;&quot;</span>
        <span class="c1"># 移除空白</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;\s+&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="c1"># 移除標點</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[,!?.;:，！？。；：]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">text</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hanzi_to_tailo</span><span class="p">(</span><span class="n">hanzi_text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        漢字轉台羅（備用方案）</span>

<span class="sd">        Note: 需要整合外部工具</span>
<span class="sd">        - 台灣言語工具</span>
<span class="sd">        - 自建字典</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># TODO: 整合轉換工具</span>
            <span class="c1"># from tai5_uan5_gian5_gi2_kang1_ku7 import ...</span>

            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;⚠️ 漢字轉台羅功能尚未實作&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">hanzi_text</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ 轉換失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">hanzi_text</span>

<span class="c1"># 使用範例</span>
<span class="n">processor</span> <span class="o">=</span> <span class="n">TextProcessor</span><span class="p">()</span>

<span class="c1"># 測試格式判斷</span>
<span class="n">text1</span> <span class="o">=</span> <span class="s2">&quot;Lí hó, tsia̍h-pá buē?&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">processor</span><span class="o">.</span><span class="n">is_tailo</span><span class="p">(</span><span class="n">text1</span><span class="p">))</span>  <span class="c1"># True</span>

<span class="n">text2</span> <span class="o">=</span> <span class="s2">&quot;你好，食飽未？&quot;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">processor</span><span class="o">.</span><span class="n">is_tailo</span><span class="p">(</span><span class="n">text2</span><span class="p">))</span>  <span class="c1"># False</span>

<span class="c1"># 正規化</span>
<span class="n">normalized</span> <span class="o">=</span> <span class="n">processor</span><span class="o">.</span><span class="n">normalize_tailo</span><span class="p">(</span><span class="s2">&quot;  Lí  Hó  &quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">normalized</span><span class="p">)</span>  <span class="c1"># &quot;lí hó&quot;</span>
</code></pre></div>

<h4>4.3.3 辨識流程整合</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># recognition.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">whisper_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_whisper_model</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">text_processor</span><span class="w"> </span><span class="kn">import</span> <span class="n">TextProcessor</span>

<span class="k">class</span><span class="w"> </span><span class="nc">RecognitionPipeline</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;完整辨識流程&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">whisper</span> <span class="o">=</span> <span class="n">get_whisper_model</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">TextProcessor</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">recognize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        執行語音辨識並處理結果</span>

<span class="sd">        Returns:</span>
<span class="sd">            {</span>
<span class="sd">                &#39;text&#39;: 辨識文字,</span>
<span class="sd">                &#39;format&#39;: &#39;tailo&#39; or &#39;hanzi&#39;,</span>
<span class="sd">                &#39;normalized&#39;: 正規化後的文字,</span>
<span class="sd">                &#39;raw&#39;: 原始辨識結果</span>
<span class="sd">            }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Step 1: 語音辨識</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">whisper</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">audio_path</span><span class="p">)</span>
        <span class="n">raw_text</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_text</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;unknown&#39;</span><span class="p">,</span>
                <span class="s1">&#39;normalized&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                <span class="s1">&#39;raw&#39;</span><span class="p">:</span> <span class="n">result</span>
            <span class="p">}</span>

        <span class="c1"># Step 2: 判斷格式</span>
        <span class="n">is_tailo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">is_tailo</span><span class="p">(</span><span class="n">raw_text</span><span class="p">)</span>
        <span class="n">text_format</span> <span class="o">=</span> <span class="s1">&#39;tailo&#39;</span> <span class="k">if</span> <span class="n">is_tailo</span> <span class="k">else</span> <span class="s1">&#39;hanzi&#39;</span>

        <span class="c1"># Step 3: 正規化</span>
        <span class="k">if</span> <span class="n">is_tailo</span><span class="p">:</span>
            <span class="n">normalized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">normalize_tailo</span><span class="p">(</span><span class="n">raw_text</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># 如果是漢字，嘗試轉換為台羅</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;⚠️ 偵測到漢字輸出，需要轉換...&quot;</span><span class="p">)</span>
            <span class="n">normalized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">hanzi_to_tailo</span><span class="p">(</span><span class="n">raw_text</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;text&#39;</span><span class="p">:</span> <span class="n">raw_text</span><span class="p">,</span>
            <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="n">text_format</span><span class="p">,</span>
            <span class="s1">&#39;normalized&#39;</span><span class="p">:</span> <span class="n">normalized</span><span class="p">,</span>
            <span class="s1">&#39;raw&#39;</span><span class="p">:</span> <span class="n">result</span>
        <span class="p">}</span>

<span class="c1"># 使用範例</span>
<span class="n">pipeline</span> <span class="o">=</span> <span class="n">RecognitionPipeline</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">recognize</span><span class="p">(</span><span class="s2">&quot;recording.wav&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;原始: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;text&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;格式: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;format&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;正規化: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;normalized&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>

<h3>4.4 評分引擎模組 (Scoring Engine)</h3>
<h4>4.4.1 核心評分演算法</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># scorer.py</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">Levenshtein</span><span class="w"> </span><span class="kn">import</span> <span class="n">distance</span> <span class="k">as</span> <span class="n">levenshtein_distance</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>

<span class="k">class</span><span class="w"> </span><span class="nc">TaiwaneseScorer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;台語發音評分引擎&quot;&quot;&quot;</span>

    <span class="c1"># 評分權重</span>
    <span class="n">WEIGHTS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;overall_accuracy&#39;</span><span class="p">:</span> <span class="mf">0.70</span><span class="p">,</span>     <span class="c1"># 整體準確度</span>
        <span class="s1">&#39;character_accuracy&#39;</span><span class="p">:</span> <span class="mf">0.20</span><span class="p">,</span>   <span class="c1"># 字元準確度</span>
        <span class="s1">&#39;tone_accuracy&#39;</span><span class="p">:</span> <span class="mf">0.10</span>         <span class="c1"># 聲調準確度</span>
    <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processor</span> <span class="o">=</span> <span class="n">TextProcessor</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">score</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> 
             <span class="n">reference</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
             <span class="n">recognized</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        計算評分</span>

<span class="sd">        Args:</span>
<span class="sd">            reference: 標準答案（台羅）</span>
<span class="sd">            recognized: 辨識結果（台羅）</span>

<span class="sd">        Returns:</span>
<span class="sd">            評分結果字典</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 正規化</span>
        <span class="n">ref_normalized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">normalize_tailo</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
        <span class="n">rec_normalized</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processor</span><span class="o">.</span><span class="n">normalize_tailo</span><span class="p">(</span><span class="n">recognized</span><span class="p">)</span>

        <span class="c1"># 計算各項指標</span>
        <span class="n">overall</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_overall_accuracy</span><span class="p">(</span><span class="n">ref_normalized</span><span class="p">,</span> <span class="n">rec_normalized</span><span class="p">)</span>
        <span class="n">character</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_character_accuracy</span><span class="p">(</span><span class="n">ref_normalized</span><span class="p">,</span> <span class="n">rec_normalized</span><span class="p">)</span>
        <span class="n">tone</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tone_accuracy</span><span class="p">(</span><span class="n">ref_normalized</span><span class="p">,</span> <span class="n">rec_normalized</span><span class="p">)</span>

        <span class="c1"># 加權計算最終分數</span>
        <span class="n">final_score</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">overall</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">WEIGHTS</span><span class="p">[</span><span class="s1">&#39;overall_accuracy&#39;</span><span class="p">]</span> <span class="o">+</span>
            <span class="n">character</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">WEIGHTS</span><span class="p">[</span><span class="s1">&#39;character_accuracy&#39;</span><span class="p">]</span> <span class="o">+</span>
            <span class="n">tone</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">WEIGHTS</span><span class="p">[</span><span class="s1">&#39;tone_accuracy&#39;</span><span class="p">]</span>
        <span class="p">)</span>

        <span class="c1"># 生成評分報告</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;final_score&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">final_score</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_level</span><span class="p">(</span><span class="n">final_score</span><span class="p">),</span>
            <span class="s1">&#39;metrics&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;overall_accuracy&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">overall</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="s1">&#39;character_accuracy&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="s1">&#39;tone_accuracy&#39;</span><span class="p">:</span> <span class="nb">round</span><span class="p">(</span><span class="n">tone</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
            <span class="p">},</span>
            <span class="s1">&#39;reference&#39;</span><span class="p">:</span> <span class="n">ref_normalized</span><span class="p">,</span>
            <span class="s1">&#39;recognized&#39;</span><span class="p">:</span> <span class="n">rec_normalized</span><span class="p">,</span>
            <span class="s1">&#39;edit_distance&#39;</span><span class="p">:</span> <span class="n">levenshtein_distance</span><span class="p">(</span><span class="n">ref_normalized</span><span class="p">,</span> <span class="n">rec_normalized</span><span class="p">),</span>
            <span class="s1">&#39;errors&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_errors</span><span class="p">(</span><span class="n">ref_normalized</span><span class="p">,</span> <span class="n">rec_normalized</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_overall_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reference</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">recognized</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        整體準確度（基於編輯距離）</span>

<span class="sd">        公式: (1 - 編輯距離 / 最大長度) × 100</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">reference</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">recognized</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">edit_dist</span> <span class="o">=</span> <span class="n">levenshtein_distance</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">recognized</span><span class="p">)</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">reference</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">recognized</span><span class="p">))</span>

        <span class="n">accuracy</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">edit_dist</span> <span class="o">/</span> <span class="n">max_len</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_character_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reference</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">recognized</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        字元準確度（逐字元比對）</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ref_chars</span> <span class="o">=</span> <span class="n">reference</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">rec_chars</span> <span class="o">=</span> <span class="n">recognized</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="c1"># 計算正確字元數</span>
        <span class="n">correct</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ref_chars</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">rec_chars</span><span class="p">))):</span>
            <span class="k">if</span> <span class="n">ref_chars</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">rec_chars</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
                <span class="n">correct</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_chars</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">total</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">correct</span> <span class="o">/</span> <span class="n">total</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_tone_accuracy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reference</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">recognized</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        聲調準確度（比對聲調符號）</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 提取聲調符號</span>
        <span class="n">ref_tones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_tones</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span>
        <span class="n">rec_tones</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extract_tones</span><span class="p">(</span><span class="n">recognized</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ref_tones</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">100.0</span>  <span class="c1"># 無聲調標記，給予滿分</span>

        <span class="c1"># 計算正確聲調數</span>
        <span class="n">correct_tones</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="mi">1</span> <span class="k">for</span> <span class="n">r</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">ref_tones</span><span class="p">,</span> <span class="n">rec_tones</span><span class="p">)</span> <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="n">p</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="mi">100</span> <span class="o">*</span> <span class="n">correct_tones</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_tones</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_extract_tones</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;提取聲調符號&quot;&quot;&quot;</span>
        <span class="n">tone_marks</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Unicode 組合字元的聲調符號</span>
        <span class="n">tone_diacritics</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;</span><span class="se">\u0301</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># ́  第2調</span>
            <span class="s1">&#39;</span><span class="se">\u0300</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># ̀  第3調</span>
            <span class="s1">&#39;</span><span class="se">\u0302</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># ̂  第5調</span>
            <span class="s1">&#39;</span><span class="se">\u0304</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># ̄  第7調</span>
            <span class="s1">&#39;</span><span class="se">\u030d</span><span class="s1">&#39;</span><span class="p">,</span>  <span class="c1"># ̍  第8調</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tone</span> <span class="ow">in</span> <span class="n">tone_diacritics</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">tone</span> <span class="ow">in</span> <span class="n">char</span><span class="p">:</span>
                    <span class="n">tone_marks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tone</span><span class="p">)</span>
                    <span class="k">break</span>

        <span class="k">return</span> <span class="n">tone_marks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_find_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">reference</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">recognized</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        找出錯誤位置與類型</span>

<span class="sd">        Returns:</span>
<span class="sd">            錯誤列表</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">ref_tokens</span> <span class="o">=</span> <span class="n">reference</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="n">rec_tokens</span> <span class="o">=</span> <span class="n">recognized</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="c1"># 逐詞比對</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ref_tokens</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">rec_tokens</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_len</span><span class="p">):</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="n">ref_tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">ref_tokens</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">rec</span> <span class="o">=</span> <span class="n">rec_tokens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">rec_tokens</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>

            <span class="k">if</span> <span class="n">ref</span> <span class="o">!=</span> <span class="n">rec</span><span class="p">:</span>
                <span class="n">error_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_classify_error</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">rec</span><span class="p">)</span>

                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                    <span class="s1">&#39;position&#39;</span><span class="p">:</span> <span class="n">i</span><span class="p">,</span>
                    <span class="s1">&#39;expected&#39;</span><span class="p">:</span> <span class="n">ref</span><span class="p">,</span>
                    <span class="s1">&#39;actual&#39;</span><span class="p">:</span> <span class="n">rec</span><span class="p">,</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="n">error_type</span>
                <span class="p">})</span>

        <span class="k">return</span> <span class="n">errors</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_classify_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">expected</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">actual</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        分類錯誤類型</span>

<span class="sd">        - substitution: 替換錯誤</span>
<span class="sd">        - insertion: 插入錯誤</span>
<span class="sd">        - deletion: 刪除錯誤</span>
<span class="sd">        - tone: 聲調錯誤</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">expected</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;insertion&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">actual</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;deletion&quot;</span>

        <span class="c1"># 移除聲調比較基本音節</span>
        <span class="n">expected_base</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\u0300-\u036f]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span>
        <span class="n">actual_base</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[\u0300-\u036f]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">actual</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">expected_base</span> <span class="o">==</span> <span class="n">actual_base</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;tone&quot;</span>  <span class="c1"># 僅聲調不同</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;substitution&quot;</span>  <span class="c1"># 音節錯誤</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_level</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;評分等級&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">90</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;優秀&quot;</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">80</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;良好&quot;</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">70</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;尚可&quot;</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">60</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;待改進&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;需重學&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">generate_feedback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        生成個人化回饋建議</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">score</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;final_score&#39;</span><span class="p">]</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]</span>

        <span class="n">feedback</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># 整體評價</span>
        <span class="k">if</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">90</span><span class="p">:</span>
            <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;👏 發音非常標準，繼續保持！&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">80</span><span class="p">:</span>
            <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;😊 發音清晰，略有小瑕疵。&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">score</span> <span class="o">&gt;=</span> <span class="mi">70</span><span class="p">:</span>
            <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;🤔 基本正確，但需要多加練習。&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;💪 還有進步空間，建議重複練習。&quot;</span><span class="p">)</span>

        <span class="c1"># 錯誤分析</span>
        <span class="k">if</span> <span class="n">errors</span><span class="p">:</span>
            <span class="n">tone_errors</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">errors</span> <span class="k">if</span> <span class="n">e</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;tone&#39;</span><span class="p">]</span>
            <span class="n">other_errors</span> <span class="o">=</span> <span class="p">[</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">errors</span> <span class="k">if</span> <span class="n">e</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;tone&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">tone_errors</span><span class="p">:</span>
                <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">⚠️ 聲調錯誤 </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">tone_errors</span><span class="p">)</span><span class="si">}</span><span class="s2"> 處，請注意聲調變化。&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">other_errors</span><span class="p">:</span>
                <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">⚠️ 發音錯誤 </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">other_errors</span><span class="p">)</span><span class="si">}</span><span class="s2"> 處，建議逐字練習。&quot;</span><span class="p">)</span>

            <span class="c1"># 列出前 3 個錯誤</span>
            <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">**錯誤詳情:**&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">error</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">errors</span><span class="p">[:</span><span class="mi">3</span><span class="p">],</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">feedback</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">. 位置 </span><span class="si">{</span><span class="n">error</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;應為「</span><span class="si">{</span><span class="n">error</span><span class="p">[</span><span class="s1">&#39;expected&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">」，實為「</span><span class="si">{</span><span class="n">error</span><span class="p">[</span><span class="s1">&#39;actual&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">」&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">feedback</span><span class="p">)</span>

<span class="c1"># 使用範例</span>
<span class="n">scorer</span> <span class="o">=</span> <span class="n">TaiwaneseScorer</span><span class="p">()</span>

<span class="n">reference</span> <span class="o">=</span> <span class="s2">&quot;Lí hó, tsia̍h-pá buē?&quot;</span>
<span class="n">recognized</span> <span class="o">=</span> <span class="s2">&quot;Lí hó, tsiah-pa bue?&quot;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">recognized</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;分數: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;final_score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;等級: </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">回饋:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">scorer</span><span class="o">.</span><span class="n">generate_feedback</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>
</code></pre></div>

<h4>4.4.2 評分視覺化</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># visualization.py</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_score_chart</span><span class="p">(</span><span class="n">metrics</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;生成評分圖表（使用 ASCII 藝術或 Plotly）&quot;&quot;&quot;</span>

    <span class="n">overall</span> <span class="o">=</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;overall_accuracy&#39;</span><span class="p">]</span>
    <span class="n">character</span> <span class="o">=</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;character_accuracy&#39;</span><span class="p">]</span>
    <span class="n">tone</span> <span class="o">=</span> <span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;tone_accuracy&#39;</span><span class="p">]</span>

    <span class="c1"># 簡易長條圖</span>
    <span class="n">chart</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    整體準確度: </span><span class="si">{</span><span class="s1">&#39;█&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="n">overall</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="si">:</span><span class="s2">&lt;20</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">overall</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%</span>
<span class="s2">    字元準確度: </span><span class="si">{</span><span class="s1">&#39;█&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="n">character</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="si">:</span><span class="s2">&lt;20</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">character</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%</span>
<span class="s2">    聲調準確度: </span><span class="si">{</span><span class="s1">&#39;█&#39;</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">int</span><span class="p">(</span><span class="n">tone</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span><span class="si">:</span><span class="s2">&lt;20</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">tone</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">chart</span>
</code></pre></div>

<hr />
<h2>五、實作階段規劃</h2>
<h3>階段一：環境建置與模型測試（Week 1-2）</h3>
<h4>📋 任務清單</h4>
<p><strong>Week 1</strong><br />
- [ ] <strong>Day 1-2</strong>: 環境設定<br />
  ```bash<br />
  # 建立專案目錄<br />
  mkdir taiwanese-pronunciation-scorer<br />
  cd taiwanese-pronunciation-scorer</p>
<p># 建立虛擬環境<br />
  python -m venv venv<br />
  source venv/bin/activate  # Linux/Mac<br />
  # venv\Scripts\activate  # Windows</p>
<p># 安裝核心套件<br />
  pip install torch transformers<br />
  pip install sounddevice scipy<br />
  pip install python-Levenshtein<br />
  pip install gradio</p>
<p># 建立專案結構<br />
  mkdir -p {data/texts,recordings,logs,tests}<br />
  touch {main.py,text_manager.py,recorder.py,whisper_model.py,scorer.py}<br />
  ```</p>
<ul>
<li>[ ] <strong>Day 3-4</strong>: 下載並測試 Whisper 模型<br />
  ```python<br />
  # test_whisper.py<br />
  from transformers import pipeline</li>
</ul>
<p>print("⏳ 開始下載模型...")</p>
<p>pipe = pipeline(<br />
      "automatic-speech-recognition",<br />
      model="NUTN-KWS/Whisper-Taiwanese-model-v0.5"<br />
  )</p>
<p>print("✅ 模型下載完成")</p>
<p># 測試辨識（需準備測試音檔）<br />
  # result = pipe("test_audio.wav")<br />
  # print(f"辨識結果: {result['text']}")<br />
  ```</p>
<ul>
<li>[ ] <strong>Day 5-7</strong>: 輸出格式確認實驗<br />
  ```python<br />
  # format_test.py</li>
</ul>
<p># 準備 3 種測試音檔:<br />
  # 1. 清晰台語發音<br />
  # 2. 含噪音的音檔<br />
  # 3. 不同說話速度</p>
<p>test_files = [<br />
      "test_clear.wav",<br />
      "test_noisy.wav", <br />
      "test_fast.wav"<br />
  ]</p>
<p>for audio_file in test_files:<br />
      result = pipe(audio_file)<br />
      text = result['text']</p>
<div class="codehilite"><pre><span></span><code>  # 判斷輸出格式
  is_tailo = check_if_tailo(text)

  print(f&quot;\n檔案: {audio_file}&quot;)
  print(f&quot;辨識: {text}&quot;)
  print(f&quot;格式: {&#39;台羅&#39; if is_tailo else &#39;漢字&#39;}&quot;)
</code></pre></div>

<p># ⚠️ 關鍵決策點: 根據結果決定後續開發策略<br />
  ```</p>
<p><strong>Week 2</strong><br />
- [ ] <strong>Day 8-10</strong>: 準備測試資料<br />
  - 建立 30 筆文稿（easy: 20, medium: 8, hard: 2）<br />
  - 錄製 10 個測試音檔（不同性別/年齡/口音）<br />
  - 建立評分基準（邀請台語專家）</p>
<ul>
<li>[ ] <strong>Day 11-14</strong>: 基礎功能驗證</li>
<li>測試錄音功能</li>
<li>測試辨識準確率</li>
<li>測試評分演算法</li>
<li>記錄問題與改進方向</li>
</ul>
<h4>🎯 階段一成功標準</h4>
<ul>
<li>✅ Whisper 模型可正常運作</li>
<li>✅ 確認輸出格式（台羅 or 漢字）</li>
<li>✅ 辨識準確率初步測試 &gt; 70%</li>
<li>✅ 完成技術可行性報告</li>
</ul>
<hr />
<h3>階段二：核心功能開發（Week 3-4）</h3>
<h4>Week 3: 基礎模組實作</h4>
<p><strong>Day 15-16</strong>: 文稿管理系統</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 實作內容:</span>
<span class="c1"># 1. TextManager 類別</span>
<span class="c1"># 2. texts.json 資料結構</span>
<span class="c1"># 3. CRUD 操作</span>
<span class="c1"># 4. 統計功能</span>

<span class="c1"># 驗收標準:</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">text_manager</span><span class="o">.</span><span class="n">texts</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">30</span>
<span class="k">assert</span> <span class="n">text_manager</span><span class="o">.</span><span class="n">get_random_text</span><span class="p">(</span><span class="s1">&#39;easy&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
</code></pre></div>

<p><strong>Day 17-18</strong>: 錄音模組</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 實作內容:</span>
<span class="c1"># 1. AudioRecorder 類別</span>
<span class="c1"># 2. 音訊品質驗證</span>
<span class="c1"># 3. WAV 檔案儲存</span>
<span class="c1"># 4. 音訊分析工具</span>

<span class="c1"># 測試項目:</span>
<span class="c1"># - 錄音 10 次，成功率 100%</span>
<span class="c1"># - 品質驗證能正確識別低音量/削波</span>
</code></pre></div>

<p><strong>Day 19-20</strong>: 文字處理工具</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 實作內容:</span>
<span class="c1"># 1. TextProcessor 類別</span>
<span class="c1"># 2. 格式判斷 (is_tailo)</span>
<span class="c1"># 3. 文字正規化</span>
<span class="c1"># 4. (可選) 漢字轉台羅</span>

<span class="c1"># 測試案例:</span>
<span class="n">test_cases</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;Lí hó&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>   <span class="c1"># 應判斷為台羅</span>
    <span class="p">(</span><span class="s2">&quot;你好&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span>   <span class="c1"># 應判斷為漢字</span>
    <span class="p">(</span><span class="s2">&quot;  Lí  &quot;</span><span class="p">,</span> <span class="s2">&quot;lí&quot;</span><span class="p">)</span>   <span class="c1"># 正規化測試</span>
<span class="p">]</span>
</code></pre></div>

<p><strong>Day 21</strong>: 整合測試與除錯</p>
<h4>Week 4: 評分引擎與辨識整合</h4>
<p><strong>Day 22-24</strong>: 評分引擎</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 實作內容:</span>
<span class="c1"># 1. TaiwaneseScorer 類別</span>
<span class="c1"># 2. 多維度評分計算</span>
<span class="c1"># 3. 錯誤分析</span>
<span class="c1"># 4. 回饋生成</span>

<span class="c1"># 驗收標準:</span>
<span class="c1"># - 與專家評分相關係數 &gt; 0.75</span>
<span class="c1"># - 能正確識別聲調/音節錯誤</span>
</code></pre></div>

<p><strong>Day 25-27</strong>: Whisper 整合</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 實作內容:</span>
<span class="c1"># 1. WhisperTaiwanese 類別</span>
<span class="c1"># 2. RecognitionPipeline</span>
<span class="c1"># 3. 錯誤處理</span>
<span class="c1"># 4. 效能優化（模型快取）</span>

<span class="c1"># 測試項目:</span>
<span class="c1"># - 連續辨識 10 次，無記憶體洩漏</span>
<span class="c1"># - 平均推理時間 &lt; 5 秒</span>
</code></pre></div>

<p><strong>Day 28</strong>: 端對端測試</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 完整流程測試</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_e2e</span><span class="p">():</span>
    <span class="c1"># 1. 選擇文稿</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">text_manager</span><span class="o">.</span><span class="n">get_random_text</span><span class="p">()</span>

    <span class="c1"># 2. (人工)錄音</span>
    <span class="n">audio</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">recorder</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>

    <span class="c1"># 3. 辨識</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pipeline</span><span class="o">.</span><span class="n">recognize</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># 4. 評分</span>
    <span class="n">score</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">text</span><span class="p">[</span><span class="s1">&#39;tailo&#39;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;normalized&#39;</span><span class="p">])</span>

    <span class="c1"># 5. 驗證</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">score</span><span class="p">[</span><span class="s1">&#39;final_score&#39;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">100</span>
    <span class="k">assert</span> <span class="n">score</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;優秀&quot;</span><span class="p">,</span> <span class="s2">&quot;良好&quot;</span><span class="p">,</span> <span class="s2">&quot;尚可&quot;</span><span class="p">,</span> <span class="s2">&quot;待改進&quot;</span><span class="p">,</span> <span class="s2">&quot;需重學&quot;</span><span class="p">]</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;✅ 端對端測試通過&quot;</span><span class="p">)</span>
</code></pre></div>

<hr />
<h3>階段三：介面開發（Week 5-6）</h3>
<h4>Week 5: Gradio 介面實作</h4>
<p><strong>Day 29-30</strong>: 基礎介面</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># app.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">gradio</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">gr</span>

<span class="k">with</span> <span class="n">gr</span><span class="o">.</span><span class="n">Blocks</span><span class="p">(</span><span class="n">theme</span><span class="o">=</span><span class="n">gr</span><span class="o">.</span><span class="n">themes</span><span class="o">.</span><span class="n">Soft</span><span class="p">())</span> <span class="k">as</span> <span class="n">demo</span><span class="p">:</span>

    <span class="n">gr</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">&quot;# 🎙️ 台語朗讀自動評分系統&quot;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">gr</span><span class="o">.</span><span class="n">Row</span><span class="p">():</span>
        <span class="n">difficulty</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
            <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;easy&quot;</span><span class="p">,</span> <span class="s2">&quot;medium&quot;</span><span class="p">,</span> <span class="s2">&quot;hard&quot;</span><span class="p">],</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;選擇難度&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;easy&quot;</span>
        <span class="p">)</span>
        <span class="n">generate_btn</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;📝 生成文稿&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">)</span>

    <span class="n">text_display</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Textbox</span><span class="p">(</span>
        <span class="n">label</span><span class="o">=</span><span class="s2">&quot;請朗讀以下文本&quot;</span><span class="p">,</span>
        <span class="n">lines</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">scale</span><span class="o">=</span><span class="mi">2</span>
    <span class="p">)</span>

    <span class="k">with</span> <span class="n">gr</span><span class="o">.</span><span class="n">Row</span><span class="p">():</span>
        <span class="n">audio_input</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Audio</span><span class="p">(</span>
            <span class="n">source</span><span class="o">=</span><span class="s2">&quot;microphone&quot;</span><span class="p">,</span>
            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;filepath&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;🎤 開始錄音&quot;</span>
        <span class="p">)</span>

    <span class="n">submit_btn</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="s2">&quot;🎯 提交評分&quot;</span><span class="p">,</span> <span class="n">variant</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;lg&quot;</span><span class="p">)</span>

    <span class="n">result_display</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">Markdown</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;評分結果&quot;</span><span class="p">)</span>

    <span class="c1"># 事件綁定</span>
    <span class="n">generate_btn</span><span class="o">.</span><span class="n">click</span><span class="p">(</span>
        <span class="n">fn</span><span class="o">=</span><span class="n">generate_text</span><span class="p">,</span>
        <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">difficulty</span><span class="p">],</span>
        <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">text_display</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="n">submit_btn</span><span class="o">.</span><span class="n">click</span><span class="p">(</span>
        <span class="n">fn</span><span class="o">=</span><span class="n">process_audio</span><span class="p">,</span>
        <span class="n">inputs</span><span class="o">=</span><span class="p">[</span><span class="n">audio_input</span><span class="p">,</span> <span class="n">text_display</span><span class="p">],</span>
        <span class="n">outputs</span><span class="o">=</span><span class="p">[</span><span class="n">result_display</span><span class="p">]</span>
    <span class="p">)</span>

<span class="n">demo</span><span class="o">.</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div>

<p><strong>Day 31-32</strong>: 功能完善<br />
- 加入載入動畫<br />
- 錯誤提示優化<br />
- 音訊波形顯示<br />
- 重新錄製按鈕</p>
<p><strong>Day 33-35</strong>: 結果展示優化</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 美化評分結果顯示</span>
<span class="k">def</span><span class="w"> </span><span class="nf">format_result</span><span class="p">(</span><span class="n">score_data</span><span class="p">):</span>
    <span class="n">result_md</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    ## 📊 評分結果</span>

<span class="s2">    ### 🎯 總分: **</span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;final_score&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">** 分</span>

<span class="s2">    **等級**: </span><span class="si">{</span><span class="n">get_emoji</span><span class="p">(</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;level&#39;</span><span class="p">]</span><span class="si">}</span>

<span class="s2">    ---</span>

<span class="s2">    ### 📈 詳細指標</span>

<span class="s2">    | 項目 | 分數 | 進度 |</span>
<span class="s2">    |------|------|------|</span>
<span class="s2">    | 整體準確度 | </span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;overall_accuracy&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% | </span><span class="si">{</span><span class="n">progress_bar</span><span class="p">(</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;overall_accuracy&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> |</span>
<span class="s2">    | 字元準確度 | </span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;character_accuracy&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% | </span><span class="si">{</span><span class="n">progress_bar</span><span class="p">(</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;character_accuracy&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> |</span>
<span class="s2">    | 聲調準確度 | </span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;tone_accuracy&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% | </span><span class="si">{</span><span class="n">progress_bar</span><span class="p">(</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;metrics&#39;</span><span class="p">][</span><span class="s1">&#39;tone_accuracy&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> |</span>

<span class="s2">    ---</span>

<span class="s2">    ### 📝 對照</span>

<span class="s2">    **標準答案**: `</span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;reference&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">`</span>

<span class="s2">    **辨識結果**: `</span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;recognized&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">`</span>

<span class="s2">    **編輯距離**: </span><span class="si">{</span><span class="n">score_data</span><span class="p">[</span><span class="s1">&#39;edit_distance&#39;</span><span class="p">]</span><span class="si">}</span>

<span class="s2">    ---</span>

<span class="s2">    ### 💡 改進建議</span>

<span class="s2">    </span><span class="si">{</span><span class="n">generate_feedback</span><span class="p">(</span><span class="n">score_data</span><span class="p">)</span><span class="si">}</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">result_md</span>
</code></pre></div>

<h4>Week 6: 測試與優化</h4>
<p><strong>Day 36-38</strong>: 使用者測試<br />
- 邀請 10 位使用者測試<br />
- 收集回饋問卷（SUS 量表）<br />
- 記錄使用問題</p>
<p><strong>Day 39-41</strong>: 優化改進<br />
- 修復發現的 Bug<br />
- 優化使用流程<br />
- 改善錯誤訊息<br />
- 效能調校</p>
<p><strong>Day 42</strong>: 功能凍結與文件</p>
<hr />
<h3>階段四：測試與部署（Week 7-8）</h3>
<h4>Week 7: 系統測試</h4>
<p><strong>Day 43-44</strong>: 功能測試</p>
<table>
<thead>
<tr>
<th>測試項目</th>
<th>測試案例數</th>
<th>通過標準</th>
</tr>
</thead>
<tbody>
<tr>
<td>文稿載入</td>
<td>100</td>
<td>全部正確</td>
</tr>
<tr>
<td>錄音功能</td>
<td>50</td>
<td>成功率 &gt; 95%</td>
</tr>
<tr>
<td>辨識準確率</td>
<td>100</td>
<td>平均 &gt; 85%</td>
</tr>
<tr>
<td>評分準確性</td>
<td>50</td>
<td>相關係數 &gt; 0.8</td>
</tr>
<tr>
<td>介面響應</td>
<td>20</td>
<td>無卡頓/錯誤</td>
</tr>
</tbody>
</table>
<p><strong>Day 45-46</strong>: 效能測試</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># performance_test.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">time</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">psutil</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_performance</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;效能測試&quot;&quot;&quot;</span>

    <span class="c1"># 1. 模型載入時間</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">get_whisper_model</span><span class="p">()</span>
    <span class="n">load_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="k">assert</span> <span class="n">load_time</span> <span class="o">&lt;</span> <span class="mi">30</span><span class="p">,</span> <span class="s2">&quot;模型載入過慢&quot;</span>

    <span class="c1"># 2. 辨識速度</span>
    <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="s2">&quot;test.wav&quot;</span><span class="p">)</span>
    <span class="n">infer_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
    <span class="k">assert</span> <span class="n">infer_time</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;辨識過慢&quot;</span>

    <span class="c1"># 3. 記憶體使用</span>
    <span class="n">memory</span> <span class="o">=</span> <span class="n">psutil</span><span class="o">.</span><span class="n">Process</span><span class="p">()</span><span class="o">.</span><span class="n">memory_info</span><span class="p">()</span><span class="o">.</span><span class="n">rss</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span>
    <span class="k">assert</span> <span class="n">memory</span> <span class="o">&lt;</span> <span class="mi">3000</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;記憶體使用過高: </span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="s2">MB&quot;</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    ✅ 效能測試通過</span>
<span class="s2">    - 載入時間: </span><span class="si">{</span><span class="n">load_time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s</span>
<span class="s2">    - 辨識時間: </span><span class="si">{</span><span class="n">infer_time</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">s</span>
<span class="s2">    - 記憶體: </span><span class="si">{</span><span class="n">memory</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">MB</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">)</span>
</code></pre></div>

<p><strong>Day 47-49</strong>: 壓力測試<br />
- 連續使用 1 小時無崩潰<br />
- 同時 5 個使用者無延遲<br />
- 處理異常輸入（過長/過短音檔）</p>
<h4>Week 8: 文件與部署</h4>
<p><strong>Day 50-52</strong>: 文件撰寫</p>
<div class="codehilite"><pre><span></span><code>📄 待完成文件:
<span class="k">-</span><span class="w"> </span>README.md (專案說明)
<span class="k">-</span><span class="w"> </span>INSTALL.md (安裝指南)
<span class="k">-</span><span class="w"> </span>USER_GUIDE.md (使用手冊)
<span class="k">-</span><span class="w"> </span>API.md (API 文件)
<span class="k">-</span><span class="w"> </span>CONTRIBUTING.md (貢獻指南)
<span class="k">-</span><span class="w"> </span>CHANGELOG.md (版本記錄)
</code></pre></div>

<p><strong>Day 53-54</strong>: 部署準備</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># requirements.txt</span>
<span class="nv">torch</span><span class="o">==</span><span class="m">2</span>.0.1
<span class="nv">transformers</span><span class="o">==</span><span class="m">4</span>.30.0
<span class="nv">sounddevice</span><span class="o">==</span><span class="m">0</span>.4.6
<span class="nv">scipy</span><span class="o">==</span><span class="m">1</span>.10.1
python-Levenshtein<span class="o">==</span><span class="m">0</span>.21.1
<span class="nv">gradio</span><span class="o">==</span><span class="m">4</span>.0.0

<span class="c1"># Docker 配置 (可選)</span>
FROM<span class="w"> </span>python:3.10-slim
WORKDIR<span class="w"> </span>/app
COPY<span class="w"> </span>requirements.txt<span class="w"> </span>.
RUN<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
COPY<span class="w"> </span>.<span class="w"> </span>.
CMD<span class="w"> </span><span class="o">[</span><span class="s2">&quot;python&quot;</span>,<span class="w"> </span><span class="s2">&quot;main.py&quot;</span><span class="o">]</span>
</code></pre></div>

<p><strong>Day 55-56</strong>: 正式發布<br />
- GitHub Release<br />
- 部署至雲端平台（Hugging Face Spaces / Render）<br />
- 公告與推廣</p>
<hr />
<h2>六、資料準備計劃</h2>
<h3>6.1 文稿資料庫建置</h3>
<h4>分類與數量規劃</h4>
<table>
<thead>
<tr>
<th>分類</th>
<th>難度分布</th>
<th>總數</th>
<th>來源</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>問候語</strong></td>
<td>E:10, M:4, H:1</td>
<td>15</td>
<td>日常用語</td>
</tr>
<tr>
<td><strong>自我介紹</strong></td>
<td>E:8, M:6, H:1</td>
<td>15</td>
<td>教材改編</td>
</tr>
<tr>
<td><strong>日常對話</strong></td>
<td>E:15, M:12, H:3</td>
<td>30</td>
<td>生活情境</td>
</tr>
<tr>
<td><strong>購物</strong></td>
<td>E:5, M:4, H:1</td>
<td>10</td>
<td>市場對話</td>
</tr>
<tr>
<td><strong>家庭</strong></td>
<td>E:5, M:4, H:1</td>
<td>10</td>
<td>家庭對話</td>
</tr>
<tr>
<td><strong>俗諺語</strong></td>
<td>E:2, M:8, H:5</td>
<td>15</td>
<td>台語諺語</td>
</tr>
<tr>
<td><strong>文學</strong></td>
<td>E:0, M:2, H:3</td>
<td>5</td>
<td>詩詞散文</td>
</tr>
<tr>
<td><strong>總計</strong></td>
<td>45, 40, 15</td>
<td><strong>100</strong></td>
<td>-</td>
</tr>
</tbody>
</table>
<h4>文稿範例（按難度）</h4>
<h5>Easy 級別 (5-15字)</h5>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">你好</span><span class="err">。</span><span class="p">(</span><span class="n">Lí</span><span class="w"> </span><span class="n">hó</span><span class="mf">.</span><span class="p">)</span>
<span class="mf">2.</span><span class="w"> </span><span class="n">食飽未</span><span class="err">？</span><span class="p">(</span><span class="n">Tsia</span><span class="err">̍</span><span class="n">h</span><span class="o">-</span><span class="n">pá</span><span class="w"> </span><span class="n">buē</span><span class="err">?</span><span class="p">)</span>
<span class="mf">3.</span><span class="w"> </span><span class="n">我愛你</span><span class="err">。</span><span class="p">(</span><span class="n">Guá</span><span class="w"> </span><span class="n">ài</span><span class="w"> </span><span class="n">lí</span><span class="mf">.</span><span class="p">)</span>
<span class="mf">4.</span><span class="w"> </span><span class="n">多謝你</span><span class="err">。</span><span class="p">(</span><span class="kr">To</span><span class="o">-</span><span class="n">siā</span><span class="w"> </span><span class="n">lí</span><span class="mf">.</span><span class="p">)</span>
<span class="mf">5.</span><span class="w"> </span><span class="n">你叫啥名</span><span class="err">？</span><span class="p">(</span><span class="n">Lí</span><span class="w"> </span><span class="n">kiò</span><span class="w"> </span><span class="n">siáⁿ</span><span class="o">-</span><span class="n">miâ</span><span class="err">?</span><span class="p">)</span>
<span class="mf">6.</span><span class="w"> </span><span class="n">我欲去學校</span><span class="err">。</span><span class="p">(</span><span class="n">Guá</span><span class="w"> </span><span class="n">beh</span><span class="w"> </span><span class="n">khì</span><span class="w"> </span><span class="n">ha</span><span class="err">̍</span><span class="n">k</span><span class="o">-</span><span class="n">hāu</span><span class="mf">.</span><span class="p">)</span>
<span class="mf">7.</span><span class="w"> </span><span class="n">今仔日天氣真好</span><span class="err">。</span><span class="p">(</span><span class="n">Kin</span><span class="o">-</span><span class="n">á</span><span class="o">-</span><span class="n">ji</span><span class="err">̍</span><span class="n">t</span><span class="w"> </span><span class="n">thinn</span><span class="o">-</span><span class="n">khì</span><span class="w"> </span><span class="n">tsin</span><span class="w"> </span><span class="n">hó</span><span class="mf">.</span><span class="p">)</span>
<span class="mf">8.</span><span class="w"> </span><span class="n">這个幾錢</span><span class="err">？</span><span class="p">(</span><span class="n">Tsit</span><span class="w"> </span><span class="n">ê</span><span class="w"> </span><span class="n">guī</span><span class="o">-</span><span class="n">tsé</span><span class="w"> </span><span class="n">tsînn</span><span class="err">?</span><span class="p">)</span>
<span class="mf">9.</span><span class="w"> </span><span class="n">我毋知</span><span class="err">。</span><span class="p">(</span><span class="n">Guá</span><span class="w"> </span><span class="n">m</span><span class="err">̄</span><span class="o">-</span><span class="n">tsai</span><span class="mf">.</span><span class="p">)</span>
<span class="mf">10.</span><span class="w"> </span><span class="n">請坐</span><span class="err">。</span><span class="p">(</span><span class="n">Tshiánn</span><span class="w"> </span><span class="n">tsē</span><span class="mf">.</span><span class="p">)</span>
</code></pre></div>

<h5>Medium 級別 (15-30字)</h5>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">我的名叫阿明</span><span class="err">，</span><span class="n">今年二十歲</span><span class="err">，</span><span class="n">佇台北讀冊</span><span class="err">。</span>
<span class="w">   </span><span class="p">(</span><span class="n">Guá</span><span class="w"> </span><span class="n">ê</span><span class="w"> </span><span class="n">miâ</span><span class="w"> </span><span class="n">kiò</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="n">bîng</span><span class="p">,</span><span class="w"> </span><span class="n">kin</span><span class="o">-</span><span class="n">nî</span><span class="w"> </span><span class="n">jī</span><span class="o">-</span><span class="n">tsa</span><span class="err">̍</span><span class="n">p</span><span class="w"> </span><span class="n">huè</span><span class="p">,</span><span class="w"> </span><span class="n">tī</span><span class="w"> </span><span class="n">Tâi</span><span class="o">-</span><span class="n">pak</span><span class="w"> </span><span class="n">tha</span><span class="err">̍</span><span class="n">k</span><span class="o">-</span><span class="n">chheh</span><span class="mf">.</span><span class="p">)</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">阮兜有五个人</span><span class="err">，</span><span class="n">阿爸</span><span class="err">、</span><span class="n">阿母</span><span class="err">、</span><span class="n">阮佮兩个小弟</span><span class="err">。</span>
<span class="w">   </span><span class="p">(</span><span class="n">Guán</span><span class="w"> </span><span class="n">tau</span><span class="w"> </span><span class="n">ū</span><span class="w"> </span><span class="n">gōo</span><span class="w"> </span><span class="n">ê</span><span class="w"> </span><span class="n">lâng</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">pah</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">bú</span><span class="p">,</span><span class="w"> </span><span class="n">guán</span><span class="w"> </span><span class="n">kah</span><span class="w"> </span><span class="n">nn</span><span class="err">̄</span><span class="n">g</span><span class="w"> </span><span class="n">ê</span><span class="w"> </span><span class="n">sió</span><span class="o">-</span><span class="n">tī</span><span class="mf">.</span><span class="p">)</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">這條路一直行過去</span><span class="err">，</span><span class="n">看著紅綠燈就倒手仔爿</span><span class="err">。</span>
<span class="w">   </span><span class="p">(</span><span class="n">Tsit</span><span class="w"> </span><span class="n">tiâu</span><span class="w"> </span><span class="n">lōo</span><span class="w"> </span><span class="n">it</span><span class="o">-</span><span class="n">ti</span><span class="err">̍</span><span class="n">t</span><span class="w"> </span><span class="n">kiânn</span><span class="w"> </span><span class="n">kuè</span><span class="o">-</span><span class="n">khì</span><span class="p">,</span><span class="w"> </span><span class="n">khuànn</span><span class="o">-</span><span class="n">tio</span><span class="err">̍</span><span class="n">h</span><span class="w"> </span><span class="n">âng</span><span class="o">-</span><span class="n">li</span><span class="err">̍</span><span class="n">k</span><span class="o">-</span><span class="n">ting</span><span class="w"> </span><span class="n">tō</span><span class="w"> </span><span class="n">tò</span><span class="o">-</span><span class="n">tshiú</span><span class="o">-</span><span class="n">á</span><span class="o">-</span><span class="n">pîng</span><span class="mf">.</span><span class="p">)</span>
</code></pre></div>

<h5>Hard 級別 (30+字)</h5>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">一枝草</span><span class="err">，</span><span class="n">一點露</span><span class="err">，</span><span class="n">天無絕人之路</span><span class="err">；</span><span class="n">日頭赤焱焱</span><span class="err">，</span><span class="n">隨人顧性命</span><span class="err">。</span>
<span class="w">   </span><span class="p">(</span><span class="n">Tsi</span><span class="err">̍</span><span class="n">t</span><span class="w"> </span><span class="n">ki</span><span class="w"> </span><span class="n">tsháu</span><span class="p">,</span><span class="w"> </span><span class="n">tsi</span><span class="err">̍</span><span class="n">t</span><span class="w"> </span><span class="n">tiám</span><span class="w"> </span><span class="n">lōo</span><span class="p">,</span><span class="w"> </span><span class="n">thinn</span><span class="w"> </span><span class="n">bô</span><span class="w"> </span><span class="n">tsa</span><span class="err">̍</span><span class="n">t</span><span class="w"> </span><span class="n">jîn</span><span class="w"> </span><span class="n">tsi</span><span class="w"> </span><span class="n">lo</span><span class="err">̍</span><span class="n">o</span><span class="p">;</span><span class="w"> </span><span class="n">ji</span><span class="err">̍</span><span class="n">t</span><span class="o">-</span><span class="n">thâu</span><span class="w"> </span><span class="n">tshiah</span><span class="o">-</span><span class="n">iānn</span><span class="o">-</span><span class="n">iānn</span><span class="p">,</span><span class="w"> </span><span class="n">suî</span><span class="w"> </span><span class="n">lâng</span><span class="w"> </span><span class="n">kòo</span><span class="w"> </span><span class="n">sìng</span><span class="o">-</span><span class="n">miā</span><span class="mf">.</span><span class="p">)</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">阮阿公講</span><span class="err">，</span><span class="n">伊細漢的時陣</span><span class="err">，</span><span class="n">生活真艱苦</span><span class="err">，</span><span class="n">逐工愛去田裡做穡</span><span class="err">，</span><span class="n">日時做甲烏暗才轉來兜</span><span class="err">。</span>
<span class="w">   </span><span class="p">(</span><span class="n">Guán</span><span class="w"> </span><span class="n">a</span><span class="o">-</span><span class="n">kong</span><span class="w"> </span><span class="n">kóng</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="n">sè</span><span class="o">-</span><span class="n">hàn</span><span class="w"> </span><span class="n">ê</span><span class="w"> </span><span class="n">sî</span><span class="o">-</span><span class="n">tsūn</span><span class="p">,</span><span class="w"> </span><span class="nb">sin</span><span class="n">g</span><span class="o">-</span><span class="n">ua</span><span class="err">̍</span><span class="n">h</span><span class="w"> </span><span class="n">tsin</span><span class="w"> </span><span class="n">kan</span><span class="o">-</span><span class="n">khóo</span><span class="p">,</span><span class="w"> </span><span class="n">ta</span><span class="err">̍</span><span class="n">k</span><span class="o">-</span><span class="n">kang</span><span class="w"> </span><span class="n">ài</span><span class="w"> </span><span class="n">khì</span><span class="w"> </span><span class="n">tshân</span><span class="o">-</span><span class="n">lí</span><span class="w"> </span><span class="n">tsò</span><span class="o">-</span><span class="n">sit</span><span class="p">,</span><span class="w"> </span><span class="n">ji</span><span class="err">̍</span><span class="n">t</span><span class="o">-</span><span class="n">sî</span><span class="w"> </span><span class="n">tsò</span><span class="w"> </span><span class="n">kah</span><span class="w"> </span><span class="n">oo</span><span class="o">-</span><span class="n">àm</span><span class="w"> </span><span class="n">tsiah</span><span class="w"> </span><span class="n">tńg</span><span class="o">-</span><span class="n">lâi</span><span class="w"> </span><span class="n">tau</span><span class="mf">.</span><span class="p">)</span>
</code></pre></div>

<h4>文稿品質控管流程</h4>
<div class="codehilite"><pre><span></span><code>Step 1: 初稿撰寫
  ↓
Step 2: 台語專家校驗
  ├─ 檢查漢字用字
  ├─ 確認台羅拼音正確性
  └─ 驗證聲調標記
  ↓
Step 3: 難度評估
  ├─ 字數統計
  ├─ 罕見詞彙檢查
  └─ 語法複雜度分析
  ↓
Step 4: 標籤分類
  ↓
Step 5: 錄入資料庫
  ↓
Step 6: 測試驗證
</code></pre></div>

<h3>6.2 測試音檔準備</h3>
<h4>錄製規範</h4>
<div class="codehilite"><pre><span></span><code><span class="nt">環境要求</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">地點</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">安靜室內空間</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">背景噪音</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt; 40 dB</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">迴音</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">最小化（可用軟材料吸音）</span>

<span class="nt">設備規格</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">麥克風</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">中等品質（非專業錄音室級）</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">距離</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15-30 公分</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">採樣率</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16000 Hz</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">格式</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">WAV (PCM)</span>

<span class="nt">錄製標準</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">語速</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">正常（每分鐘 150-200 字）</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">音量</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">適中（RMS 5000-15000）</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">清晰度</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">咬字清楚，不含糊</span>
</code></pre></div>

<h4>錄音者配置</h4>
<table>
<thead>
<tr>
<th>ID</th>
<th>性別</th>
<th>年齡</th>
<th>口音</th>
<th>台語程度</th>
<th>錄製數量</th>
</tr>
</thead>
<tbody>
<tr>
<td>S01</td>
<td>男</td>
<td>25-35</td>
<td>台北腔</td>
<td>流利</td>
<td>20 篇</td>
</tr>
<tr>
<td>S02</td>
<td>女</td>
<td>25-35</td>
<td>台北腔</td>
<td>流利</td>
<td>20 篇</td>
</tr>
<tr>
<td>S03</td>
<td>男</td>
<td>40-50</td>
<td>南部腔</td>
<td>母語</td>
<td>15 篇</td>
</tr>
<tr>
<td>S04</td>
<td>女</td>
<td>40-50</td>
<td>南部腔</td>
<td>母語</td>
<td>15 篇</td>
</tr>
<tr>
<td>S05</td>
<td>男/女</td>
<td>18-25</td>
<td>混合</td>
<td>中等</td>
<td>10 篇</td>
</tr>
</tbody>
</table>
<h4>音檔標註格式</h4>
<div class="codehilite"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;audio_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;audio_001_S01_easy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;text_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;text_001&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;speaker_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;S01&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;difficulty&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;easy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;recording_date&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2025-01-10&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;duration&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">3.2</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;sample_rate&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">16000</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;quality_check&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;rms&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">8500</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;snr_db&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;is_clipping&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;human_score&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">95</span><span class="p">,</span><span class="w">  </span><span class="c1">// 人工評分（用於驗證）</span>
<span class="w">  </span><span class="nt">&quot;notes&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span>
<span class="p">}</span>
</code></pre></div>

<h3>6.3 評分標準建立</h3>
<h4>專家評分指引</h4>
<div class="codehilite"><pre><span></span><code><span class="gu">## 台語發音評分準則</span>

<span class="gu">### 評分維度 (總分 100)</span>

<span class="k">1.</span> <span class="gs">**音節正確性 (50 分)**</span>
<span class="w">   </span><span class="k">-</span><span class="w"> </span>聲母正確: 20 分
<span class="w">   </span><span class="k">-</span><span class="w"> </span>韻母正確: 20 分
<span class="w">   </span><span class="k">-</span><span class="w"> </span>音節完整: 10 分

<span class="k">2.</span> <span class="gs">**聲調準確度 (30 分)**</span>
<span class="w">   </span><span class="k">-</span><span class="w"> </span>調值正確: 30 分
<span class="w">   </span><span class="k">-</span><span class="w"> </span>(台語7調+輕聲)

<span class="k">3.</span> <span class="gs">**流暢度 (20 分)**</span>
<span class="w">   </span><span class="k">-</span><span class="w"> </span>斷句自然: 10 分
<span class="w">   </span><span class="k">-</span><span class="w"> </span>速度適中: 5 分
<span class="w">   </span><span class="k">-</span><span class="w"> </span>無停頓: 5 分

<span class="gu">### 評分細則</span>

<span class="gs">**優秀 (90-100)**</span>
<span class="k">-</span><span class="w"> </span>發音標準，無明顯錯誤
<span class="k">-</span><span class="w"> </span>聲調準確，符合變調規則
<span class="k">-</span><span class="w"> </span>流暢自然

<span class="gs">**良好 (80-89)**</span>
<span class="k">-</span><span class="w"> </span>發音清晰，1-2處小錯
<span class="k">-</span><span class="w"> </span>聲調大致正確
<span class="k">-</span><span class="w"> </span>稍有停頓

<span class="gs">**尚可 (70-79)**</span>
<span class="k">-</span><span class="w"> </span>基本可理解
<span class="k">-</span><span class="w"> </span>3-4處錯誤
<span class="k">-</span><span class="w"> </span>聲調偶有錯誤

<span class="gs">**待改進 (60-69)**</span>
<span class="k">-</span><span class="w"> </span>多處明顯錯誤
<span class="k">-</span><span class="w"> </span>聲調不穩定
<span class="k">-</span><span class="w"> </span>影響理解

<span class="gs">**需重學 (&lt;60)**</span>
<span class="k">-</span><span class="w"> </span>無法理解
<span class="k">-</span><span class="w"> </span>嚴重錯誤
<span class="k">-</span><span class="w"> </span>需重新學習
</code></pre></div>

<hr />
<h2>七、風險評估與應對</h2>
<h3>7.1 技術風險矩陣</h3>
<table>
<thead>
<tr>
<th>風險項目</th>
<th>機率</th>
<th>影響</th>
<th>風險等級</th>
<th>應對策略</th>
</tr>
</thead>
<tbody>
<tr>
<td>Whisper 輸出格式不符預期</td>
<td>高</td>
<td>高</td>
<td>🔴 高</td>
<td>備用漢字轉台羅方案</td>
</tr>
<tr>
<td>辨識準確率低於預期</td>
<td>中</td>
<td>高</td>
<td>🟠 中高</td>
<td>音訊前處理 + 模型微調</td>
</tr>
<tr>
<td>錄音品質不穩定</td>
<td>中</td>
<td>中</td>
<td>🟡 中</td>
<td>品質檢查機制</td>
</tr>
<tr>
<td>評分標準爭議</td>
<td>中</td>
<td>中</td>
<td>🟡 中</td>
<td>專家委員會制定</td>
</tr>
<tr>
<td>模型推理速度慢</td>
<td>低</td>
<td>中</td>
<td>🟢 低</td>
<td>GPU加速/模型量化</td>
</tr>
<tr>
<td>系統穩定性問題</td>
<td>低</td>
<td>高</td>
<td>🟡 中</td>
<td>完善錯誤處理</td>
</tr>
</tbody>
</table>
<h3>7.2 應對措施詳解</h3>
<h4>🔴 風險1: Whisper 輸出格式不符</h4>
<p><strong>情境</strong>: 模型輸出漢字而非台羅</p>
<p><strong>方案A</strong>: 整合台灣言語工具</p>
<div class="codehilite"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">tai5_uan5_gian5_gi2_kang1_ku7</span><span class="w"> </span><span class="kn">import</span> <span class="n">TaiBunTaigiHuanLoGiSuKhiPhing</span>

<span class="k">def</span><span class="w"> </span><span class="nf">hanzi_to_tailo_v1</span><span class="p">(</span><span class="n">hanzi</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;使用台灣言語工具轉換&quot;&quot;&quot;</span>
    <span class="n">converter</span> <span class="o">=</span> <span class="n">TaiBunTaigiHuanLoGiSuKhiPhing</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tailo</span> <span class="o">=</span> <span class="n">converter</span><span class="o">.</span><span class="n">chu_im</span><span class="p">(</span><span class="n">hanzi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tailo</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;轉換失敗: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>

<p><strong>方案B</strong>: 自建漢字-台羅對照表</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 建立常用詞對照字典</span>
<span class="n">HANZI_TAILO_DICT</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;你好&quot;</span><span class="p">:</span> <span class="s2">&quot;Lí hó&quot;</span><span class="p">,</span>
    <span class="s2">&quot;食飽未&quot;</span><span class="p">:</span> <span class="s2">&quot;Tsia̍h-pá buē&quot;</span><span class="p">,</span>
    <span class="s2">&quot;多謝&quot;</span><span class="p">:</span> <span class="s2">&quot;To-siā&quot;</span><span class="p">,</span>
    <span class="c1"># ... 擴充至 1000+ 詞條</span>
<span class="p">}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">hanzi_to_tailo_v2</span><span class="p">(</span><span class="n">hanzi</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;字典查詢轉換&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">HANZI_TAILO_DICT</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">hanzi</span><span class="p">,</span> <span class="n">hanzi</span><span class="p">)</span>
</code></pre></div>

<p><strong>方案C</strong>: 降級為漢字比對</p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fallback_scoring</span><span class="p">(</span><span class="n">ref_hanzi</span><span class="p">,</span> <span class="n">rec_hanzi</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;漢字比對（精度較低）&quot;&quot;&quot;</span>
    <span class="c1"># 僅比對漢字，無法評估發音細節</span>
    <span class="k">return</span> <span class="n">levenshtein_distance</span><span class="p">(</span><span class="n">ref_hanzi</span><span class="p">,</span> <span class="n">rec_hanzi</span><span class="p">)</span>
</code></pre></div>

<h4>🟠 風險2: 辨識準確率不足</h4>
<p><strong>策略1</strong>: 音訊前處理</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">noisereduce</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">nr</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">librosa</span>

<span class="k">def</span><span class="w"> </span><span class="nf">preprocess_audio</span><span class="p">(</span><span class="n">audio_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;音訊前處理流程&quot;&quot;&quot;</span>
    <span class="c1"># 1. 載入音訊</span>
    <span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">audio_path</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">16000</span><span class="p">)</span>

    <span class="c1"># 2. 降噪</span>
    <span class="n">y_denoised</span> <span class="o">=</span> <span class="n">nr</span><span class="o">.</span><span class="n">reduce_noise</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>

    <span class="c1"># 3. 音量正規化</span>
    <span class="n">y_normalized</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">y_denoised</span><span class="p">)</span>

    <span class="c1"># 4. 靜音移除</span>
    <span class="n">y_trimmed</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">effects</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span><span class="n">y_normalized</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">y_trimmed</span><span class="p">,</span> <span class="n">sr</span>
</code></pre></div>

<p><strong>策略2</strong>: 收集錯誤案例</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 建立錯誤案例資料庫</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ErrorCaseDB</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;錯誤案例追蹤&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">audio_path</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="n">recognized</span><span class="p">,</span> <span class="n">score</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;記錄辨識錯誤&quot;&quot;&quot;</span>
        <span class="n">error_case</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;timestamp&#39;</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(),</span>
            <span class="s1">&#39;audio&#39;</span><span class="p">:</span> <span class="n">audio_path</span><span class="p">,</span>
            <span class="s1">&#39;expected&#39;</span><span class="p">:</span> <span class="n">expected</span><span class="p">,</span>
            <span class="s1">&#39;recognized&#39;</span><span class="p">:</span> <span class="n">recognized</span><span class="p">,</span>
            <span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="n">score</span><span class="p">,</span>
            <span class="s1">&#39;edit_distance&#39;</span><span class="p">:</span> <span class="n">levenshtein_distance</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">recognized</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="c1"># 儲存至資料庫</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_to_db</span><span class="p">(</span><span class="n">error_case</span><span class="p">)</span>

        <span class="c1"># 如果累積100個案例，觸發分析</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_count</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analyze_patterns</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">analyze_patterns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;分析錯誤模式&quot;&quot;&quot;</span>
        <span class="c1"># 找出常見錯誤類型</span>
        <span class="c1"># 用於改進模型或評分機制</span>
        <span class="k">pass</span>
</code></pre></div>

<p><strong>策略3</strong>: 提示使用者改善錄音</p>
<div class="codehilite"><pre><span></span><code><span class="n">RECORDING_TIPS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">📌 錄音小技巧:</span>
<span class="s2">1. 找一個安靜的環境</span>
<span class="s2">2. 麥克風距離嘴巴 15-30 公分</span>
<span class="s2">3. 音量適中，不要太大聲或太小聲</span>
<span class="s2">4. 咬字清楚，語速正常</span>
<span class="s2">5. 避免背景音樂或電視聲</span>
<span class="s2">&quot;&quot;&quot;</span>
</code></pre></div>

<h4>🟡 風險3: 評分標準爭議</h4>
<p><strong>應對</strong>: 建立評分委員會</p>
<div class="codehilite"><pre><span></span><code>組成:
- 台語教師 x 2
- 台語研究者 x 1  
- 技術開發者 x 1
- 使用者代表 x 1

職責:
1. 制定詳細評分準則
2. 標註測試集標準答案
3. 定期檢視評分爭議案例
4. 調整評分權重
</code></pre></div>

<h4>🟢 風險4: 效能優化</h4>
<p><strong>方案1</strong>: 模型量化</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 使用 INT8 量化減少模型大小</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">optimum.onnxruntime</span><span class="w"> </span><span class="kn">import</span> <span class="n">ORTModelForSpeechSeq2Seq</span>

<span class="n">quantized_model</span> <span class="o">=</span> <span class="n">ORTModelForSpeechSeq2Seq</span><span class="o">.</span><span class="n">from_pretrained</span><span class="p">(</span>
    <span class="n">MODEL_NAME</span><span class="p">,</span>
    <span class="n">export</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;CPUExecutionProvider&quot;</span>
<span class="p">)</span>
</code></pre></div>

<p><strong>方案2</strong>: GPU 加速</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># 確保安裝 CUDA 版本的 PyTorch</span>
pip<span class="w"> </span>install<span class="w"> </span>torch<span class="w"> </span>torchvision<span class="w"> </span>torchaudio<span class="w"> </span>--index-url<span class="w"> </span>https://download.pytorch.org/whl/cu118
</code></pre></div>

<p><strong>方案3</strong>: 非同步處理</p>
<div class="codehilite"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_recognize</span><span class="p">(</span><span class="n">audio_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;非同步辨識&quot;&quot;&quot;</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">loop</span><span class="o">.</span><span class="n">run_in_executor</span><span class="p">(</span>
        <span class="kc">None</span><span class="p">,</span> 
        <span class="n">whisper</span><span class="o">.</span><span class="n">transcribe</span><span class="p">,</span>
        <span class="n">audio_path</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div>

<hr />
<h2>八、時程與里程碑</h2>
<h3>8.1 詳細甘特圖</h3>
<div class="codehilite"><pre><span></span><code><span class="mf">2025</span><span class="n">年1月</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">2</span><span class="n">月</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">1</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">環境建置</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">Python環境配置</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">套件安裝</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">專案結構建立</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">Whisper模型下載</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">模型測試</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">2</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">驗證實驗</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">輸出格式測試</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">準備測試資料</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">錄音功能驗證</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">辨識準確率測試</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">技術可行性報告</span>
<span class="w">        </span><span class="err">✅</span><span class="w"> </span><span class="n">里程碑1</span><span class="p">:</span><span class="w"> </span><span class="n">技術驗證完成</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">3</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">核心開發</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">TextManager開發</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">文稿資料庫建立</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">AudioRecorder開發</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">錄音測試</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">TextProcessor開發</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">4</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">評分引擎</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">TaiwaneseScorer開發</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">評分演算法實作</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">Whisper整合</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">端對端測試</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">Bug修復</span>
<span class="w">        </span><span class="err">✅</span><span class="w"> </span><span class="n">里程碑2</span><span class="p">:</span><span class="w"> </span><span class="n">核心功能完成</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">5</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">介面開發</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">Gradio基礎介面</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">事件綁定</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">結果展示設計</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">UI</span><span class="o">/</span><span class="n">UX優化</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">錯誤處理</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">6</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">測試優化</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">使用者測試</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">收集回饋</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">Bug修復</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">效能優化</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">功能凍結</span>
<span class="w">        </span><span class="err">✅</span><span class="w"> </span><span class="n">里程碑3</span><span class="p">:</span><span class="w"> </span><span class="n">MVP完成</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">7</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">系統測試</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">功能測試</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">效能測試</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">壓力測試</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">回歸測試</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">測試報告</span>

<span class="n">Week</span><span class="w"> </span><span class="mf">8</span><span class="w">  </span><span class="err">[</span><span class="o">====</span><span class="n">部署發布</span><span class="o">====</span><span class="err">]</span>
<span class="w">  </span><span class="n">Mon</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">文件撰寫</span>
<span class="w">  </span><span class="n">Tue</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="kr">READ</span><span class="n">ME完成</span>
<span class="w">  </span><span class="n">Wed</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">部署準備</span>
<span class="w">  </span><span class="n">Thu</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">雲端部署</span>
<span class="w">  </span><span class="n">Fri</span><span class="w">   </span><span class="err">███</span><span class="w"> </span><span class="n">正式發布</span>
<span class="w">        </span><span class="err">✅</span><span class="w"> </span><span class="n">里程碑4</span><span class="p">:</span><span class="w"> </span><span class="n">正式上線</span>
</code></pre></div>

<h3>8.2 關鍵里程碑</h3>
<table>
<thead>
<tr>
<th>日期</th>
<th>里程碑</th>
<th>交付物</th>
<th>驗收標準</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Week 2</strong></td>
<td>技術驗證完成</td>
<td>可行性報告</td>
<td>✅ 模型可運作<br>✅ 辨識率&gt;70%<br>✅ 確認輸出格式</td>
</tr>
<tr>
<td><strong>Week 4</strong></td>
<td>核心功能完成</td>
<td>CLI 可執行版本</td>
<td>✅ 錄音正常<br>✅ 辨識正常<br>✅ 評分正常</td>
</tr>
<tr>
<td><strong>Week 6</strong></td>
<td>MVP 完成</td>
<td>Web 介面版本</td>
<td>✅ 介面可用<br>✅ 端對端流程完整<br>✅ SUS&gt;70</td>
</tr>
<tr>
<td><strong>Week 8</strong></td>
<td>正式發布</td>
<td>生產版本</td>
<td>✅ 通過所有測試<br>✅ 文件完整<br>✅ 已部署上線</td>
</tr>
</tbody>
</table>
<h3>8.3 彈性調整機制</h3>
<div class="codehilite"><pre><span></span><code><span class="err">風險緩衝時間</span><span class="o">:</span><span class="w"> </span><span class="err">每個階段預留</span><span class="w"> </span><span class="mi">10</span><span class="o">%</span><span class="w"> </span><span class="err">時間</span>

<span class="err">調整原則</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="err">若</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="err">輸出格式測試發現問題</span>
<span class="w">   </span><span class="err">→</span><span class="w"> </span><span class="err">延長</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">週開發轉換工具</span>

<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">若</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="err">核心功能延遲</span>
<span class="w">   </span><span class="err">→</span><span class="w"> </span><span class="err">壓縮</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">介面開發時間</span>
<span class="w">   </span><span class="err">→</span><span class="w"> </span><span class="err">或延後發布</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="err">週</span>

<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">若</span><span class="w"> </span><span class="n">Week</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="err">使用者測試發現重大問題</span>
<span class="w">   </span><span class="err">→</span><span class="w"> </span><span class="err">立即修復，延後非關鍵功能</span>

<span class="err">緊急應變</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="err">技術阻礙</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">啟動備案方案</span>
<span class="o">-</span><span class="w"> </span><span class="err">資源不足</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">縮減功能範圍至核心</span><span class="n">MVP</span>
<span class="o">-</span><span class="w"> </span><span class="err">時程壓力</span><span class="w"> </span><span class="err">→</span><span class="w"> </span><span class="err">砍掉非必要功能（如歷史記錄）</span>
</code></pre></div>

<hr />
<h2>九、預期成果與評估</h2>
<h3>9.1 量化指標</h3>
<table>
<thead>
<tr>
<th>類別</th>
<th>指標</th>
<th>目標值</th>
<th>測量方式</th>
<th>重要性</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>效能</strong></td>
<td>辨識準確率 (WER)</td>
<td>≥ 85%</td>
<td>100筆測試音檔</td>
<td>⭐⭐⭐</td>
</tr>
<tr>
<td><strong>效能</strong></td>
<td>系統回應時間</td>
<td>≤ 5秒</td>
<td>平均處理時間</td>
<td>⭐⭐⭐</td>
</tr>
<tr>
<td><strong>效能</strong></td>
<td>錄音成功率</td>
<td>≥ 95%</td>
<td>100次錄音操作</td>
<td>⭐⭐</td>
</tr>
<tr>
<td><strong>準確</strong></td>
<td>評分相關係數</td>
<td>≥ 0.80</td>
<td>與專家評分比較</td>
<td>⭐⭐⭐</td>
</tr>
<tr>
<td><strong>準確</strong></td>
<td>評分一致性</td>
<td>≥ 0.85</td>
<td>重複測試變異數</td>
<td>⭐⭐</td>
</tr>
<tr>
<td><strong>品質</strong></td>
<td>代碼覆蓋率</td>
<td>≥ 60%</td>
<td>pytest-cov</td>
<td>⭐⭐</td>
</tr>
<tr>
<td><strong>體驗</strong></td>
<td>使用者滿意度 (SUS)</td>
<td>≥ 70分</td>
<td>SUS問卷</td>
<td>⭐⭐⭐</td>
</tr>
<tr>
<td><strong>體驗</strong></td>
<td>任務完成率</td>
<td>≥ 90%</td>
<td>可用性測試</td>
<td>⭐⭐</td>
</tr>
</tbody>
</table>
<h3>9.2 質化成果</h3>
<h4>功能完整性</h4>
<ul>
<li>✅ 完整的錄音→辨識→評分流程</li>
<li>✅ 多難度文稿系統</li>
<li>✅ 詳細評分報告與建議</li>
<li>✅ 友善的使用者介面</li>
<li>✅ 錯誤處理與提示</li>
</ul>
<h4>技術成果</h4>
<ul>
<li>✅ 台語 Whisper 模型整合</li>
<li>✅ 台羅拼音處理工具</li>
<li>✅ 多維度評分演算法</li>
<li>✅ 可擴展的架構設計</li>
</ul>
<h4>產出清單</h4>
<p><strong>程式碼</strong></p>
<div class="codehilite"><pre><span></span><code>taiwanese-pronunciation-scorer/
├── README.md                    ✅ 專案說明
├── requirements.txt             ✅ 依賴套件
├── main.py                      ✅ 主程式
├── text_manager.py              ✅ 文稿管理
├── recorder.py                  ✅ 錄音模組
├── whisper_model.py             ✅ 語音辨識
├── scorer.py                    ✅ 評分引擎
├── text_processor.py            ✅ 文字處理
├── config.py                    ✅ 配置檔
├── utils.py                     ✅ 工具函式
├── tests/                       ✅ 單元測試
│   ├── test_text_manager.py
│   ├── test_recorder.py
│   ├── test_scorer.py
│   └── ...
├── data/
│   └── texts.json               ✅ 文稿資料庫 (100篇)
├── docs/
│   ├── INSTALL.md               ✅ 安裝指南
│   ├── USER_GUIDE.md            ✅ 使用手冊
│   ├── API.md                   ✅ API文件
│   └── ARCHITECTURE.md          ✅ 架構說明
└── examples/                    ✅ 使用範例
</code></pre></div>

<p><strong>資料集</strong><br />
- ✅ 台語文稿庫: 100+ 篇（分級分類）<br />
- ✅ 測試音檔集: 50+ 個（多說話者）<br />
- ✅ 評分標準文件<br />
- ✅ 錯誤案例資料庫</p>
<p><strong>文件</strong><br />
- ✅ 技術白皮書<br />
- ✅ 評分準則手冊<br />
- ✅ 開發者指南<br />
- ✅ 測試報告<br />
- ✅ 使用者手冊</p>
<h3>9.3 評估方法</h3>
<h4>A. 技術評估</h4>
<p><strong>辨識準確率測試</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">evaluate_recognition_accuracy</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;評估辨識準確率&quot;&quot;&quot;</span>
    <span class="n">test_set</span> <span class="o">=</span> <span class="n">load_test_audios</span><span class="p">()</span>  <span class="c1"># 100個測試音檔</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">audio</span><span class="p">,</span> <span class="n">ground_truth</span> <span class="ow">in</span> <span class="n">test_set</span><span class="p">:</span>
        <span class="n">recognized</span> <span class="o">=</span> <span class="n">whisper</span><span class="o">.</span><span class="n">transcribe</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>
        <span class="n">wer</span> <span class="o">=</span> <span class="n">calculate_wer</span><span class="p">(</span><span class="n">ground_truth</span><span class="p">,</span> <span class="n">recognized</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wer</span><span class="p">)</span>

    <span class="n">avg_wer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">accuracy</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">avg_wer</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;辨識準確率: </span><span class="si">{</span><span class="n">accuracy</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">accuracy</span>
</code></pre></div>

<p><strong>評分準確性測試</strong></p>
<div class="codehilite"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">evaluate_scoring_accuracy</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;評估評分準確性&quot;&quot;&quot;</span>
    <span class="n">test_cases</span> <span class="o">=</span> <span class="n">load_expert_scored_cases</span><span class="p">()</span>  <span class="c1"># 50個專家已評分案例</span>

    <span class="n">system_scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">expert_scores</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">case</span> <span class="ow">in</span> <span class="n">test_cases</span><span class="p">:</span>
        <span class="n">sys_score</span> <span class="o">=</span> <span class="n">scorer</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">case</span><span class="p">[</span><span class="s1">&#39;reference&#39;</span><span class="p">],</span> <span class="n">case</span><span class="p">[</span><span class="s1">&#39;recognized&#39;</span><span class="p">])</span>
        <span class="n">system_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sys_score</span><span class="p">[</span><span class="s1">&#39;final_score&#39;</span><span class="p">])</span>
        <span class="n">expert_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">case</span><span class="p">[</span><span class="s1">&#39;expert_score&#39;</span><span class="p">])</span>

    <span class="c1"># 計算皮爾森相關係數</span>
    <span class="n">correlation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">corrcoef</span><span class="p">(</span><span class="n">system_scores</span><span class="p">,</span> <span class="n">expert_scores</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;評分相關係數: </span><span class="si">{</span><span class="n">correlation</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">correlation</span>
</code></pre></div>

<h4>B. 使用者評估</h4>
<p><strong>SUS 問卷（System Usability Scale）</strong></p>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="n">我認為我會經常使用這個系統</span><span class="err">。</span>
<span class="w">   </span><span class="err">□</span><span class="w"> </span><span class="n">強烈不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">中立</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">強烈同意</span>

<span class="mf">2.</span><span class="w"> </span><span class="n">我覺得這個系統太複雜了</span><span class="err">。</span>
<span class="w">   </span><span class="err">□</span><span class="w"> </span><span class="n">強烈不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">中立</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">強烈同意</span>

<span class="mf">3.</span><span class="w"> </span><span class="n">我覺得這個系統很容易使用</span><span class="err">。</span>
<span class="w">   </span><span class="err">□</span><span class="w"> </span><span class="n">強烈不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">中立</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">強烈同意</span>

<span class="mf">4.</span><span class="w"> </span><span class="n">我需要技術人員的幫助才能使用這個系統</span><span class="err">。</span>
<span class="w">   </span><span class="err">□</span><span class="w"> </span><span class="n">強烈不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">中立</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">強烈同意</span>

<span class="mf">5.</span><span class="w"> </span><span class="n">我覺得這個系統的各項功能整合得很好</span><span class="err">。</span>
<span class="w">   </span><span class="err">□</span><span class="w"> </span><span class="n">強烈不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">不同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">中立</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">同意</span><span class="w">  </span><span class="err">□</span><span class="w"> </span><span class="n">強烈同意</span>

<span class="mf">...</span><span class="w"> </span><span class="p">(</span><span class="n">共10題</span><span class="p">)</span>

<span class="n">計分公式</span><span class="p">:</span>
<span class="n">SUS分數</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">[</span><span class="p">(</span><span class="n">奇數題總分</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="mf">25</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">偶數題總分</span><span class="p">)</span><span class="err">]</span><span class="w"> </span><span class="err">×</span><span class="w"> </span><span class="mf">2.5</span>

<span class="n">評估標準</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="mf">90</span><span class="o">-</span><span class="mf">100</span><span class="p">:</span><span class="w"> </span><span class="n">優秀</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="o">+</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="mf">80</span><span class="o">-</span><span class="mf">89</span><span class="p">:</span><span class="w">  </span><span class="n">良好</span><span class="w"> </span><span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="mf">70</span><span class="o">-</span><span class="mf">79</span><span class="p">:</span><span class="w">  </span><span class="n">尚可</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="mf">60</span><span class="o">-</span><span class="mf">69</span><span class="p">:</span><span class="w">  </span><span class="n">待改進</span><span class="w"> </span><span class="p">(</span><span class="n">C</span><span class="p">)</span>
<span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="mf">60</span><span class="p">:</span><span class="w">    </span><span class="n">不及格</span><span class="w"> </span><span class="p">(</span><span class="n">F</span><span class="p">)</span>
</code></pre></div>

<p><strong>任務完成率測試</strong></p>
<div class="codehilite"><pre><span></span><code><span class="err">測試任務</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="err">選擇一個簡單難度的文稿</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">錄製朗讀音檔</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">提交並查看評分結果</span>
<span class="mi">4</span><span class="o">.</span><span class="w"> </span><span class="err">理解評分報告內容</span>
<span class="mi">5</span><span class="o">.</span><span class="w"> </span><span class="err">重新練習一次</span>

<span class="err">成功標準</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="err">能獨立完成</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">個任務</span>
<span class="o">-</span><span class="w"> </span><span class="err">完成時間</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="err">分鐘</span>
<span class="o">-</span><span class="w"> </span><span class="err">無需求助</span>

<span class="err">目標</span><span class="o">:</span><span class="w"> </span><span class="err">≥</span><span class="w"> </span><span class="mi">90</span><span class="o">%</span><span class="w"> </span><span class="err">使用者完成率</span>
</code></pre></div>

<hr />
<h2>十、後續擴展規劃</h2>
<h3>10.1 短期優化（3個月內）</h3>
<h4>功能增強</h4>
<ul>
<li>[ ] <strong>增加文稿數量</strong>: 擴充至 500 篇</li>
<li>[ ] <strong>細緻化評分</strong>: </li>
<li>聲母/韻母/聲調分別評分</li>
<li>變調規則檢查</li>
<li>語速分析</li>
<li>[ ] <strong>學習輔助</strong>:</li>
<li>播放標準音檔示範</li>
<li>逐句練習模式</li>
<li>錯誤音節重點提示</li>
</ul>
<h4>技術改進</h4>
<ul>
<li>[ ] <strong>效能優化</strong>:</li>
<li>模型量化減少記憶體</li>
<li>實作快取機制</li>
<li>非同步處理</li>
<li>[ ] <strong>資料收集</strong>:</li>
<li>使用者錄音資料（匿名化）</li>
<li>錯誤模式分析</li>
<li>用於模型微調</li>
</ul>
<h3>10.2 中期功能（6個月內）</h3>
<h4>互動功能</h4>
<ul>
<li>[ ] <strong>學習歷程追蹤</strong><br />
  ```<br />
  功能:</li>
<li>記錄每次練習成績</li>
<li>顯示進步曲線圖</li>
<li>統計弱點分布</li>
<li>
<p>生成學習報告<br />
  ```</p>
</li>
<li>
<p>[ ] <strong>多人模式</strong><br />
  ```<br />
  功能:</p>
</li>
<li>班級管理（教師端）</li>
<li>學生進度追蹤</li>
<li>排行榜系統</li>
<li>
<p>競賽活動<br />
  ```</p>
</li>
<li>
<p>[ ] <strong>行動APP</strong><br />
  ```<br />
  平台:</p>
</li>
<li>iOS (Swift / React Native)</li>
<li>Android (Kotlin / React Native)</li>
</ul>
<p>額外功能:<br />
  - 離線使用（模型本地化）<br />
  - 推播通知提醒練習<br />
  - 社群分享<br />
  ```</p>
<h4>進階評分</h4>
<ul>
<li>[ ] <strong>語音特徵分析</strong><br />
  ```python<br />
  import librosa</li>
</ul>
<p>def analyze_prosody(audio):<br />
      """韻律分析"""<br />
      # 音高 (Pitch)<br />
      pitch = librosa.yin(audio, sr=16000)</p>
<div class="codehilite"><pre><span></span><code><span class="w">  </span><span class="c1"># 能量 (Energy)</span>
<span class="w">  </span><span class="n">energy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">rms</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">audio</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="w">  </span><span class="c1"># 語速 (Speaking Rate)</span>
<span class="w">  </span><span class="n">tempo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">estimate_tempo</span><span class="p">(</span><span class="n">audio</span><span class="p">)</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="s1">&#39;pitch_variation&#39;</span><span class="p">:</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">pitch</span><span class="p">),</span>
<span class="w">      </span><span class="s1">&#39;avg_energy&#39;</span><span class="p">:</span><span class="w"> </span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">energy</span><span class="p">),</span>
<span class="w">      </span><span class="s1">&#39;speaking_rate&#39;</span><span class="p">:</span><span class="w"> </span><span class="n">tempo</span>
<span class="w">  </span><span class="p">}</span>
</code></pre></div>

<p>```</p>
<ul>
<li>[ ] <strong>方言差異支援</strong><br />
  ```<br />
  方言類型:</li>
<li>泉州腔</li>
<li>漳州腔</li>
<li>混合腔</li>
<li>海口腔</li>
</ul>
<p>實作:<br />
  - 每種方言獨立的評分標準<br />
  - 方言特徵標註<br />
  - 自動識別方言類型<br />
  ```</p>
<h3>10.3 長期願景（1年內）</h3>
<h4>AI 語音教練</h4>
<div class="codehilite"><pre><span></span><code><span class="err">智能化功能</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="err">發音診斷</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">自動識別常見錯誤</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">針對性練習推薦</span>

<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">個人化課程</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">根據程度自動調整難度</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">智能生成練習內容</span>

<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">語音合成</span><span class="w"> </span><span class="o">(</span><span class="n">TTS</span><span class="o">)</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">提供標準發音示範</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">逐字播放功能</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">調整語速功能</span>
</code></pre></div>

<h4>多語言擴展</h4>
<div class="codehilite"><pre><span></span><code>新增語言:
- 客家語（四縣腔、海陸腔）
- 原住民語（阿美語、排灣語等）
- 其他閩南語方言（廈門話、潮州話）

技術挑戰:
- 各語言專用 Whisper 模型
- 羅馬拼音系統差異
- 評分標準制定
</code></pre></div>

<h4>社群平台</h4>
<div class="codehilite"><pre><span></span><code><span class="err">功能設計</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="err">使用者社群</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">分享學習心得</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">互相批改練習</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">問答討論區</span>

<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">教師資源</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">教案分享</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">測驗卷生成</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">班級管理工具</span>

<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">內容貢獻</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">使用者上傳文稿</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">社群審核機制</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">貢獻者排行榜</span>
</code></pre></div>

<h4>與教育機構合作</h4>
<div class="codehilite"><pre><span></span><code><span class="err">合作模式</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="err">學校授權版</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">客製化功能</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">學生資料管理</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">成績匯出報表</span>

<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">教材整合</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">搭配課本使用</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">同步課程進度</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">考試模擬</span>

<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">師資培訓</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">教師使用指導</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">教學工作坊</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="err">技術支援</span>
</code></pre></div>

<h3>10.4 商業化可能性</h3>
<h4>免費增值模式 (Freemium)</h4>
<div class="codehilite"><pre><span></span><code>免費版:
- 每日 10 次練習
- 基礎文稿庫 (100篇)
- 簡易評分報告

付費版 (NT$ 99/月):
- 無限練習次數
- 完整文稿庫 (1000+篇)
- 詳細分析報告
- 學習歷程追蹤
- 無廣告
- 離線使用
</code></pre></div>

<h4>企業/學校授權</h4>
<div class="codehilite"><pre><span></span><code>方案:
- 學校授權: NT$ 10,000/年 (50人以下)
- 企業方案: 客製報價

附加服務:
- 技術支援
- 客製化功能
- 資料分析報告
- 使用培訓
</code></pre></div>

<hr />
<h2>十一、附錄</h2>
<h3>A. 開發環境需求</h3>
<h4>硬體需求</h4>
<div class="codehilite"><pre><span></span><code>最低配置:
- CPU: Intel i5 第8代 / AMD Ryzen 5
- RAM: 8GB
- 硬碟: 10GB 可用空間
- 麥克風: 任何可用的輸入裝置

建議配置:
- CPU: Intel i7 第10代+ / AMD Ryzen 7
- RAM: 16GB+
- 硬碟: 20GB SSD
- GPU: NVIDIA GTX 1660 以上 (可選)
- 麥克風: 中等品質外接麥克風

理想配置 (開發/測試):
- CPU: Intel i9 / AMD Ryzen 9
- RAM: 32GB
- 硬碟: 50GB NVMe SSD
- GPU: NVIDIA RTX 3060+
- 麥克風: 專業級 USB 麥克風
</code></pre></div>

<h4>軟體需求</h4>
<div class="codehilite"><pre><span></span><code>作業系統:
- Windows: 10 / 11 (64-bit)
- macOS: 11+ (Big Sur, Monterey, Ventura)
- Linux: Ubuntu 20.04+ / Debian 11+

Python:
- 版本: 3.9, 3.10, 3.11 (推薦 3.10)
- 不支援: &lt; 3.9, 3.12+ (套件相容性)

CUDA (使用GPU時):
- 版本: 11.8 或 12.1
- cuDNN: 8.9+

其他工具:
- Git: 最新版本
- FFmpeg: 最新版本 (音訊處理)
</code></pre></div>

<h3>B. 套件依賴清單</h3>
<div class="codehilite"><pre><span></span><code># requirements.txt

# 核心套件
torch==2.0.1
transformers==4.30.2
sounddevice==0.4.6
scipy==1.10.1
numpy==1.24.3

# 文字處理
python-Levenshtein==0.21.1

# 介面
gradio==4.0.2

# 音訊處理 (可選)
librosa==0.10.0
noisereduce==3.0.0

# 資料處理
pandas==2.0.3

# 工具
python-dotenv==1.0.0
pyyaml==6.0

# 測試
pytest==7.4.0
pytest-cov==4.1.0

# 文件
mkdocs==1.5.0
mkdocs-material==9.1.0

# 開發工具
black==23.7.0
pylint==2.17.5
mypy==1.4.1
</code></pre></div>

<h3>C. 參考資源</h3>
<h4>台語學習資源</h4>
<ul>
<li><strong>教育部台灣閩南語常用詞辭典</strong>: https://twblg.dict.edu.tw</li>
<li><strong>台灣閩南語羅馬字拼音方案</strong>: https://zh.wikipedia.org/wiki/臺灣閩南語羅馬字拼音方案</li>
<li><strong>台語信望愛</strong>: https://taigi.fhl.net</li>
<li><strong>台語文數位典藏資料庫</strong>: http://ip194097.ntcu.edu.tw/memory/</li>
</ul>
<h4>技術文件</h4>
<ul>
<li><strong>Whisper GitHub</strong>: https://github.com/openai/whisper</li>
<li><strong>Whisper Paper</strong>: https://arxiv.org/abs/2212.04356</li>
<li><strong>Hugging Face Transformers</strong>: https://huggingface.co/docs/transformers</li>
<li><strong>Gradio Documentation</strong>: https://gradio.app/docs</li>
<li><strong>台灣言語工具</strong>: https://github.com/i3thuan5/tai5-uan5_gian5-gi2_kang1-ku7</li>
</ul>
<h4>學術論文</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">1.</span><span class="w"> </span><span class="s">&quot;Robust Speech Recognition via Large-Scale Weak Supervision&quot;</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Radford</span><span class="w"> </span><span class="n">et</span><span class="w"> </span><span class="n">al</span><span class="mf">.</span><span class="p">,</span><span class="w"> </span><span class="mf">2022</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">Whisper</span><span class="w"> </span><span class="n">原始論文</span>

<span class="mf">2.</span><span class="w"> </span><span class="s">&quot;Taiwanese Hokkien Speech Recognition&quot;</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">台語語音辨識相關研究</span>

<span class="mf">3.</span><span class="w"> </span><span class="s">&quot;Automatic Pronunciation Assessment for Language Learning&quot;</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">自動發音評分系統綜述</span>

<span class="mf">4.</span><span class="w"> </span><span class="s">&quot;Tonal Languages and Speech Recognition&quot;</span>
<span class="w">   </span><span class="o">-</span><span class="w"> </span><span class="n">聲調語言的語音辨識挑戰</span>
</code></pre></div>

<h4>開源專案參考</h4>
<ul>
<li><strong>CommonVoice</strong>: Mozilla 的多語言語音資料集專案</li>
<li><strong>ESPnet</strong>: 端到端語音處理工具包</li>
<li><strong>Kaldi</strong>: 語音辨識工具包</li>
</ul>
<h3>D. 常見問題 FAQ</h3>
<h4>Q1: 為什麼選擇台羅拼音而不是其他拼音系統？</h4>
<div class="codehilite"><pre><span></span><code><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="err">台羅（台灣閩南語羅馬字拼音）是教育部公告的官方標準，具有</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="err">標準化</span><span class="o">:</span><span class="w"> </span><span class="err">統一的拼寫規則</span>
<span class="o">-</span><span class="w"> </span><span class="err">完整性</span><span class="o">:</span><span class="w"> </span><span class="err">能精確標示所有音素</span>
<span class="o">-</span><span class="w"> </span><span class="err">教育性</span><span class="o">:</span><span class="w"> </span><span class="err">學校教材採用</span>
<span class="o">-</span><span class="w"> </span><span class="err">可讀性</span><span class="o">:</span><span class="w"> </span><span class="err">拉丁字母易於電腦處理</span>
</code></pre></div>

<h4>Q2: 系統能處理不同的台語腔調嗎？</h4>
<div class="codehilite"><pre><span></span><code><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="n">MVP</span><span class="w"> </span><span class="err">階段以標準腔為主，但設計上預留擴展性</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="err">目前</span><span class="o">:</span><span class="w"> </span><span class="err">以教育部標準音為基準</span>
<span class="o">-</span><span class="w"> </span><span class="err">未來</span><span class="o">:</span><span class="w"> </span><span class="err">可新增方言模式（泉州腔、漳州腔等）</span>
<span class="o">-</span><span class="w"> </span><span class="err">實作</span><span class="o">:</span><span class="w"> </span><span class="err">透過不同的評分權重檔調整</span>
</code></pre></div>

<h4>Q3: 辨識準確率如何提升？</h4>
<div class="codehilite"><pre><span></span><code><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="err">多管齊下提升準確率</span><span class="o">:</span>
<span class="mi">1</span><span class="o">.</span><span class="w"> </span><span class="err">音訊前處理</span><span class="o">:</span><span class="w"> </span><span class="err">降噪、正規化</span>
<span class="mi">2</span><span class="o">.</span><span class="w"> </span><span class="err">提示使用者</span><span class="o">:</span><span class="w"> </span><span class="err">錄音環境建議</span>
<span class="mi">3</span><span class="o">.</span><span class="w"> </span><span class="err">模型微調</span><span class="o">:</span><span class="w"> </span><span class="err">收集資料</span><span class="n">fine</span><span class="o">-</span><span class="n">tune</span>
<span class="mi">4</span><span class="o">.</span><span class="w"> </span><span class="err">後處理</span><span class="o">:</span><span class="w"> </span><span class="err">常見錯誤校正</span>
</code></pre></div>

<h4>Q4: 如何確保評分的公平性？</h4>
<div class="codehilite"><pre><span></span><code><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="err">評分機制設計考量</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="err">客觀演算法</span><span class="o">:</span><span class="w"> </span><span class="err">基於編輯距離</span>
<span class="o">-</span><span class="w"> </span><span class="err">專家驗證</span><span class="o">:</span><span class="w"> </span><span class="err">與人工評分比對</span>
<span class="o">-</span><span class="w"> </span><span class="err">透明化</span><span class="o">:</span><span class="w"> </span><span class="err">提供詳細評分依據</span>
<span class="o">-</span><span class="w"> </span><span class="err">可調整</span><span class="o">:</span><span class="w"> </span><span class="err">權重可根據使用回饋調整</span>
</code></pre></div>

<h4>Q5: 系統需要網路連線嗎？</h4>
<div class="codehilite"><pre><span></span><code><span class="n">A</span><span class="o">:</span><span class="w"> </span><span class="err">分階段實作</span><span class="o">:</span>
<span class="o">-</span><span class="w"> </span><span class="n">MVP階段</span><span class="o">:</span><span class="w"> </span><span class="err">需要網路（模型首次下載）</span>
<span class="o">-</span><span class="w"> </span><span class="err">執行時</span><span class="o">:</span><span class="w"> </span><span class="err">可離線使用</span>
<span class="o">-</span><span class="w"> </span><span class="err">未來</span><span class="o">:</span><span class="w"> </span><span class="err">完整離線模式（行動</span><span class="n">APP</span><span class="err">）</span>
</code></pre></div>

<h3>E. 團隊協作指南</h3>
<h4>建議團隊組成</h4>
<table>
<thead>
<tr>
<th>角色</th>
<th>人數</th>
<th>職責</th>
<th>所需技能</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>專案經理</strong></td>
<td>1</td>
<td>進度管控、風險管理、協調溝通</td>
<td>專案管理、敏捷開發</td>
</tr>
<tr>
<td><strong>後端工程師</strong></td>
<td>1-2</td>
<td>核心系統開發、模型整合</td>
<td>Python, ML, APIs</td>
</tr>
<tr>
<td><strong>前端工程師</strong></td>
<td>1</td>
<td>介面設計與實作</td>
<td>Web開發, Gradio/Streamlit</td>
</tr>
<tr>
<td><strong>台語專家</strong></td>
<td>1</td>
<td>文稿校驗、評分標準制定</td>
<td>台語專業、語言學</td>
</tr>
<tr>
<td><strong>測試工程師</strong></td>
<td>1</td>
<td>品質保證、測試自動化</td>
<td>測試方法論、自動化</td>
</tr>
<tr>
<td><strong>UX設計師</strong></td>
<td>0-1</td>
<td>使用者體驗設計（可選）</td>
<td>UI/UX、使用者研究</td>
</tr>
</tbody>
</table>
<h4>協作工具建議</h4>
<div class="codehilite"><pre><span></span><code><span class="err">版本控制</span><span class="o">:</span><span class="w"> </span><span class="n">Git</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">GitHub</span>
<span class="err">專案管理</span><span class="o">:</span><span class="w"> </span><span class="n">Trello</span><span class="w"> </span><span class="sr">/ Notion /</span><span class="w"> </span><span class="n">Jira</span>
<span class="err">文件協作</span><span class="o">:</span><span class="w"> </span><span class="n">Google</span><span class="w"> </span><span class="n">Docs</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Notion</span>
<span class="err">溝通工具</span><span class="o">:</span><span class="w"> </span><span class="n">Slack</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">Discord</span>
<span class="err">設計工具</span><span class="o">:</span><span class="w"> </span><span class="n">Figma</span><span class="w"> </span><span class="o">(</span><span class="n">UI設計</span><span class="o">)</span>
<span class="err">測試管理</span><span class="o">:</span><span class="w"> </span><span class="n">TestRail</span><span class="w"> </span><span class="o">(</span><span class="err">可選</span><span class="o">)</span>
</code></pre></div>

<h4>Git 工作流程</h4>
<div class="codehilite"><pre><span></span><code><span class="c1"># 主分支</span>
main<span class="w">           </span><span class="c1"># 穩定版本</span>
develop<span class="w">        </span><span class="c1"># 開發分支</span>

<span class="c1"># 功能分支</span>
feature/text-manager
feature/audio-recorder
feature/scoring-engine
feature/web-interface

<span class="c1"># 工作流程</span>
git<span class="w"> </span>checkout<span class="w"> </span>develop
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>feature/新功能
<span class="c1"># ... 開發 ...</span>
git<span class="w"> </span>add<span class="w"> </span>.
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;feat: 新增xxx功能&quot;</span>
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>feature/新功能
<span class="c1"># 發起 Pull Request</span>
</code></pre></div>

<h4>Commit 訊息規範</h4>
<div class="codehilite"><pre><span></span><code><span class="nx">格式</span><span class="p">:</span><span class="w"> </span><span class="p">&lt;</span><span class="k">type</span><span class="p">&gt;(&lt;</span><span class="nx">scope</span><span class="p">&gt;):</span><span class="w"> </span><span class="p">&lt;</span><span class="nx">subject</span><span class="p">&gt;</span>

<span class="nx">Type</span><span class="p">:</span>
<span class="o">-</span><span class="w"> </span><span class="nx">feat</span><span class="p">:</span><span class="w"> </span><span class="nx">新功能</span>
<span class="o">-</span><span class="w"> </span><span class="nx">fix</span><span class="p">:</span><span class="w"> </span><span class="nx">Bug修復</span>
<span class="o">-</span><span class="w"> </span><span class="nx">docs</span><span class="p">:</span><span class="w"> </span><span class="nx">文件更新</span>
<span class="o">-</span><span class="w"> </span><span class="nx">style</span><span class="p">:</span><span class="w"> </span><span class="nx">格式調整</span>
<span class="o">-</span><span class="w"> </span><span class="nx">refactor</span><span class="p">:</span><span class="w"> </span><span class="nx">重構</span>
<span class="o">-</span><span class="w"> </span><span class="nx">test</span><span class="p">:</span><span class="w"> </span><span class="nx">測試</span>
<span class="o">-</span><span class="w"> </span><span class="nx">chore</span><span class="p">:</span><span class="w"> </span><span class="nx">雜項</span>

<span class="nx">範例</span><span class="p">:</span>
<span class="nx">feat</span><span class="p">(</span><span class="nx">scorer</span><span class="p">):</span><span class="w"> </span><span class="nx">新增聲調評分功能</span>
<span class="nx">fix</span><span class="p">(</span><span class="nx">recorder</span><span class="p">):</span><span class="w"> </span><span class="nx">修復音量過低問題</span>
<span class="nx">docs</span><span class="p">(</span><span class="nx">readme</span><span class="p">):</span><span class="w"> </span><span class="nx">更新安裝說明</span>
</code></pre></div>

<hr />
<h2>十二、結語</h2>
<h3>專案願景</h3>
<p>本台語朗讀自動評分系統不僅是一個技術專案，更承載著<strong>本土語言傳承</strong>與<strong>科技賦能教育</strong>的使命。透過 AI 技術的應用，我們期望：</p>
<ol>
<li><strong>降低學習門檻</strong> - 讓任何人都能輕鬆學習台語</li>
<li><strong>提升學習效率</strong> - 即時回饋取代傳統的延遲批改</li>
<li><strong>促進語言保存</strong> - 以數位方式記錄與推廣台語</li>
<li><strong>創新教學模式</strong> - 為教育工作者提供有力工具</li>
</ol>
<h3>關鍵成功因素</h3>
<p>✅ <strong>技術可行性驗證</strong> - 務必在 Week 2 確認 Whisper 模型輸出格式<br />
✅ <strong>高品質文稿庫</strong> - 100+ 篇經專家校驗的標準文稿<br />
✅ <strong>合理評分標準</strong> - 與專家共同制定，持續優化<br />
✅ <strong>使用者中心設計</strong> - 介面簡潔、流程順暢、回饋即時<br />
✅ <strong>持續迭代改進</strong> - 收集使用資料，不斷優化系統  </p>
<h3>下一步行動</h3>
<h4>立即行動（本週內）</h4>
<ol>
<li>📋 組建開發團隊或確認個人開發計劃</li>
<li>💻 建置開發環境（Python + 套件安裝）</li>
<li>🔬 執行 Whisper 模型測試（最關鍵！）</li>
<li>📝 準備 10-20 篇初始文稿</li>
</ol>
<h4>短期目標（2週內）</h4>
<ol>
<li>✅ 完成技術驗證報告</li>
<li>✅ 確定技術方案（根據模型輸出格式）</li>
<li>✅ 建立基礎文稿庫（30篇）</li>
<li>✅ 開始核心模組開發</li>
</ol>
<h4>中期目標（2個月內）</h4>
<ol>
<li>✅ 完成 MVP 開發</li>
<li>✅ 使用者測試與回饋</li>
<li>✅ 優化與bug修復</li>
<li>✅ 正式發布 v1.0</li>
</ol>
<h3>社會影響期待</h3>
<p>這個專案若能成功，將可能產生以下影響：</p>
<p>🌱 <strong>教育普及</strong> - 讓偏鄉或缺乏台語環境的學生也能學習<br />
👨‍👩‍👧‍👦 <strong>世代傳承</strong> - 協助年輕世代重新連結母語<br />
🏫 <strong>教師增能</strong> - 減輕教師負擔，提供教學輔助工具<br />
🔬 <strong>學術貢獻</strong> - 累積台語語音資料，促進研究發展<br />
🌍 <strong>語言保存</strong> - 為台語數位化保存盡一份心力  </p>
<h3>致謝與鼓勵</h3>
<p>感謝您對本土語言教育的關注與投入！</p>
<p>這是一個有意義且具挑戰性的專案，需要耐心與毅力。遇到困難時，請記住：</p>
<blockquote>
<p><strong>"一枝草，一點露，天無絕人之路"</strong><br />
每一步努力都在為台語的未來鋪路。</p>
</blockquote>
<p>讓我們一起用科技的力量，為台語學習開創新的可能！</p>
<hr />
<p><strong>專案資訊</strong></p>
<ul>
<li><strong>專案名稱</strong>: 台語朗讀自動評分系統</li>
<li><strong>版本</strong>: v1.0 計劃案</li>
<li><strong>文件版本</strong>: 2025-10-22</li>
<li><strong>作者</strong>: Claude (Anthropic)</li>
<li><strong>授權</strong>: MIT License (建議)</li>
<li><strong>聯絡</strong>: [待補充]</li>
</ul>
<p><strong>參與貢獻</strong><br />
歡迎任何形式的貢獻：<br />
- 🐛 回報問題<br />
- 💡 功能建議<br />
- 📝 文稿貢獻<br />
- 🔧 程式碼改進<br />
- 📖 文件優化</p>
<p><strong>預祝專案成功！</strong> 🎉</p>
<hr />
<p><em>本計劃案提供完整的開發藍圖，從技術選型、功能設計到實作步驟均有詳細規劃。實際執行時可根據資源狀況與遇到的問題靈活調整，保持敏捷開發的彈性。</em></p></div>
    
    <!-- Highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
    
    <!-- Mermaid -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            "startOnLoad": true,
            "theme": "dark",
            "securityLevel": "loose"
});
    </script>
</body>
</html>
